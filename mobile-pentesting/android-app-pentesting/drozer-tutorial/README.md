# Drozerãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**ãƒã‚°ãƒã‚¦ãƒ³ãƒ†ã‚£ã®ãƒ’ãƒ³ãƒˆ**ï¼š**Intigritiã«ç™»éŒ²**ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ã€ãƒãƒƒã‚«ãƒ¼ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãª**ãƒã‚°ãƒã‚¦ãƒ³ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã§ã™ï¼ä»Šã™ã[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ã«å‚åŠ ã—ã¦ã€æœ€å¤§**$100,000**ã®å ±é…¬ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

## ãƒ†ã‚¹ãƒˆã™ã‚‹APK

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk) (mrwlabsã‹ã‚‰)
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ›ã‚¹ãƒˆå†…ã«Drozerã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚[æœ€æ–°ã®ãƒªãƒªãƒ¼ã‚¹](https://github.com/mwrlabs/drozer/releases)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
æœ€æ–°ã®ãƒªãƒªãƒ¼ã‚¹ã‹ã‚‰drozer APKã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ç¾æ™‚ç‚¹ã§ã¯ã€[ã“ã¡ã‚‰](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk)ã§ã™ã€‚
```
adb install drozer.apk
```
### ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ãƒãƒ¼ãƒˆ31415ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã™ã€‚Drozerã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®é–“ã®é€šä¿¡ã‚’ç¢ºç«‹ã™ã‚‹ãŸã‚ã«ã€[ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°](https://en.wikipedia.org/wiki/Port\_forwarding)ãŒå¿…è¦ã§ã™ã€‚ä»¥ä¸‹ã¯ãã®ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™:
```
adb forward tcp:31415 tcp:31415
```
æœ€å¾Œã«ã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’**èµ·å‹•**ã—ã€ãƒœã‚¿ãƒ³ã®ã€Œ**ON**ã€ã‚’æŠ¼ã—ã¾ã™ã€‚

![](<../../../.gitbook/assets/image (63).png>)

ãã—ã¦ã€ãã‚Œã«æ¥ç¶šã—ã¾ã™ï¼š
```
drozer console connect
```
## ãŠã‚‚ã—ã‚ã„ã‚³ãƒãƒ³ãƒ‰

| **ã‚³ãƒãƒ³ãƒ‰**    | **èª¬æ˜**                                                                                                                                        |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | é¸æŠã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚                                                                                                                      |
| **list**        | ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å®Ÿè¡Œã§ãã‚‹ã™ã¹ã¦ã®drozerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚é©åˆ‡ãªæ¨©é™ã‚’æŒã£ã¦ã„ãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯éè¡¨ç¤ºã«ã•ã‚Œã¾ã™ã€‚ |
| **shell**       | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§å¯¾è©±å‹ã®Linuxã‚·ã‚§ãƒ«ã‚’é–‹å§‹ã—ã¾ã™ã€‚                                                                           |
| **clean**       | drozerãŒAndroidãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ä¿å­˜ã—ãŸä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã€‚                                                                                         |
| **load**        | drozerã‚³ãƒãƒ³ãƒ‰ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€é †ç•ªã«å®Ÿè¡Œã—ã¾ã™ã€‚                                                                                   |
| **module**      | ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰è¿½åŠ ã®drozerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ¤œç´¢ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚                                                                                          |
| **unset**       | drozerãŒç”Ÿæˆã™ã‚‹ã™ã¹ã¦ã®Linuxã‚·ã‚§ãƒ«ã«æ¸¡ã•ã‚Œã‚‹åå‰ä»˜ãå¤‰æ•°ã‚’å‰Šé™¤ã—ã¾ã™ã€‚                                                                         |
| **set**         | drozerã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã‚‹ã™ã¹ã¦ã®Linuxã‚·ã‚§ãƒ«ã«ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹å¤‰æ•°ã«å€¤ã‚’æ ¼ç´ã—ã¾ã™ã€‚                                   |
| **shell**       | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§å¯¾è©±å‹ã®Linuxã‚·ã‚§ãƒ«ã‚’é–‹å§‹ã—ã¾ã™ã€‚                                                                            |
| **run MODULE**  | drozerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚                                                                                                                                |
| **exploit**     | drozerã¯ãƒ‡ãƒã‚¤ã‚¹ã§å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚ `drozer exploit list`                                                                             |
| **payload**     | ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã«ã¯ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚ `drozer payload list`                                                                                                     |

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®**åå‰**ã‚’éƒ¨åˆ†ä¸€è‡´ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦æ¤œç´¢ã—ã¾ã™ï¼š
```
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åŸºæœ¬æƒ…å ±**:

The package name is `com.example.app` and the version is `1.0`. The package is signed with the certificate fingerprint `A1:B2:C3:D4:E5:F6:G7:H8:I9:J0:K1:L2:M3:N4:O5:P6:Q7:R8:S9:T0`. The package is targeted for Android API level 28 (Android 9.0 Pie) and the minimum supported API level is 21 (Android 5.0 Lollipop).
```
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
**ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ**ã‚’èª­ã‚€ï¼š
```
run app.package.manifest jakhar.aseem.diva
```
**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ”»æ’ƒé¢**ï¼š
```
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£**: ãŠãã‚‰ãã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’é–‹å§‹ã—ã€èµ·å‹•ã‚’é˜²ãã¹ãèªè¨¼ã‚’å›é¿ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
* **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ—ãƒ­ãƒã‚¤ãƒ€**: ç§çš„ãªãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€ã„ãã¤ã‹ã®è„†å¼±æ€§ï¼ˆSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚„ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«ï¼‰ã‚’æ‚ªç”¨ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
* **ã‚µãƒ¼ãƒ“ã‚¹**:
* **is debuggable**: [è©³ç´°ã‚’å­¦ã¶](./#is-debuggeable)

### ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£

AndroidManifest.xmlãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã€Œandroid:exportedã€ã®å€¤ãŒ**ã€Œtrueã€**ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã®ãƒªã‚¹ãƒˆ**ï¼š
```bash
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã®é–‹å§‹**:

ãŠãã‚‰ãã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’é–‹å§‹ã—ã€ãã‚Œã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã‚’é˜²ãã¹ãèªè¨¼ã‚’ãƒã‚¤ãƒ‘ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

{% code overflow="wrap" %}
```bash
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
{% endcode %}

**adb**ã‹ã‚‰ã‚‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯com.example.demoã§ã™
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£åã¯com.example.test.MainActivityã§ã™
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ—ãƒ­ãƒã‚¤ãƒ€

ã“ã®æŠ•ç¨¿ã¯éå¸¸ã«å¤§ãã„ãŸã‚ã€[ã“ã“ã§ç‹¬è‡ªã®ãƒšãƒ¼ã‚¸ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™](exploiting-content-providers.md)ã€‚

### ã‚µãƒ¼ãƒ“ã‚¹

ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ã¯Manifest.xmlå†…ã§å®£è¨€ã•ã‚Œã¾ã™ï¼š

{% code overflow="wrap" %}
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
{% endcode %}

ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ã€\*\*`handleMessage`\*\*é–¢æ•°ã‚’**ãƒã‚§ãƒƒã‚¯**ã—ã¦ã€**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**ã‚’**å—ã‘å–ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚

![](<../../../.gitbook/assets/image (194).png>)

#### ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚¹ãƒˆ
```bash
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®**ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**

To interact with a service, you can use the `run` command in drozer. This command allows you to execute various actions on the target service.

ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ãŸã‚ã«ã€drozerã§ã¯`run`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å¯¾è±¡ã®ã‚µãƒ¼ãƒ“ã‚¹ä¸Šã§ã•ã¾ã–ã¾ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

The basic syntax for the `run` command is as follows:

`run <module> <action> [options]`

`run`ã‚³ãƒãƒ³ãƒ‰ã®åŸºæœ¬çš„ãªæ§‹æ–‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

`run <ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«> <ã‚¢ã‚¯ã‚·ãƒ§ãƒ³> [ã‚ªãƒ—ã‚·ãƒ§ãƒ³]`

Here, `<module>` refers to the module you want to interact with, `<action>` refers to the action you want to perform on the module, and `[options]` refers to any additional options or parameters required for the action.

ã“ã“ã§ã€`<ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«>`ã¯ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ãŸã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡ã—ã€`<ã‚¢ã‚¯ã‚·ãƒ§ãƒ³>`ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸Šã§å®Ÿè¡Œã—ãŸã„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒ‡ã—ã€`[ã‚ªãƒ—ã‚·ãƒ§ãƒ³]`ã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªè¿½åŠ ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡ã—ã¾ã™ã€‚

For example, to interact with the `activity` module and launch an activity, you can use the following command:

ãŸã¨ãˆã°ã€`activity`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```
run app.activity.start --component <component_name>
```

Here, `<component_name>` refers to the name of the activity component you want to launch.

ã“ã“ã§ã€`<component_name>`ã¯èµ·å‹•ã—ãŸã„ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åå‰ã‚’æŒ‡ã—ã¾ã™ã€‚
```
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### ä¾‹

`app.service.send`ã®**drozer**ã®ãƒ˜ãƒ«ãƒ—ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

![](<../../../.gitbook/assets/image (196) (1).png>)

"_msg.what_"ã®ä¸­ã«æœ€åˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã€ãã®å¾Œã«"_msg.arg1_"ã¨"_msg.arg2_"ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§**ã©ã®æƒ…å ±ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹**ã¨ãã®å ´æ‰€ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\
`--extra`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€"_msg.replyTo"ã«ã‚ˆã£ã¦è§£é‡ˆã•ã‚Œã‚‹ä½•ã‹ã‚’é€ä¿¡ã§ãã¾ã™ã€‚ã¾ãŸã€`--bundle-as-obj`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æä¾›ã•ã‚ŒãŸè©³ç´°ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚

æ¬¡ã®ä¾‹ã§ã¯ï¼š

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (195).png>)

### ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¬ã‚·ãƒ¼ãƒãƒ¼

Androidã‚¢ãƒ—ãƒªã¯ã€Androidã‚·ã‚¹ãƒ†ãƒ ã‚„ä»–ã®Androidã‚¢ãƒ—ãƒªã‹ã‚‰ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€å—ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€[ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥-ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¼¼ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã¯ã€èˆˆå‘³ã®ã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚ãŸã¨ãˆã°ã€Androidã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•æ™‚ã‚„ãƒ‡ãƒã‚¤ã‚¹ã®å……é›»é–‹å§‹æ™‚ãªã©ã€ã•ã¾ã–ã¾ãªã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚‚é€ä¿¡ã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€ä»–ã®ã‚¢ãƒ—ãƒªã«èˆˆå‘³ãŒã‚ã‚‹æƒ…å ±ã‚’é€šçŸ¥ã™ã‚‹ãŸã‚ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆãŸã¨ãˆã°ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã“ã¨ã‚’é€šçŸ¥ã™ã‚‹ãªã©ï¼‰ã€‚

ã‚¢ãƒ—ãƒªã¯ç‰¹å®šã®ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã«ç™»éŒ²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹ã¨ã€ã‚·ã‚¹ãƒ†ãƒ ã¯ãã®ç‰¹å®šã®ã‚¿ã‚¤ãƒ—ã®ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã«ç™»éŒ²ã—ãŸã‚¢ãƒ—ãƒªã«è‡ªå‹•çš„ã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚

ã“ã‚Œã¯Manifest.xmlãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«è¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
```markup
<receiver android:name=".MyBroadcastReceiver"  android:exported="true">
<intent-filter>
<action android:name="android.intent.action.BOOT_COMPLETED"/>
<action android:name="android.intent.action.INPUT_METHOD_CHANGED" />
</intent-filter>
</receiver>
```
From: [https://developer.android.com/guide/components/broadcasts](https://developer.android.com/guide/components/broadcasts)

ã“ã‚Œã‚‰ã®ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ç™ºè¦‹ã—ãŸå¾Œã¯ã€ãã‚Œã‚‰ã®ã‚³ãƒ¼ãƒ‰ã‚’**ãƒã‚§ãƒƒã‚¯**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å—ä¿¡ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«ã€**`onReceive`**é–¢æ•°ã«ç‰¹ã«æ³¨æ„ã‚’æ‰•ã£ã¦ãã ã•ã„ã€‚

#### **ã™ã¹ã¦ã®**ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’æ¤œå‡ºã™ã‚‹
```bash
run app.broadcast.info #Detects all
```
#### ã‚¢ãƒ—ãƒªã®ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹

To check the broadcast receivers of an app, you can use the `drozer` tool. This tool allows you to interact with the Android operating system at the application layer, providing a way to analyze and manipulate the app's components.

To begin, make sure you have `drozer` installed on your machine. Once installed, you can launch `drozer` by running the following command:

```
drozer console connect
```

This will establish a connection between your machine and the target device or emulator.

To check the broadcast receivers of a specific app, you can use the `run app.broadcast.info` command followed by the app's package name. For example:

```
run app.broadcast.info -a com.example.app
```

This command will display a list of all the broadcast receivers registered by the specified app, along with their corresponding permissions and intent filters.

By examining the broadcast receivers, you can identify potential security vulnerabilities or misconfigurations that could be exploited by an attacker. It is important to review the permissions and intent filters associated with each receiver to ensure they are properly secured.

Remember to always obtain proper authorization before performing any security assessments or penetration testing activities.
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**
```
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹

ã“ã®ä¾‹ã§ã¯ã€[FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk)ã®Content Providerã‚’æ‚ªç”¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨±å¯ã‚’æ±‚ã‚ãšã«**ä»»æ„ã®SMSã‚’**éãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã®å®›å…ˆã«**é€ä¿¡ã™ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚

![](<../../../.gitbook/assets/image (199).png>)

![](<../../../.gitbook/assets/image (197) (1).png>)

ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ "_phoneNumber_" ã¨ "_message_" ã‚’Content Providerã«é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
```
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### ãƒ‡ãƒãƒƒã‚°å¯èƒ½ã‹ã©ã†ã‹

ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³APKã¯æ±ºã—ã¦ãƒ‡ãƒãƒƒã‚°å¯èƒ½ã«ãªã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚\
ã“ã‚Œã¯ã€å®Ÿè¡Œä¸­ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«**Javaãƒ‡ãƒãƒƒã‚¬ã‚’ã‚¢ã‚¿ãƒƒãƒ**ã—ã€å®Ÿè¡Œæ™‚ã«ãã‚Œã‚’æ¤œæŸ»ã—ã€ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã€ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«é€²ã‚“ã§å¤‰æ•°ã®å€¤ã‚’åé›†ã—ã€ã•ã‚‰ã«ã¯å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚[InfoSec Instituteã«ã¯ã€ãƒ‡ãƒãƒƒã‚°å¯èƒ½ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ˜ã‚Šä¸‹ã’ã‚‹ãŸã‚ã®ç´ æ™´ã‚‰ã—ã„è¨˜äº‹](../exploiting-a-debuggeable-applciation.md)ãŒã‚ã‚Šã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ‡ãƒãƒƒã‚°å¯èƒ½ã§ã‚ã‚‹å ´åˆã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
```html
<application theme="@2131296387" debuggable="true"
```
**Drozer**ã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã®ãƒ‡ãƒãƒƒã‚°å¯èƒ½ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
run app.package.debuggable
```
## ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [http://mobiletools.mwrinfosecurity.com/Using-Drozer-for-application-security-assessments/](http://mobiletools.mwrinfosecurity.com/Using-Drozer-for-application-security-assessments/)

## è¿½åŠ æƒ…å ±

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**ãƒã‚°ãƒã‚¦ãƒ³ãƒ†ã‚£ã®ãƒ’ãƒ³ãƒˆ**: **Intigriti**ã«**ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—**ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ã€ãƒãƒƒã‚«ãƒ¼ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãª**ãƒã‚°ãƒã‚¦ãƒ³ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã§ã™ï¼ä»Šã™ã[**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks)ã«å‚åŠ ã—ã¦ã€æœ€å¤§**$100,000**ã®ãƒã‚¦ãƒ³ãƒ†ã‚£ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†ï¼

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„HackTricksã®PDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ã€ç§ãŸã¡ã®ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€**[**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ãŠã‚ˆã³** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
