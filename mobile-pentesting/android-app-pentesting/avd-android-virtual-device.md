# AVD - Androidä»®æƒ³ãƒ‡ãƒã‚¤ã‚¹

## AVD - Androidä»®æƒ³ãƒ‡ãƒã‚¤ã‚¹

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆã«å”åŠ›ã—ã¦ãã‚ŒãŸ[**@offsecjay**](https://twitter.com/offsecjay)ã•ã‚“ã«æ„Ÿè¬ã—ã¾ã™ã€‚

## ä½•ã§ã™ã‹

Android Studioã§ã¯ã€**APKã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹Androidã®ä»®æƒ³ãƒã‚·ãƒ³ã‚’å®Ÿè¡Œ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä½¿ç”¨ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚‚ã®ãŒå¿…è¦ã§ã™ã€‚

* **Android SDKãƒ„ãƒ¼ãƒ«** - [ã“ã“ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://developer.android.com/studio/releases/sdk-tools)ã€‚
* ã¾ãŸã¯**Android Studio**ï¼ˆAndroid SDKãƒ„ãƒ¼ãƒ«ä»˜ãï¼‰ - [ã“ã“ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://developer.android.com/studio)ã€‚

Windowsï¼ˆç§ã®å ´åˆï¼‰ã§ã¯ã€**Android Studioã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå¾Œ**ã€**SDKãƒ„ãƒ¼ãƒ«ãŒæ¬¡ã®å ´æ‰€ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**ã•ã‚Œã¾ã—ãŸï¼š`C:\Users\<UserName>\AppData\Local\Android\Sdk\tools`

Macã§ã¯ã€SDKãƒ„ãƒ¼ãƒ«ã‚’**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ã¦ã€PATHã«é…ç½®ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ï¼š
```bash
brew tap homebrew/cask
brew install --cask android-sdk
```
ã¾ãŸã¯ã€[https://stackoverflow.com/questions/46402772/failed-to-install-android-sdk-java-lang-noclassdeffounderror-javax-xml-bind-a](https://stackoverflow.com/questions/46402772/failed-to-install-android-sdk-java-lang-noclassdeffounderror-javax-xml-bind-a)ã§ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€**Android Studio GUI**ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`~/Library/Android/sdk/cmdline-tools/latest/bin/`ã€`~/Library/Android/sdk/platform-tools/`ã€ãŠã‚ˆã³`~/Library/Android/sdk/emulator/`ã«ãã‚Œã‚‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚

Javaã®å•é¡Œã«ã¤ã„ã¦ã¯ï¼š&#x20;
```java
export JAVA_HOME=/Applications/Android\ Studio.app/Contents/jbr/Contents/Home
```
## GUI

### ä»®æƒ³ãƒã‚·ãƒ³ã®æº–å‚™

Android Studioã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ“ãƒ¥ãƒ¼ã‚’é–‹ãã€æ¬¡ã®å ´æ‰€ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š_**ãƒ„ãƒ¼ãƒ«**_ --> _**AVDãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**_ã€‚

<div align="center" data-full-width="false">

<figure><img src="../../.gitbook/assets/image (670).png" alt="" width="293"><figcaption></figcaption></figure>

</div>

æ¬¡ã«ã€_**ä»®æƒ³ãƒ‡ãƒã‚¤ã‚¹ã®ä½œæˆ**_ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

<figure><img src="../../.gitbook/assets/image (671).png" alt="" width="188"><figcaption></figcaption></figure>

_**ä½¿ç”¨ã™ã‚‹æºå¸¯é›»è©±ã‚’é¸æŠ**_ ã—ã€_**æ¬¡ã¸**_ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

{% hint style="warning" %}
Playã‚¹ãƒˆã‚¢ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸæºå¸¯é›»è©±ãŒå¿…è¦ãªå ´åˆã¯ã€Playã‚¹ãƒˆã‚¢ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼

![](<../../.gitbook/assets/image (672).png>)
{% endhint %}

ç¾åœ¨ã®ãƒ“ãƒ¥ãƒ¼ã§ã¯ã€æºå¸¯é›»è©±ãŒå®Ÿè¡Œã™ã‚‹Androidã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’**é¸æŠã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

<figure><img src="../../.gitbook/assets/image (673).png" alt="" width="375"><figcaption></figcaption></figure>

ã—ãŸãŒã£ã¦ã€ãã‚Œã‚’é¸æŠã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„å ´åˆã¯åå‰ã®æ¨ªã«ã‚ã‚‹_**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**_ã‚·ãƒ³ãƒœãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ï¼ˆ**ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¡ã¾ã™ï¼‰ã€‚**\
ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰ã€**`æ¬¡ã¸`** ã¨ **`å®Œäº†`** ã‚’é¸æŠã—ã¾ã™ã€‚

ä»®æƒ³ãƒã‚·ãƒ³ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€**AVDãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã³ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™**ã€‚

### ä»®æƒ³ãƒã‚·ãƒ³ã®å®Ÿè¡Œ

å®Ÿè¡Œã™ã‚‹ã«ã¯ã€_**é–‹å§‹ãƒœã‚¿ãƒ³**_ ã‚’æŠ¼ã—ã¾ã™ã€‚

![](<../../.gitbook/assets/image (334).png>)

## ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«

ã¾ãšã€ä½¿ç”¨ã™ã‚‹æºå¸¯é›»è©±ã‚’**æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™**ã€‚å¯èƒ½ãªæºå¸¯é›»è©±ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
```
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\bin\avdmanager.bat list device

d: 0 or "automotive_1024p_landscape"
Name: Automotive (1024p landscape)
OEM : Google
Tag : android-automotive-playstore
---------
id: 1 or "Galaxy Nexus"
Name: Galaxy Nexus
OEM : Google
---------
id: 2 or "desktop_large"
Name: Large Desktop
OEM : Google
Tag : android-desktop
---------
id: 3 or "desktop_medium"
Name: Medium Desktop
OEM : Google
Tag : android-desktop
---------
id: 4 or "Nexus 10"
Name: Nexus 10
OEM : Google
[...]
```
ãƒ‡ãƒã‚¤ã‚¹ã®åå‰ã‚’æ±ºã‚ãŸã‚‰ã€ã“ã®ãƒ‡ãƒã‚¤ã‚¹ã§å®Ÿè¡Œã™ã‚‹Androidã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’**æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**\
`sdkmanager`ã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\bin\sdkmanager.bat --list
```
ãã—ã¦ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ä½¿ç”¨ã—ãŸã„ã‚‚ã®ï¼ˆã¾ãŸã¯ã™ã¹ã¦ï¼‰ã‚’**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ã¾ã™ï¼š

{% code overflow="wrap" %}
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\bin\sdkmanager.bat "platforms;android-28" "system-images;android-28;google_apis;x86_64"
```
{% endcode %}

Androidã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸå¾Œã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸAndroidã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¸€è¦§è¡¨ç¤º**ã§ãã¾ã™ã€‚
```
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\bin\avdmanager.bat list target
----------
id: 1 or "android-28"
Name: Android API 28
Type: Platform
API level: 28
Revision: 6
----------
id: 2 or "android-29"
Name: Android API 29
Type: Platform
API level: 29
Revision: 4
```
ã“ã®æ™‚ç‚¹ã§ã€ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã‚’æ±ºã‚ã€Androidã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã®ã§ã€**æ¬¡ã®æ‰‹é †ã§ä»®æƒ³ãƒã‚·ãƒ³ã‚’ä½œæˆã§ãã¾ã™**:

{% code overflow="wrap" %}
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\bin\avdmanager.bat -v create avd -k "system-images;android-28;google_apis;x86_64" -n "AVD9" -d "Nexus 5X"
```
{% endcode %}

æœ€å¾Œã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ãƒ‡ãƒã‚¤ã‚¹ã€ŒNexus 5Xã€ã¨Androidã‚¤ãƒ¡ãƒ¼ã‚¸ã€Œsystem-images;android-28;google\_apis;x86\_64ã€ã‚’ä½¿ç”¨ã—ã¦ã€ã€ŒAVD9ã€ã¨ã„ã†åå‰ã®VMã‚’ä½œæˆã—ã¾ã—ãŸã€‚\
ã“ã‚Œã§ã€ä½œæˆã—ãŸä»®æƒ³ãƒã‚·ãƒ³ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\bin\avdmanager.bat list avd

Name: AVD9
Device: Nexus 5X (Google)
Path: C:\Users\cpolo\.android\avd\AVD9.avd
Target: Google APIs (Google Inc.)
Based on: Android API 28 Tag/ABI: google_apis/x86_64

The following Android Virtual Devices could not be loaded:
Name: Pixel_2_API_27
Path: C:\Users\cpolo\.android\avd\Pixel_2_API_27_1.avd
Error: Google pixel_2 no longer exists as a device
```
### ä»®æƒ³ãƒã‚·ãƒ³ã®å®Ÿè¡Œ

æ—¢ã«ä½œæˆã—ãŸä»®æƒ³ãƒã‚·ãƒ³ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹æ–¹æ³•ã‚’è¦‹ã¦ãã¾ã—ãŸãŒã€**ä»¥ä¸‹ã®æ–¹æ³•ã§ã‚‚ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™**:
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\emulator.exe -list-avds
AVD9
Pixel_2_API_27
```
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ä½œæˆã•ã‚ŒãŸä»®æƒ³ãƒã‚·ãƒ³ã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š

{% code overflow="wrap" %}
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\emulator.exe -avd "VirtualMachineName"
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\emulator.exe -avd "AVD9"
```
{% endcode %}

ã¾ãŸã¯ã€ã‚ˆã‚Šé«˜åº¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã€ä»®æƒ³ãƒã‚·ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€Android Virtual Deviceï¼ˆAVDï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
$ avdmanager create avd --name <avd_name> --package <package_name> --abi <abi_name>
```

- `<avd_name>`: ä½œæˆã™ã‚‹AVDã®åå‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚
- `<package_name>`: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹Androidã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’æŒ‡å®šã—ã¾ã™ã€‚ä¾‹ãˆã°ã€`system-images;android-29;google_apis;x86_64`ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€`google_apis`ã‚’æŒ‡å®šã—ã¾ã™ã€‚
- `<abi_name>`: ä½¿ç”¨ã™ã‚‹ABIï¼ˆApplication Binary Interfaceï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚ä¾‹ãˆã°ã€`x86_64`ã‚’æŒ‡å®šã—ã¾ã™ã€‚

AVDãŒä½œæˆã•ã‚ŒãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦AVDã‚’èµ·å‹•ã—ã¾ã™ã€‚

```bash
$ emulator -avd <avd_name>
```

ã“ã‚Œã«ã‚ˆã‚Šã€æŒ‡å®šã—ãŸAVDãŒèµ·å‹•ã—ã€Androidãƒ‡ãƒã‚¤ã‚¹ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\emulator.exe -avd "AVD9" -http-proxy 192.168.1.12:8080 -writable-system
```
{% endcode %}

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³

ãŸã ã—ã€ä»®æƒ³ãƒã‚·ãƒ³ã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹**ã•ã¾ã–ã¾ãªã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™**ã€‚ä»¥ä¸‹ã«ã„ãã¤ã‹ã®èˆˆå‘³æ·±ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç¤ºã—ã¾ã™ãŒã€[**ã“ã“ã§å®Œå…¨ãªãƒªã‚¹ãƒˆã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™**](https://developer.android.com/studio/run/emulator-commandline)

**èµ·å‹•**

* `-snapshot name` : VMã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®é–‹å§‹
* `-snapshot-list -snapstorage ~/.android/avd/Nexus_5X_API_23.avd/snapshots-test.img` : è¨˜éŒ²ã•ã‚ŒãŸã™ã¹ã¦ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—

**ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**

* `-dns-server 192.0.2.0, 192.0.2.255` : VMã«å¯¾ã—ã¦ã‚³ãƒ³ãƒåŒºåˆ‡ã‚Šã§DNSã‚µãƒ¼ãƒãƒ¼ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
* **`-http-proxy 192.168.1.12:8080`** : ä½¿ç”¨ã™ã‚‹HTTPãƒ—ãƒ­ã‚­ã‚·ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆBurpã‚’ä½¿ç”¨ã—ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ã®ã«éå¸¸ã«ä¾¿åˆ©ã§ã™ï¼‰
* `-port 5556` : ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¨adbã«ä½¿ç”¨ã•ã‚Œã‚‹TCPãƒãƒ¼ãƒˆç•ªå·ã‚’è¨­å®šã—ã¾ã™ã€‚
* `-ports 5556,5559` : ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¨adbã«ä½¿ç”¨ã•ã‚Œã‚‹TCPãƒãƒ¼ãƒˆã‚’è¨­å®šã—ã¾ã™ã€‚
* **`-tcpdump /path/dumpfile.cap`** : ã™ã¹ã¦ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™

**ã‚·ã‚¹ãƒ†ãƒ **

* `-selinux {disabled|permissive}` : Linuxã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–Linuxã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç„¡åŠ¹ã¾ãŸã¯è¨±å®¹ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¾ã™ã€‚
* `-timezone Europe/Paris` : ä»®æƒ³ãƒ‡ãƒã‚¤ã‚¹ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã—ã¾ã™
* `-screen {touch(default)|multi-touch|o-touch}` : ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã•ã‚ŒãŸã‚¿ãƒƒãƒã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¾ã™ã€‚
* **`-writable-system`** : ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã«æ›¸ãè¾¼ã¿å¯èƒ½ãªã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã¾ãŸã€`adb root; adb remount`ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã‚·ã‚¹ãƒ†ãƒ ã«æ–°ã—ã„è¨¼æ˜æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã«éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚

## Playã‚¹ãƒˆã‚¢ãƒ‡ãƒã‚¤ã‚¹ã®ãƒ«ãƒ¼ãƒˆåŒ–

Playã‚¹ãƒˆã‚¢ã§ãƒ‡ãƒã‚¤ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸå ´åˆã€ç›´æ¥ãƒ«ãƒ¼ãƒˆæ¨©é™ã‚’å–å¾—ã™ã‚‹ã“ã¨ã¯ã§ããšã€æ¬¡ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
```
$ adb root
adbd cannot run as root in production builds
```
[rootAVD](https://github.com/newbit1/rootAVD)ã¨[Magisk](https://github.com/topjohnwu/Magisk)ã‚’ä½¿ç”¨ã—ã¦ã€ãã‚Œã‚’ãƒ«ãƒ¼ãƒˆåŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸï¼ˆä¾‹ãˆã°ã€[**ã“ã®ãƒ“ãƒ‡ã‚ª**](https://www.youtube.com/watch?v=Wk0ixxmkzAI)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼‰ã€‚

## ä»®æƒ³ãƒã‚·ãƒ³ã«Burpè¨¼æ˜æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

ã¾ãšã€Burpã‹ã‚‰Derè¨¼æ˜æ›¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€_**Proxy**_ --> _**Options**_ --> _**Import / Export CA certificate**_ã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

![](<../../.gitbook/assets/image (367).png>)

**è¨¼æ˜æ›¸ã‚’Derå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**ã—ã€ãã‚Œã‚’**AndroidãŒç†è§£ã§ãã‚‹å½¢å¼ã«å¤‰æ›**ã—ã¾ã—ã‚‡ã†ã€‚æ³¨æ„ç‚¹ã¨ã—ã¦ã€**AVDã®Androidãƒã‚·ãƒ³ã§burpè¨¼æ˜æ›¸ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€ã“ã®ãƒã‚·ãƒ³ã‚’`-writable-system`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«å®Ÿè¡Œã§ãã¾ã™ï¼š

{% code overflow="wrap" %}
```bash
C:\Users\<UserName>\AppData\Local\Android\Sdk\tools\emulator.exe -avd "AVD9" -http-proxy 192.168.1.12:8080 -writable-system
```
{% endcode %}

æ¬¡ã«ã€**Burpã®è¨¼æ˜æ›¸ã‚’è¨­å®šã™ã‚‹**ãŸã‚ã«ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™:
```bash
openssl x509 -inform DER -in burp_cacert.der -out burp_cacert.pem
CERTHASHNAME="`openssl x509 -inform PEM -subject_hash_old -in burp_cacert.pem | head -1`.0"
mv burp_cacert.pem $CERTHASHNAME #Correct name
adb root && sleep 2 && adb remount #Allow to write on /syste
adb push $CERTHASHNAME /sdcard/ #Upload certificate
adb shell mv /sdcard/$CERTHASHNAME /system/etc/security/cacerts/ #Move to correct location
adb shell chmod 644 /system/etc/security/cacerts/$CERTHASHNAME #Assign privileges
adb reboot #Now, reboot the machine
```
**ãƒã‚·ãƒ³ãŒå†èµ·å‹•ã‚’å®Œäº†ã™ã‚‹ã¨**ã€ãƒãƒ¼ãƒ—è¨¼æ˜æ›¸ã¯ãã‚Œã«ã‚ˆã£ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ï¼

## ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å–ã‚‹

ã„ã¤ã§ã‚‚VMã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å–ã‚‹ãŸã‚ã«ã€**GUIã‚’ä½¿ç”¨**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

![](<../../.gitbook/assets/image (336).png>)

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* ã‚ãªãŸã¯**ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ HackTricksã§ã‚ãªãŸã®**ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥æ‰‹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†ã€ç§ãŸã¡ã®ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
