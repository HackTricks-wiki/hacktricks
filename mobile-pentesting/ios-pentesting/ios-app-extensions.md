# Extensiones de aplicaciones iOS

<details>

<summary><strong>Aprende a hackear AWS desde cero hasta convertirte en un experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

Las extensiones de aplicaciones mejoran la funcionalidad de las aplicaciones al permitirles interactuar con otras aplicaciones o el sistema, proporcionando funciones o contenido personalizado. Estas extensiones incluyen:

- **Teclado personalizado**: Ofrece un teclado 煤nico en todas las aplicaciones, reemplazando el teclado iOS predeterminado.
- **Compartir**: Permite compartir en redes sociales o con otros directamente.
- **Hoy (Widgets)**: Proporciona contenido o realiza tareas r谩pidamente desde la vista Hoy del Centro de Notificaciones.

Cuando un usuario interact煤a con estas extensiones, como compartir texto desde una aplicaci贸n anfitriona, la extensi贸n procesa esta entrada dentro de su contexto, aprovechando la informaci贸n compartida para realizar su tarea, como se detalla en la documentaci贸n de Apple.

### **Consideraciones de seguridad**

Los aspectos clave de seguridad incluyen:

- Las extensiones y sus aplicaciones contenedoras se comunican a trav茅s de comunicaci贸n entre procesos, no directamente.
- El **widget Hoy** es 煤nico en que puede solicitar que su aplicaci贸n se abra mediante un m茅todo espec铆fico.
- Se permite el acceso a datos compartidos dentro de un contenedor privado, pero se restringe el acceso directo.
- Algunas API, incluida HealthKit, est谩n fuera de los l铆mites de las extensiones de aplicaciones, que tampoco pueden iniciar tareas de larga duraci贸n, acceder a la c谩mara o al micr贸fono, excepto las extensiones de iMessage.

### An谩lisis est谩tico

#### **Identificaci贸n de extensiones de aplicaciones**

Para encontrar extensiones de aplicaciones en el c贸digo fuente, busca `NSExtensionPointIdentifier` en Xcode o inspecciona el paquete de la aplicaci贸n en busca de archivos `.appex` que indiquen extensiones. Sin c贸digo fuente, utiliza grep o SSH para localizar estos identificadores dentro del paquete de la aplicaci贸n.

#### **Tipos de datos admitidos**

Verifica el archivo `Info.plist` de una extensi贸n para `NSExtensionActivationRule` para identificar los tipos de datos admitidos. Esta configuraci贸n garantiza que solo los tipos de datos compatibles activen la extensi贸n en las aplicaciones anfitrionas.

#### **Compartir datos**

El intercambio de datos entre una aplicaci贸n y su extensi贸n requiere un contenedor compartido, configurado mediante "Grupos de aplicaciones" y accedido a trav茅s de `NSUserDefaults`. Este espacio compartido es necesario para transferencias en segundo plano iniciadas por las extensiones.

#### **Restricci贸n de extensiones**

Las aplicaciones pueden restringir ciertos tipos de extensiones, especialmente los teclados personalizados, asegurando que el manejo de datos sensibles se alinee con los protocolos de seguridad.

### An谩lisis din谩mico

El an谩lisis din谩mico implica:

- **Inspeccionar elementos compartidos**: Engancha en `NSExtensionContext - inputItems` para ver los tipos de datos compartidos y sus or铆genes.
- **Identificaci贸n de extensiones**: Descubre qu茅 extensiones procesan tus datos observando mecanismos internos, como `NSXPCConnection`.

Herramientas como `frida-trace` pueden ayudar a comprender los procesos subyacentes, especialmente para aquellos interesados en los detalles t茅cnicos de la comunicaci贸n entre procesos.

## Referencias
* [https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/](https://mas.owasp.org/MASTG/iOS/0x06h-Testing-Platform-Interaction/)
* [https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/](https://mas.owasp.org/MASTG/tests/ios/MASVS-PLATFORM/MASTG-TEST-0072/)

<details>

<summary><strong>Aprende a hackear AWS desde cero hasta convertirte en un experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
