# Configuraci贸n de Burp Suite para iOS

<details>

<summary><strong>Aprende a hackear AWS desde cero hasta convertirte en un experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Utiliza [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) para construir y **automatizar flujos de trabajo** f谩cilmente con las herramientas comunitarias m谩s avanzadas del mundo.\
隆Accede hoy mismo:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## Instalaci贸n del Certificado de Burp en Dispositivos iOS

Para el an谩lisis seguro del tr谩fico web y el pinning SSL en dispositivos iOS, se puede utilizar Burp Suite ya sea a trav茅s del **Asistente M贸vil de Burp** o mediante una configuraci贸n manual. A continuaci贸n se muestra una gu铆a resumida sobre ambos m茅todos:

### Instalaci贸n Automatizada con Burp Mobile Assistant

El **Asistente M贸vil de Burp** simplifica el proceso de instalaci贸n del Certificado de Burp, la configuraci贸n del proxy y el SSL Pinning. Se puede encontrar una gu铆a detallada en la [documentaci贸n oficial de PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### Pasos de Instalaci贸n Manual

1. **Configuraci贸n del Proxy:** Comienza configurando Burp como el proxy en los ajustes de Wi-Fi del iPhone.
2. **Descarga del Certificado:** Navega a `http://burp` en el navegador de tu dispositivo para descargar el certificado.
3. **Instalaci贸n del Certificado:** Instala el perfil descargado a trav茅s de **Ajustes** > **General** > **VPN y Administraci贸n de Dispositivos**, luego habilita la confianza para el CA de PortSwigger en **Ajustes de Confianza del Certificado**.

### Configuraci贸n de un Proxy de Intercepci贸n

La configuraci贸n permite el an谩lisis del tr谩fico entre el dispositivo iOS y la internet a trav茅s de Burp, requiriendo una red Wi-Fi que admita el tr谩fico de cliente a cliente. Si no est谩 disponible, una conexi贸n USB a trav茅s de usbmuxd puede servir como alternativa. Los tutoriales de PortSwigger proporcionan instrucciones detalladas sobre la [configuraci贸n del dispositivo](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) e [instalaci贸n del certificado](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Configuraci贸n Avanzada para Dispositivos con Jailbreak

Para usuarios con dispositivos con jailbreak, SSH sobre USB (a trav茅s de **iproxy**) ofrece un m茅todo para enrutar el tr谩fico directamente a trav茅s de Burp:

1.  **Establecer Conexi贸n SSH:** Usa iproxy para reenviar SSH a localhost, permitiendo la conexi贸n desde el dispositivo iOS al ordenador que ejecuta Burp.

```bash
iproxy 2222 22
```
2.  **Reenv铆o de Puerto Remoto:** Reenv铆a el puerto 8080 del dispositivo iOS al localhost del ordenador para habilitar el acceso directo a la interfaz de Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **Configuraci贸n de Proxy Global:** Por 煤ltimo, configura los ajustes de Wi-Fi del dispositivo iOS para usar un proxy manual, dirigiendo todo el tr谩fico web a trav茅s de Burp.

### Monitoreo/Captura Completa de la Red

El monitoreo del tr谩fico de dispositivos no HTTP puede realizarse eficientemente utilizando **Wireshark**, una herramienta capaz de capturar todo tipo de tr谩fico de datos. Para dispositivos iOS, el monitoreo en tiempo real del tr谩fico se facilita mediante la creaci贸n de una Interfaz Virtual Remota, un proceso detallado en [esta publicaci贸n de Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Antes de comenzar, la instalaci贸n de **Wireshark** en un sistema macOS es un requisito previo.

El procedimiento implica varios pasos clave:

1. Iniciar una conexi贸n entre el dispositivo iOS y el host macOS a trav茅s de USB.
2. Asegurar el **UDID** del dispositivo iOS, un paso necesario para el monitoreo del tr谩fico. Esto se puede hacer ejecutando un comando en el Terminal de macOS:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Despu茅s de la identificaci贸n del UDID, se debe abrir **Wireshark** y seleccionar la interfaz "rvi0" para la captura de datos.
4. Para monitoreo espec铆fico, como capturar tr谩fico HTTP relacionado con una direcci贸n IP espec铆fica, se pueden emplear los Filtros de Captura de Wireshark:

## Instalaci贸n del Certificado Burp en el Simulador

* **Exportar Certificado Burp**

En _Proxy_ --> _Opciones_ --> _Exportar certificado CA_ --> _Certificado en formato DER_

![](<../../.gitbook/assets/image (534).png>)

* **Arrastrar y Soltar** el certificado dentro del Emulador
* **Dentro del emulador** ir a _Ajustes_ --> _General_ --> _Perfil_ --> _PortSwigger CA_, y **verificar el certificado**
* **Dentro del emulador** ir a _Ajustes_ --> _General_ --> _Acerca de_ --> _Configuraci贸n de Confianza de Certificados_, y **habilitar PortSwigger CA**

![](<../../.gitbook/assets/image (1048).png>)

**隆Felicidades, has configurado con 茅xito el Certificado CA de Burp en el simulador de iOS!**

{% hint style="info" %}
**El simulador de iOS utilizar谩 las configuraciones de proxy de MacOS.**
{% endhint %}

### Configuraci贸n de Proxy en MacOS

Pasos para configurar Burp como proxy:

* Ir a _Preferencias del Sistema_ --> _Red_ --> _Avanzado_
* En la pesta帽a de _Proxies_ marcar _Proxy Web (HTTP)_ y _Proxy Web Seguro (HTTPS)_
* En ambas opciones configurar _127.0.0.1:8080_

![](<../../.gitbook/assets/image (431).png>)

* Hacer clic en _**Aceptar**_ y luego en _**Aplicar**_

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Utiliza [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) para construir y **automatizar flujos de trabajo** f谩cilmente con las herramientas comunitarias m谩s avanzadas del mundo.\
隆Accede hoy:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
