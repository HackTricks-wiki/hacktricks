# ConfiguraÃ§Ã£o do Burp Suite para iOS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* VocÃª trabalha em uma **empresa de seguranÃ§a cibernÃ©tica**? VocÃª quer ver sua **empresa anunciada no HackTricks**? ou vocÃª quer ter acesso Ã  **Ãºltima versÃ£o do PEASS ou baixar o HackTricks em PDF**? Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Descubra [**A FamÃ­lia PEASS**](https://opensea.io/collection/the-peass-family), nossa coleÃ§Ã£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* **Junte-se ao** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe suas tÃ©cnicas de hacking enviando PRs para o** [**repositÃ³rio hacktricks**](https://github.com/carlospolop/hacktricks) **e para o** [**repositÃ³rio hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

![](<../.gitbook/assets/image (9) (1) (2).png>)

\
Use [**Trickest**](https://trickest.io/) para construir e **automatizar fluxos de trabalho** com as ferramentas comunitÃ¡rias mais avanÃ§adas do mundo.\
Acesse hoje:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

## InstalaÃ§Ã£o do Certificado Burp em iOS fÃ­sico

VocÃª pode instalar o [**Burp Mobile Assistant**](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing) **para ajudar a instalar o Certificado Burp, configurar o proxy e realizar o SSL Pinning.**\
Ou vocÃª pode seguir manualmente os prÃ³ximos passos:

* Configure o **Burp** como o **proxy do iPhone em \_ConfiguraÃ§Ãµes**_\*\* --> \*\*_**Wi-Fi**_\*\* --> \*\*_**Clique na rede**_\*\* --> \*\*_**Proxy**\_
* Acesse `http://burp` e baixe o certificado
* Acesse _**ConfiguraÃ§Ãµes**_ --> _**Perfil Baixado**_ e **Instale** (serÃ¡ solicitado o seu cÃ³digo)
* Acesse _**ConfiguraÃ§Ãµes**_ --> _**Geral**_ --> _**Sobre**_ --> _**ConfiguraÃ§Ãµes de ConfianÃ§a do Certificado**_ e habilite o PortSwigger CA

### Configurando um Proxy de IntercepÃ§Ã£o via localhost

Configurar o Burp para interceptar seu trÃ¡fego Ã© bastante simples. Supomos que tanto seu dispositivo iOS quanto seu computador host estejam conectados a uma rede Wi-Fi que permita trÃ¡fego de cliente para cliente. Se o trÃ¡fego de cliente para cliente nÃ£o for permitido, vocÃª pode usar o usbmuxd para se conectar ao Burp via USB.

A PortSwigger fornece um bom [tutorial sobre como configurar um dispositivo iOS para trabalhar com o Burp](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) e um [tutorial sobre como instalar o certificado CA do Burp em um dispositivo iOS](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

#### Usando o Burp via USB em um Dispositivo com Jailbreak

Ao fazer anÃ¡lise dinÃ¢mica, Ã© interessante usar a conexÃ£o SSH para rotear nosso trÃ¡fego para o Burp que estÃ¡ sendo executado em nosso computador. Vamos comeÃ§ar:

Primeiro, precisamos usar o **iproxy** para tornar o SSH do iOS disponÃ­vel em localhost.
```bash
$ iproxy 2222 22
waiting for connection
```
O prÃ³ximo passo Ã© fazer um encaminhamento remoto de porta da porta 8080 no dispositivo iOS para a interface localhost em nosso computador para a porta 8080.
```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
Agora vocÃª deve ser capaz de acessar o Burp em seu dispositivo iOS. Abra o Safari no iOS e vÃ¡ para **127.0.0.1:8080** e vocÃª deverÃ¡ ver a pÃ¡gina do Burp Suite. Este seria tambÃ©m um bom momento para [instalar o certificado CA](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device) do Burp em seu dispositivo iOS.

O Ãºltimo passo seria definir o proxy globalmente em seu dispositivo iOS:

1. VÃ¡ para **ConfiguraÃ§Ãµes** -> **Wi-Fi**
2. Conecte-se a _qualquer_ Wi-Fi (vocÃª pode literalmente se conectar a qualquer Wi-Fi, jÃ¡ que o trÃ¡fego para a porta 80 e 443 serÃ¡ roteado atravÃ©s do USB, jÃ¡ que estamos apenas usando a ConfiguraÃ§Ã£o de Proxy para o Wi-Fi para que possamos definir um Proxy global)
3. Uma vez conectado, clique no pequeno Ã­cone azul no lado direito do Wi-Fi conectado
4. Configure seu Proxy selecionando **Manual**
5. Digite 127.0.0.1 como **Servidor**
6. Digite 8080 como **Porta**

### Monitoramento/Sniffing de Rede Completa

Se vocÃª precisar **monitorar algo diferente das comunicaÃ§Ãµes HTTP**, vocÃª pode capturar todo o trÃ¡fego do dispositivo com o **wireshark**.\
VocÃª pode capturar remotamente todo o trÃ¡fego em tempo real no iOS criando uma **Interface Virtual Remota** para o seu dispositivo iOS. Primeiro, certifique-se de ter o **Wireshark** **instalado** em seu computador host macOS.

1. **Conecte** seu dispositivo iOS ao seu computador host macOS via USB.
2. VocÃª precisarÃ¡ saber o **UDID do seu dispositivo iOS**, antes de poder comeÃ§ar a capturar. Abra o Terminal no macOS e digite o seguinte comando, preenchendo o UDID do seu dispositivo iOS.
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
1. Inicie o **Wireshark** e selecione "**rvi0**" como interface de captura.
2. Filtrar o trÃ¡fego com filtros de captura no Wireshark para exibir o que vocÃª deseja monitorar (por exemplo, todo o trÃ¡fego HTTP enviado/recebido pelo endereÃ§o IP 192.168.1.1).
```
ip.addr == 192.168.1.1 && http
```
![](<../../.gitbook/assets/image (472).png>)

A documentaÃ§Ã£o do Wireshark oferece muitos exemplos de [Filtros de Captura](https://wiki.wireshark.org/CaptureFilters) que devem ajudÃ¡-lo a filtrar o trÃ¡fego para obter as informaÃ§Ãµes que vocÃª deseja.

## InstalaÃ§Ã£o do Certificado Burp no Simulador

* **Exporte o Certificado Burp**

Em _Proxy_ --> _OpÃ§Ãµes_ --> _Exportar certificado CA_ --> _Certificado no formato DER_

![](<../../.gitbook/assets/image (459).png>)

* **Arraste e solte** o certificado dentro do Emulador
* **Dentro do emulador** vÃ¡ para _ConfiguraÃ§Ãµes_ --> _Geral_ --> _Perfil_ --> _PortSwigger CA_, e **verifique o certificado**
* **Dentro do emulador** vÃ¡ para _ConfiguraÃ§Ãµes_ --> _Geral_ --> _Sobre_ --> _ConfiguraÃ§Ãµes de ConfianÃ§a de Certificado_, e **ative o PortSwigger CA**

![](<../../.gitbook/assets/image (460).png>)

**ParabÃ©ns, vocÃª configurou com sucesso o Certificado Burp CA no simulador iOS**

{% hint style="info" %}
**O simulador iOS usarÃ¡ as configuraÃ§Ãµes de proxy do MacOS.**
{% endhint %}

### ConfiguraÃ§Ã£o de Proxy do MacOS

Passos para configurar o Burp como proxy:

* VÃ¡ para _PreferÃªncias do Sistema_ --> _Rede_ --> _AvanÃ§ado_
* Na guia _Proxies_, marque _Proxy da Web (HTTP)_ e _Proxy da Web Segura (HTTPS)_
* Em ambas as opÃ§Ãµes, configure _127.0.0.1:8080_

![](<../../.gitbook/assets/image (461).png>)

* Clique em _**Ok**_ e em _**Aplicar**_

![](<../.gitbook/assets/image (9) (1) (2).png>)

\
Use [**Trickest**](https://trickest.io/) para construir e **automatizar fluxos de trabalho** facilmente com as ferramentas da comunidade mais avanÃ§adas do mundo.\
Obtenha acesso hoje:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* VocÃª trabalha em uma **empresa de seguranÃ§a cibernÃ©tica**? Quer ver sua **empresa anunciada no HackTricks**? ou quer ter acesso Ã  **Ãºltima versÃ£o do PEASS ou baixar o HackTricks em PDF**? Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Descubra [**A FamÃ­lia PEASS**](https://opensea.io/collection/the-peass-family), nossa coleÃ§Ã£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* **Junte-se ao** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe suas tÃ©cnicas de hacking enviando PRs para o** [**repositÃ³rio hacktricks**](https://github.com/carlospolop/hacktricks) **e para o** [**repositÃ³rio hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
