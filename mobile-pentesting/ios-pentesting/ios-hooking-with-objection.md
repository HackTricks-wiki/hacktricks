<details>

<summary><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚¹ãƒ¯ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã—ã¦ãã ã•ã„
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã€å½“ç¤¾ã®ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç™ºè¦‹ã—ã¦ãã ã•ã„
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>


ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€[**Objection**](https://github.com/sensepost/objection)ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\
æ¬¡ã®ã‚ˆã†ãªæ“ä½œã‚’å®Ÿè¡Œã—ã¦ã€Objectionã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚
```bash
objection -d --gadget "iGoat-Swift" explore
objection -d --gadget "OWASP.iGoat-Swift" explore
```
```
ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€`frida-ps -Uia`ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

## ã‚¢ãƒ—ãƒªã®åŸºæœ¬åˆ—æŒ™

### ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ãƒ—ãƒªãƒ‘ã‚¹

* `env`: ãƒ‡ãƒã‚¤ã‚¹å†…ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹

```bash
env

Name               Path
-----------------  -----------------------------------------------------------------------------------------------
BundlePath         /private/var/containers/Bundle/Application/179A6E8B-E7A8-476E-BBE3-B9300F546068/iGoat-Swift.app
CachesDirectory    /var/mobile/Containers/Data/Application/A079DF84-726C-4AEA-A194-805B97B3684A/Library/Caches
DocumentDirectory  /var/mobile/Containers/Data/Application/A079DF84-726C-4AEA-A194-805B97B3684A/Documents
LibraryDirectory   /var/mobile/Containers/Data/Application/A079DF84-726C-4AEA-A194-805B97B3684A/Library
```

### ãƒãƒ³ãƒ‰ãƒ«ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸€è¦§

* `ios bundles list_bundles`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒãƒ³ãƒ‰ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º

```bash
ios bundles list_bundles
Executable    Bundle                Version    Path
------------  --------------------  ---------  -------------------------------------------
iGoat-Swift   OWASP.iGoat-Swift     1.0        ...8-476E-BBE3-B9300F546068/iGoat-Swift.app
AGXMetalA9    com.apple.AGXMetalA9  172.18.4   ...tem/Library/Extensions/AGXMetalA9.bundle
```
* `ios bundles list_frameworks`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å¤–éƒ¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä¸€è¦§è¡¨ç¤º

```bash
ios bundles list_frameworks
Executable                      Bundle                                        Version     Path
------------------------------  --------------------------------------------  ----------  -------------------------------------------
ReactCommon                     org.cocoapods.ReactCommon                     0.61.5      ...tle.app/Frameworks/ReactCommon.framework
...
```
* `memory list modules`: ãƒ¡ãƒ¢ãƒªã«ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º

```bash
memory list modules
Name                                 Base         Size                 Path
-----------------------------------  -----------  -------------------  ------------------------------------------------------------------------------
iGoat-Swift                          0x104ffc000  2326528 (2.2 MiB)    /private/var/containers/Bundle/Application/179A6E8B-E7A8-476E-BBE3-B9300F54...
SubstrateBootstrap.dylib             0x105354000  16384 (16.0 KiB)     /usr/lib/substrate/SubstrateBootstrap.dylib
...
```
* `memory list exports <module_name>`: ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º

```bash
memory list exports iGoat-Swift
Type      Name                                                                                                                                    Address
--------  --------------------------------------------------------------------------------------------------------------------------------------  -----------
variable  _mh_execute_header                                                                                                                      0x104ffc000
function  _mdictof                                                                                                                                0x10516cb88
...
```

### ã‚¢ãƒ—ãƒªã®ã‚¯ãƒ©ã‚¹ã®ä¸€è¦§

* `ios hooking list classes`: ã‚¢ãƒ—ãƒªã®ã‚¯ãƒ©ã‚¹ã‚’ä¸€è¦§è¡¨ç¤º

```bash
ios hooking list classes

AAAbsintheContext
AAAbsintheSigner
...
```
* `ios hooking search classes <search_term>`: æ–‡å­—åˆ—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚’æ¤œç´¢ã€‚ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã«é–¢é€£ã™ã‚‹ä¸€æ„ã®ç”¨èªã‚’æ¤œç´¢ã—ã¦ã€ã‚¢ãƒ—ãƒªã®ä¸»è¦ãªã‚¯ãƒ©ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```bash
ios hooking search classes iGoat
iGoat_Swift.CoreDataHelper
iGoat_Swift.RCreditInfo
...
```

### ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸€è¦§

* `ios hooking list class_methods`: ç‰¹å®šã®ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¸€è¦§è¡¨ç¤º

```bash
ios hooking list class_methods iGoat_Swift.RCreditInfo
- cvv
- setCvv:
- setName:
...
```
* `ios hooking search methods <search_term>`: æ–‡å­—åˆ—ã‚’å«ã‚€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¤œç´¢

```bash
ios hooking search methods cvv
...
```

## åŸºæœ¬çš„ãªãƒ•ãƒƒã‚¯

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ—æŒ™ã—ãŸã®ã§ã€èˆˆå‘³æ·±ã„ã‚¯ãƒ©ã‚¹ã‚„ãƒ¡ã‚½ãƒƒãƒ‰åã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

### ã‚¯ãƒ©ã‚¹ã®ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ•ãƒƒã‚¯

* `ios hooking watch class <class_name>`: ã‚¯ãƒ©ã‚¹ã®ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ•ãƒƒã‚¯ã—ã€å‘¼ã³å‡ºã•ã‚Œã‚‹ãŸã³ã«åˆæœŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨æˆ»ã‚Šå€¤ã‚’ã™ã¹ã¦ãƒ€ãƒ³ãƒ—ã—ã¾ã™

```bash
ios hooking watch class iGoat_Swift.PlistStorageExerciseViewController
```

### å˜ä¸€ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ•ãƒƒã‚¯

* `ios hooking watch method "-[<class_name> <method_name>]" --dump-args --dump-return --dump-backtrace`: ç‰¹å®šã®ã‚¯ãƒ©ã‚¹ã®ç‰¹å®šã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ•ãƒƒã‚¯ã—ã€å‘¼ã³å‡ºã•ã‚Œã‚‹ãŸã³ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã€æˆ»ã‚Šå€¤ã‚’ãƒ€ãƒ³ãƒ—ã—ã¾ã™

```bash
ios hooking watch method "-[iGoat_Swift.BinaryCookiesExerciseVC verifyItemPressed]" --dump-args --dump-backtrace --dump-return
```

### ãƒ–ãƒ¼ãƒ«å€¤ã®è¿”ã‚Šå€¤ã‚’å¤‰æ›´

* `ios hooking set return_value "-[<class_name> <method_name>]" false`: é¸æŠã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ãŒæŒ‡å®šã•ã‚ŒãŸãƒ–ãƒ¼ãƒ«å€¤ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¾ã™

```bash
ios hooking set return_value "-[iGoat_Swift.BinaryCookiesExerciseVC verifyItemPressed]" false
```

### ãƒ•ãƒƒã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç”Ÿæˆ

* `ios hooking generate simple <class_name>`:

```bash
ios hooking generate simple iGoat_Swift.RCreditInfo

var target = ObjC.classes.iGoat_Swift.RCreditInfo;

Interceptor.attach(target['+ sharedSchema'].implementation, {
onEnter: function (args) {
console.log('Entering + sharedSchema!');
},
onLeave: function (retval) {
console.log('Leaving + sharedSchema');
},
});

...
```
```
