# Obtendo o UDID de um dispositivo iOS

{% hint style="info" %}
Realize essas a√ß√µes tendo o dispositivo **conectado** ao computador via **USB** e tendo o **dispositivo desbloqueado**.
{% endhint %}

O UDID √© uma sequ√™ncia √∫nica de 40 d√≠gitos de letras e n√∫meros para identificar um dispositivo iOS. Voc√™ pode encontrar o UDID do seu dispositivo iOS no macOS Catalina em diante no aplicativo **Finder**, j√° que o iTunes n√£o est√° mais dispon√≠vel no Catalina. Basta selecionar o dispositivo iOS conectado no Finder e **clicar nas informa√ß√µes abaixo do nome do dispositivo iOS** para iterar por ele. Al√©m do UDID, voc√™ pode encontrar o n√∫mero de s√©rie, IMEI e outras informa√ß√µes √∫teis.

![](<../../.gitbook/assets/image (471).png>)

Se voc√™ estiver usando uma vers√£o do macOS anterior ao Catalina, pode encontrar o [UDID do seu dispositivo iOS via iTunes](http://www.iclarified.com/52179/how-to-find-your-iphones-udid), selecionando seu dispositivo e clicando em "N√∫mero de s√©rie" na guia Resumo. Ao clicar nisso, voc√™ iterar√° por diferentes metadados do dispositivo iOS, incluindo seu UDID.

Tamb√©m √© poss√≠vel obter o UDID por meio de v√°rias ferramentas de linha de comando no macOS enquanto o dispositivo est√° conectado via USB:

*   Usando a ferramenta [I/O Registry Explorer](https://developer.apple.com/library/archive/documentation/DeviceDrivers/Conceptual/IOKitFundamentals/TheRegistry/TheRegistry.html) `ioreg`:

    ```bash
      $ ioreg -p IOUSB -l | grep "USB Serial"
      |         "USB Serial Number" = "9e8ada44246cee813e2f8c1407520bf2f84849ec"
    ```
*   Usando [ideviceinstaller](https://github.com/libimobiledevice/ideviceinstaller) (tamb√©m dispon√≠vel no Linux):

    ```bash
      $ brew install ideviceinstaller
      $ idevice_id -l
      316f01bd160932d2bf2f95f1f142bc29b1c62dbc
    ```
*   Usando o system\_profiler:

    ```bash
      $ system_profiler SPUSBDataType | sed -n -e '/iPad/,/Serial/p;/iPhone/,/Serial/p;/iPod/,/Serial/p' | grep "Serial Number:"
      2019-09-08 10:18:03.920 system_profiler[13251:1050356] SPUSBDevice: IOCreatePlugInInterfaceForService failed 0xe00002be
                  Serial Number: 64655621de6ef5e56a874d63f1e1bdd14f7103b1
    ```
*   Usando instruments:

    ```bash
      $ instruments -s devices
    ```

# Acessando o Shell do Dispositivo

Depois de fazer o jailbreak do dispositivo, voc√™ deve ter instalado algum novo gerenciador de aplicativos como o **Cydia**.

## SSH

Para habilitar o acesso SSH ao seu dispositivo iOS, voc√™ pode instalar o **pacote OpenSSH**. Depois de instalado, voc√™ pode acessar seu dispositivo via ssh executando `ssh root@<device_ip_address>`, que far√° login como usu√°rio root:
```bash
$ ssh root@192.168.197.234
root@192.168.197.234's password:
iPhone:~ root#
```
Ao acessar seu dispositivo iOS via SSH, considere o seguinte:

* Os usu√°rios padr√£o s√£o `root` e `mobile`.
* A senha padr√£o para ambos √© `alpine`.

> Lembre-se de alterar a senha padr√£o para ambos os usu√°rios `root` e `mobile`, pois qualquer pessoa na mesma rede pode encontrar o endere√ßo IP do seu dispositivo e se conectar via senha padr√£o conhecida, o que lhes dar√° acesso root ao seu dispositivo.

## **Conectar a um dispositivo via SSH por USB**

Durante um teste real de caixa preta, uma conex√£o Wi-Fi confi√°vel pode n√£o estar dispon√≠vel. Nessa situa√ß√£o, voc√™ pode usar o usbmuxd para se conectar ao servidor SSH do seu dispositivo via USB.

Conecte o macOS a um dispositivo iOS instalando e iniciando o iproxy:
```bash
$ brew install libimobiledevice
$ iproxy 2222 22
waiting for connection
```
O comando acima mapeia a porta `22` do dispositivo iOS para a porta `2222` no localhost. Voc√™ tamb√©m pode [fazer o iproxy rodar automaticamente em segundo plano](https://iphonedevwiki.net/index.php/SSH\_Over\_USB) se n√£o quiser executar o bin√°rio toda vez que quiser fazer SSH via USB.

Com o seguinte comando em uma nova janela do terminal, voc√™ pode se conectar ao dispositivo:
```bash
$ ssh -p 2222 root@localhost
root@localhost's password:
iPhone:~ root#
```
> Pequena observa√ß√£o sobre o USB de um iDevice: em um dispositivo iOS, voc√™ n√£o pode fazer conex√µes de dados ap√≥s 1 hora de estar em um estado bloqueado, a menos que voc√™ o desbloqueie novamente devido ao Modo Restrito USB, que foi introduzido com o iOS 11.4.1.

## Aplicativo Shell no Dispositivo

Embora geralmente usar um **shell no dispositivo** (emulador de terminal) possa ser muito tedioso em compara√ß√£o com um shell remoto, pode ser √∫til para depurar em caso de, por exemplo, problemas de rede ou verificar alguma configura√ß√£o. Por exemplo, voc√™ pode instalar o [NewTerm 2](https://repo.chariz.io/package/ws.hbang.newterm2/) via Cydia para esse fim (ele suporta iOS 6.0 a 12.1.2 no momento em que este texto foi escrito).

Al√©m disso, existem alguns jailbreaks que desabilitam explicitamente o SSH de entrada _por motivos de seguran√ßa_. Nesses casos, √© muito conveniente ter um aplicativo shell no dispositivo, que voc√™ pode usar para primeiro fazer SSH para fora do dispositivo com um shell reverso e, em seguida, conectar-se a ele a partir do seu computador host.

Abrir um shell reverso via SSH pode ser feito executando o comando `ssh -R <remote_port>:localhost:22 <username>@<host_computer_ip>`.

No aplicativo shell no dispositivo, execute o seguinte comando e, quando solicitado, digite a senha do usu√°rio `mstg` do computador host:
```bash
ssh -R 2222:localhost:22 mstg@192.168.197.235
```
No seu computador hospedeiro, execute o seguinte comando e, quando solicitado, digite a senha do usu√°rio `root` do dispositivo iOS:
```bash
$ ssh -p 2222 root@localhost
```
## **Senha Esquecida**

Se voc√™ esqueceu sua senha e deseja redefini-la para o padr√£o `alpine`:

1. Edite o arquivo `/private/etc/master.passwd` em seu dispositivo iOS com jailbreak usando um **terminal** no dispositivo ou usando aplicativos como **Filza** ou **iFile**
2. Encontre as linhas:

    ```bash
     root:xxxxxxxxx:0:0::0:0:System Administrator:/var/root:/bin/sh
     mobile:xxxxxxxxx:501:501::0:0:Mobile User:/var/mobile:/bin/sh
    ```
3. Altere `xxxxxxxxx` para `/smx7MYTQIi2M` (que √© a senha criptografada `alpine`)
4. Salve e saia

# Transfer√™ncia de Dados

## Copiando Arquivos de Dados do Aplicativo via SSH e SCP

Como sabemos agora, os arquivos do nosso aplicativo s√£o armazenados no diret√≥rio Data. Agora voc√™ pode simplesmente arquivar o diret√≥rio Data com `tar` e pux√°-lo do dispositivo com `scp`:
```bash
iPhone:~ root# tar czvf /tmp/data.tgz /private/var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693
iPhone:~ root# exit
$ scp -P 2222 root@localhost:/tmp/data.tgz .
```
## Usando o iFunbox

O **iFunbox** √© um aplicativo GUI que pode ser usado para v√°rias coisas (fazer upload/download de arquivos entre eles).\
Outra ferramenta GUI para esse prop√≥sito √© o [**iExplorer**](https://macroplant.com/iexplorer).

{% hint style="info" %}
A partir da vers√£o 8.4 do iOS, a Apple **restringiu o acesso de gerenciadores de terceiros ao sandbox do aplicativo**, ent√£o ferramentas como o iFunbox e o iExplorer n√£o exibem/recuperam mais arquivos de aplicativos instalados no dispositivo se o dispositivo n√£o estiver com jailbreak.
{% endhint %}

## Usando o Objection

Quando voc√™ inicia o Objection (`objection --gadget com.apple.mobilesafari explorer`), voc√™ encontrar√° o prompt dentro do diret√≥rio Bundle.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # pwd print
Current directory: /var/containers/Bundle/Application/DABF849D-493E-464C-B66B-B8B6C53A4E76/org.owasp.MSTG.app
```
Use o comando `env` para obter os diret√≥rios do aplicativo e navegue at√© o diret√≥rio Documents.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # cd /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
/var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/Documents
```
Com o comando `file download <nome_do_arquivo>` voc√™ pode baixar um arquivo do dispositivo iOS para o seu computador e analis√°-lo posteriormente.
```bash
org.owasp.MSTG on (iPhone: 10.3.3) [usb] # file download .com.apple.mobile_container_manager.metadata.plist
Downloading /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
Streaming file from device...
Writing bytes to destination...
Successfully downloaded /var/mobile/Containers/Data/Application/72C7AAFB-1D75-4FBA-9D83-D8B4A2D44133/.com.apple.mobile_container_manager.metadata.plist to .com.apple.mobile_container_manager.metadata.plist
```
Tamb√©m √© poss√≠vel fazer upload de arquivos para o dispositivo iOS com `file upload <local_file_path>`.

# Obtendo e Extraindo Aplicativos

## Obtendo o Arquivo IPA a partir de um Link de Distribui√ß√£o OTA

Durante o desenvolvimento, os aplicativos s√£o √†s vezes fornecidos aos testadores por meio de distribui√ß√£o over-the-air (OTA). Nessa situa√ß√£o, voc√™ receber√° um link itms-services, como o seguinte:
```
itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist
```
Voc√™ pode usar a ferramenta [ITMS services asset downloader](https://www.npmjs.com/package/itms-services) para baixar o IPA de uma URL de distribui√ß√£o OTA. Instale-a via npm:
```bash
$ npm install -g itms-services
```
Salve o arquivo IPA localmente com o seguinte comando:
```bash
# itms-services -u "itms-services://?action=download-manifest&url=https://s3-ap-southeast-1.amazonaws.com/test-uat/manifest.plist" -o - > out.ipa
```
## Adquirindo o Bin√°rio do Aplicativo

1. **A partir de um IPA**:

   Se voc√™ tiver o IPA (provavelmente incluindo um bin√°rio de aplicativo j√° descriptografado), descompacte-o e estar√° pronto para come√ßar. O bin√°rio do aplicativo est√° localizado no diret√≥rio do pacote principal (.app), por exemplo, `Payload/Telegram X.app/Telegram X`. Consulte a subse√ß√£o a seguir para obter detalhes sobre a extra√ß√£o das listas de propriedades.

   > No Finder do macOS, os diret√≥rios .app s√£o abertos clicando com o bot√£o direito do mouse e selecionando "Mostrar conte√∫do do pacote". No terminal, voc√™ pode simplesmente `cd` para eles.
2. A partir de um **dispositivo com Jailbreak**:

   Se voc√™ n√£o tiver o IPA original, precisar√° de um dispositivo com jailbreak onde ir√° **instalar o aplicativo** (por exemplo, via App Store). Depois de instalado, voc√™ precisa **extrair o bin√°rio do aplicativo da mem√≥ria e reconstruir o arquivo IPA**. Devido ao DRM, o arquivo bin√°rio do aplicativo √© criptografado quando armazenado no dispositivo iOS, portanto, simplesmente pux√°-lo do Bundle (por meio de SSH ou Objection) n√£o ser√° suficiente para engenharia reversa (leia a pr√≥xima se√ß√£o).

## Descriptografia (Manual)

Ao contr√°rio de um aplicativo Android, o bin√°rio de um aplicativo iOS **s√≥ pode ser desmontado** e n√£o descompilado.\
Quando um aplicativo √© enviado √† App Store, a Apple primeiro verifica a conduta do aplicativo e, antes de lan√ß√°-lo na App Store, **a Apple criptografa o bin√°rio usando** [**FairPlay**](https://developer.apple.com/streaming/fps/). Portanto, o download do bin√°rio da App Store √© criptografado, complicando as tarefas de engenharia reversa.

No entanto, observe que existem outros **softwares de terceiros que podem ser usados para ofuscar** os bin√°rios resultantes.

Para executar o bin√°rio criptografado, o dispositivo precisa descriptograf√°-lo na mem√≥ria. Em seguida, √© poss√≠vel **despejar o bin√°rio descriptografado da mem√≥ria**.

Primeiro, verifique se o bin√°rio √© compilado com a flag PIE (Position Independent Code):
```bash
otool -Vh Original_App #Check the last word of the last line of this code
Home:
Mach header
      magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC_64   X86_64        ALL  0x00     EXECUTE    47       6080   NOUNDEFS DYLDLINK TWOLEVEL PIE
```
Se estiver definido, voc√™ pode usar o script [`change_macho_flags.py`](https://chromium.googlesource.com/chromium/src/+/49.0.2623.110/build/mac/change\_mach\_o\_flags.py) para remov√™-lo com python2:
```bash
python change_mach_o_flags.py --no-pie Original_App
otool -Vh Hello_World
Hello_World:
Mach header
      magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
   MH_MAGIC      ARM         V7  0x00     EXECUTE    22       2356   NOUNDEFS DYLDLINK TWOLEVEL MH_NO_HEAP_EXECUTION
```
Agora que a flag PIE n√£o est√° definida, o sistema operacional carregar√° o programa em um **local de in√≠cio fixo** toda vez. Para encontrar este **local**, voc√™ pode usar:
```bash
otool -l Original_App | grep -A 3 LC_SEGMENT | grep -A 1 __TEXT
  segname __TEXT
   vmaddr 0x00004000
```
Ent√£o, √© necess√°rio extrair o intervalo de mem√≥ria que precisa ser despejado:
```bash
otool -l Original_App | grep -A 4 LC_ENCRYPTION_INFO
          cmd LC_ENCRYPTION_INFO
      cmdsize 20
     cryptoff 16384
    cryptsize 17416192
      cryptid 0
```
O valor de **`cryptoff`** indica o endere√ßo de in√≠cio do conte√∫do criptografado e **`cryptsize`** indica o tamanho do conte√∫do criptografado.

Portanto, o `endere√ßo de in√≠cio` para o despejo ser√° `vmaddr + cryptoff` e o `endere√ßo final` ser√° o `endere√ßo de in√≠cio + cryptsize`.\
Neste caso: `endere√ßo_inicial = 0x4000 + 0x4000 = 0x8000` __ e `endere√ßo_final = 0x8000 + 0x109c000 = 0x10a4000`

Com essas informa√ß√µes, √© necess√°rio apenas executar o aplicativo no dispositivo com jailbreak, anexar ao processo com gdb (`gdb -p <pid>`) e despejar a mem√≥ria:
```bash
dump memory dump.bin 0x8000 0x10a4000
```
Parab√©ns! Voc√™ descriptografou a se√ß√£o criptografada em dump.bin. Agora **transfira este dump para o seu computador e sobrescreva a se√ß√£o criptografada com a se√ß√£o descriptografada**:
```bash
dd bs=1 seek=<starting_address> conv=notrunc if=dump.bin of=Original_App
```
Existe mais um passo a ser conclu√≠do. O aplicativo ainda est√° **indicando** em seus metadados que est√° **criptografado**, mas na verdade **n√£o est√°**. Ent√£o, quando executado, o dispositivo tentar√° descriptografar a se√ß√£o que j√° foi descriptografada e falhar√°.\
No entanto, voc√™ pode usar ferramentas como o [**MachOView**](https://sourceforge.net/projects/machoview/) para alterar essas informa√ß√µes. Basta abrir o bin√°rio e definir o **cryptid** como 0:

![](<../../.gitbook/assets/image (470).png>)

## Descriptografia (Autom√°tica)

### frida-ios-dump

Voc√™ pode usar ferramentas como o [**frida-ios-dump**](https://github.com/AloneMonkey/frida-ios-dump) para **remover automaticamente a criptografia de um aplicativo**.

Primeiro, certifique-se de que a configura√ß√£o no arquivo `dump.py` do **Frida-ios-dump** esteja definida como localhost com a porta 2222 ao usar o **iproxy**, ou para o endere√ßo IP real e a porta do dispositivo do qual voc√™ deseja despejar o bin√°rio.

Agora voc√™ pode usar a ferramenta com seguran√ßa para **enumerar** os **aplicativos instalados**:
```bash
$ python dump.py -l
 PID  Name             Identifier
----  ---------------  -------------------------------------
 860  Cydia            com.saurik.Cydia
1130  Settings         com.apple.Preferences
 685  Mail             com.apple.mobilemail
 834  Telegram         ph.telegra.Telegraph
   -  Stocks           com.apple.stocks
   ...
```
e voc√™ pode **despejar** **um** dos bin√°rios listados:
```bash
$ python3 dump.py -u "root" -p "<PASSWORD>" ph.telegra.Telegraph

Start the target app ph.telegra.Telegraph
Dumping Telegram to /var/folders/qw/gz47_8_n6xx1c_lwq7pq5k040000gn/T
[frida-ios-dump]: HockeySDK.framework has been loaded.
[frida-ios-dump]: Load Postbox.framework success.
[frida-ios-dump]: libswiftContacts.dylib has been dlopen.
...
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftsimd.dylib
libswiftsimd.dylib.fid: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 343k/343k [00:00<00:00, 1.54MB/s]
start dump /private/var/containers/Bundle/Application/14002D30-B113-4FDF-BD25-1BF740383149/Telegram.app/Frameworks/libswiftCoreData.dylib
libswiftCoreData.dylib.fid: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 82.5k/82.5k [00:00<00:00, 477kB/s]
5.m4a: 80.9MB [00:14, 5.85MB/s]
0.00B [00:00, ?B/s]Generating "Telegram.ipa"
```
Depois disso, o arquivo `Telegram.ipa` ser√° criado no seu diret√≥rio atual. Voc√™ pode validar o sucesso do dump removendo o aplicativo e reinstalando-o (por exemplo, usando o [**ios-deploy**](https://github.com/ios-control/ios-deploy) `ios-deploy -b Telegram.ipa`). Note que isso s√≥ funcionar√° em dispositivos com jailbreak, caso contr√°rio, a assinatura n√£o ser√° v√°lida.

### flexdecrypt

Para **obter o arquivo ipa** de um aplicativo instalado, voc√™ tamb√©m pode usar a ferramenta [**flexdecrypt**](https://github.com/JohnCoates/flexdecrypt) ou um wrapper da ferramenta chamado [**flexdump**](https://gist.github.com/defparam/71d67ee738341559c35c684d659d40ac)**.**\
Em qualquer caso, voc√™ precisar√° **instalar o flexdecrypt no dispositivo** executando algo como:
```markup
wget https://github.com/JohnCoates/flexdecrypt/releases/download/1.1/flexdecrypt.deb
dpkg -i flexdecrypt.deb
rm flexdecrypt.deb
```
e para usar o **flexdump**:
```bash
apt install zip unzip
wget https://gist.githubusercontent.com/defparam/71d67ee738341559c35c684d659d40ac/raw/30c7612262f1faf7871ba8e32fbe29c0f3ef9e27/flexdump -P /usr/local/bin; chmod +x /usr/local/bin/flexdump
flexdump list #List apps
flexdump dump Twitter.app #Create .ipa file from app
```
### r2flutch

[r2flutch](https://github.com/as0ler/r2flutch) √© uma ferramenta que usa **radare** e **frida** para **descriptografar** e **dump ios apps**.

Veja o **github** para mais informa√ß√µes.

# Instalando aplicativos

Quando voc√™ instala um aplicativo sem usar a App Store da Apple, isso √© chamado de **sideloading**. Existem v√°rias maneiras de fazer sideloading, que s√£o descritas abaixo. No dispositivo iOS, o processo real de instala√ß√£o √© ent√£o tratado pelo **daemon installd**, que ir√° **descompactar** e **instalar** o aplicativo. Para integrar servi√ßos de aplicativos ou ser instalado em um dispositivo iOS, todos os **aplicativos devem ser assinados com um certificado emitido pela Apple**. Isso significa que o aplicativo s√≥ pode ser instalado ap√≥s a verifica√ß√£o bem-sucedida da assinatura do c√≥digo. Em um telefone com jailbreak, no entanto, voc√™ pode **contornar esse recurso de seguran√ßa com** [**AppSync**](http://repo.hackyouriphone.org/appsyncunified), um pacote dispon√≠vel na loja Cydia. Ele cont√©m in√∫meros aplicativos √∫teis que aproveitam os privil√©gios de root fornecidos pelo jailbreak para executar funcionalidades avan√ßadas. **AppSync √© um ajuste que corrige o installd**, permitindo a instala√ß√£o de pacotes IPA falsamente assinados.

Existem diferentes m√©todos para instalar um pacote IPA em um dispositivo iOS, que s√£o descritos em detalhes abaixo.

> Observe que o iTunes n√£o est√° mais dispon√≠vel no macOS Catalina. Se voc√™ estiver usando uma vers√£o mais antiga do macOS, o iTunes ainda estar√° dispon√≠vel, mas desde o iTunes 12.7 n√£o √© poss√≠vel instalar aplicativos.

### Cydia Impactor

[Cydia Impactor](http://www.cydiaimpactor.com) foi originalmente criado para fazer jailbreak em iPhones, mas foi reescrito para assinar e instalar pacotes IPA em dispositivos iOS via sideloading (e at√© mesmo arquivos APK em dispositivos Android). O Cydia Impactor est√° dispon√≠vel para Windows, macOS e Linux. Um [guia passo a passo e etapas de solu√ß√£o de problemas est√£o dispon√≠veis em yalujailbreak.net](https://yalujailbreak.net/how-to-use-cydia-impactor/).

### libimobiledevice

No Linux e tamb√©m no macOS, voc√™ pode usar alternativamente o [libimobiledevice](https://www.libimobiledevice.org), uma biblioteca de protocolo de software multiplataforma e um conjunto de ferramentas para comunica√ß√£o nativa com dispositivos iOS. Isso permite que voc√™ instale aplicativos por meio de uma conex√£o USB executando o ideviceinstaller. A conex√£o √© implementada com o daemon de multiplexa√ß√£o USB [usbmuxd](https://www.theiphonewiki.com/wiki/Usbmux), que fornece um t√∫nel TCP sobre USB.

O pacote para libimobiledevice estar√° dispon√≠vel no gerenciador de pacotes do seu Linux. No macOS, voc√™ pode instalar o libimobiledevice via brew:
```bash
$ brew install libimobiledevice
$ brew install ideviceinstaller
```
Depois da instala√ß√£o, voc√™ ter√° v√°rios novos comandos dispon√≠veis na linha de comando, como `ideviceinfo`, `ideviceinstaller` ou `idevicedebug`.
```bash
# The following command will show detailed information about the iOS device connected via USB.
$ ideviceinfo
# The following command will install the IPA to your iOS device.
$ ideviceinstaller -i iGoat-Swift_v1.0-frida-codesigned.ipa
...
Install: Complete
# The following command will start the app in debug mode, by providing the bundle name. The bundle name can be found in the previous command after "Installing".
$ idevicedebug -d run OWASP.iGoat-Swift
```
### ipainstaller

O IPA tamb√©m pode ser instalado diretamente no dispositivo iOS via linha de comando com o [ipainstaller](https://github.com/autopear/ipainstaller). Ap√≥s copiar o arquivo para o dispositivo, por exemplo, via scp, voc√™ pode executar o ipainstaller com o nome do arquivo IPA:
```bash
$ ipainstaller App_name.ipa
```
### ios-deploy

No macOS, voc√™ tamb√©m pode usar a ferramenta **ios-deploy** para instalar aplicativos iOS a partir da linha de comando. Voc√™ precisar√° descompactar seu IPA, j√° que o ios-deploy usa os pacotes de aplicativos para instalar aplicativos.
```bash
$ unzip Name.ipa
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v
```
Depois que o aplicativo √© instalado no dispositivo iOS, voc√™ pode simplesmente inici√°-lo adicionando a flag `-m`, que iniciar√° a depura√ß√£o diretamente sem instalar o aplicativo novamente.
```bash
$ ios-deploy --bundle 'Payload/Name.app' -W -d -v -m
```
### Xcode

Tamb√©m √© poss√≠vel usar o IDE Xcode para instalar aplicativos iOS seguindo os seguintes passos:

1. Inicie o Xcode
2. Selecione **Window/Devices and Simulators**
3. Selecione o dispositivo iOS conectado e clique no sinal de **+** em **Installed Apps**.

### Permitir a instala√ß√£o de aplicativos em um dispositivo que n√£o seja iPad

√Äs vezes, um aplicativo pode exigir o uso em um dispositivo iPad. Se voc√™ s√≥ tiver dispositivos iPhone ou iPod touch, poder√° for√ßar a instala√ß√£o e o uso do aplicativo nesses tipos de dispositivos. Voc√™ pode fazer isso alterando o valor da propriedade **UIDeviceFamily** para o valor **1** no arquivo **Info.plist**.
```markup
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>

  <key>UIDeviceFamily</key>
  <array>
    <integer>1</integer>
  </array>

</dict>
</plist>
```
√â importante observar que a altera√ß√£o desse valor ir√° quebrar a assinatura original do arquivo IPA, portanto, voc√™ precisa re-assinar o IPA, ap√≥s a atualiza√ß√£o, para instal√°-lo em um dispositivo no qual a valida√ß√£o da assinatura n√£o tenha sido desativada.

Essa t√©cnica de bypass pode n√£o funcionar se o aplicativo requer recursos espec√≠ficos de iPads modernos enquanto seu iPhone ou iPod √© um pouco mais antigo.

Os poss√≠veis valores para a propriedade [UIDeviceFamily](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW11) podem ser encontrados na documenta√ß√£o do desenvolvedor da Apple.


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>‚òÅÔ∏è HackTricks Cloud ‚òÅÔ∏è</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>üê¶ Twitter üê¶</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>üéôÔ∏è Twitch üéôÔ∏è</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>üé• Youtube üé•</strong></a></summary>

- Voc√™ trabalha em uma **empresa de seguran√ßa cibern√©tica**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!

- Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)

- Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)

- **Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**

- **Compartilhe suas t√©cnicas de hacking enviando PRs para o [reposit√≥rio hacktricks](https://github.com/carlospolop/hacktricks) e [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
