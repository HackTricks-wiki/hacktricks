# macOS AppleFS

<details>

<summary><strong>ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

HackTricks ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricks ã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„** ã¾ãŸã¯ **HackTricks ã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„å ´åˆã¯** [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚¹ã‚¦ã‚©ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f) ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass) ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/hacktricks_live) ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«PRã‚’** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ã¨** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æå‡ºã™ã‚‹**

</details>

## Apple Propietary File System (APFS)

**Apple File System (APFS)** ã¯ã€Hierarchical File System Plus (HFS+) ã‚’ç½®ãæ›ãˆã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸç¾ä»£çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ãã®é–‹ç™ºã¯ã€**æ”¹å–„ã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€åŠ¹ç‡æ€§**ã®å¿…è¦æ€§ã«ã‚ˆã£ã¦æ¨é€²ã•ã‚Œã¾ã—ãŸã€‚

APFSã®ã„ãã¤ã‹ã®æ³¨ç›®ã™ã¹ãæ©Ÿèƒ½ã«ã¯æ¬¡ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™:

1. **ã‚¹ãƒšãƒ¼ã‚¹å…±æœ‰**: APFSã¯ã€1ã¤ã®ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ä¸Šã§**è¤‡æ•°ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒåŒã˜åŸºç¤ã®ç©ºãã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å…±æœ‰**ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯æ‰‹å‹•ã§ãƒªã‚µã‚¤ã‚ºã‚„å†ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åŒ–ãŒå¿…è¦ãªãã€å‹•çš„ã«æˆé•·ãŠã‚ˆã³ç¸®å°ã§ãã‚‹ãŸã‚ã€åŠ¹ç‡çš„ãªã‚¹ãƒšãƒ¼ã‚¹åˆ©ç”¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚
1. ã“ã‚Œã¯ã€é€šå¸¸ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãŒãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯å†…ã®å›ºå®šã‚µã‚¤ã‚ºã‚’æŒã£ã¦ã„ãŸã®ã«å¯¾ã—ã¦ã€**APFSã§ã¯ç•°ãªã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ï¼ˆãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰ãŒã™ã¹ã¦ã®ãƒ‡ã‚£ã‚¹ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…±æœ‰**ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
2. **ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ**: APFSã¯ã€**ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ™‚é–“çµŒéã®ä¸€ç‚¹ã‚’ç¤ºã™** **èª­ã¿å–ã‚Šå°‚ç”¨**ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¯ã€è¿½åŠ ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’æœ€å°é™ã«æ¶ˆè²»ã—ã€è¿…é€Ÿã«ä½œæˆã¾ãŸã¯å…ƒã«æˆ»ã™ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€åŠ¹ç‡çš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
3. **ã‚¯ãƒ­ãƒ¼ãƒ³**: APFSã¯ã€å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨åŒã˜ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å…±æœ‰ã™ã‚‹**ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ä½œæˆ**ã§ãã¾ã™ã€‚ã“ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¤‡è£½ã›ãšã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚³ãƒ”ãƒ¼ã‚’åŠ¹ç‡çš„ã«ä½œæˆã§ãã¾ã™ã€‚
4. **æš—å·åŒ–**: APFSã¯ã€**ãƒ•ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯æš—å·åŒ–**ã ã‘ã§ãªãã€ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã®æš—å·åŒ–ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã§ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ã•ã¾ã–ã¾ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ãƒ‡ãƒ¼ã‚¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã¦ã„ã¾ã™ã€‚
5. **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ä¿è­·**: APFSã¯ã€**ã‚³ãƒ”ãƒ¼æ™‚ã«æ›¸ãè¾¼ã‚€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ•´åˆæ€§ã‚’ç¢ºä¿**ã—ã€çªç„¶ã®åœé›»ã‚„ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®å ´åˆã§ã‚‚ãƒ‡ãƒ¼ã‚¿ã®ç ´æã®ãƒªã‚¹ã‚¯ã‚’è»½æ¸›ã—ã¾ã™ã€‚

å…¨ä½“ã¨ã—ã¦ã€APFSã¯ã€Appleãƒ‡ãƒã‚¤ã‚¹å‘ã‘ã«ã‚ˆã‚Šç¾ä»£çš„ã§æŸ”è»Ÿã‹ã¤åŠ¹ç‡çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ä¿¡é ¼æ€§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å‘ä¸Šã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚
```bash
diskutil list # Get overview of the APFS volumes
```
## Firmlinks

`Data`ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯**`/System/Volumes/Data`**ã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ï¼ˆ`diskutil apfs list`ã§ç¢ºèªã§ãã¾ã™ï¼‰ã€‚

ãƒ•ã‚¡ãƒ¼ãƒ ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆã¯**`/usr/share/firmlinks`**ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ã‚Šã¾ã™ã€‚
```bash
cat /usr/share/firmlinks
/AppleInternal	AppleInternal
/Applications	Applications
/Library	Library
[...]
```
å·¦å´ã«ã¯**ã‚·ã‚¹ãƒ†ãƒ ãƒœãƒªãƒ¥ãƒ¼ãƒ **ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ãŒã‚ã‚Šã€å³å´ã«ã¯**ãƒ‡ãƒ¼ã‚¿ãƒœãƒªãƒ¥ãƒ¼ãƒ **ä¸Šã§ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€`/library` --> `/system/Volumes/data/library`
