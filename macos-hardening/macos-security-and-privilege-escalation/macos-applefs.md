# macOS AppleFS

<details>

<summary><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶ã«ã¯</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã™ã‚‹ã€‚

</details>

## Appleç‹¬è‡ªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (APFS)

APFSã€ã¾ãŸã¯Apple File Systemã¯ã€Apple Inc.ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚ŒãŸç¾ä»£çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§ã€**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€åŠ¹ç‡ã®å‘ä¸Š**ã«é‡ç‚¹ã‚’ç½®ã„ã¦ã€å¤ã„éšå±¤å‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ©ã‚¹(HFS+)ã‚’ç½®ãæ›ãˆã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸã€‚

APFSã®æ³¨ç›®ã™ã¹ãç‰¹å¾´ã«ã¯ä»¥ä¸‹ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™:

1. **ã‚¹ãƒšãƒ¼ã‚¹å…±æœ‰**: APFSã¯ã€å˜ä¸€ã®ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ä¸Šã®**åŒã˜åŸºç›¤ã¨ãªã‚‹ç©ºãå®¹é‡ã‚’è¤‡æ•°ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã§å…±æœ‰ã™ã‚‹**ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ‰‹å‹•ã§ã®ãƒªã‚µã‚¤ã‚ºã‚„å†ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ãªã—ã«ãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒå‹•çš„ã«æ‹¡å¤§ãƒ»ç¸®å°ã§ãã‚‹ãŸã‚ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªã‚¹ãƒšãƒ¼ã‚¹åˆ©ç”¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
1. ã“ã‚Œã¯ã€å¾“æ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¨æ¯”è¼ƒã—ã¦ã€**APFSã§ã¯ç•°ãªã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ï¼ˆãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰ãŒå…¨ã¦ã®ãƒ‡ã‚£ã‚¹ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…±æœ‰ã™ã‚‹**ã“ã¨ã‚’æ„å‘³ã—ã€é€šå¸¸ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯å›ºå®šã‚µã‚¤ã‚ºã‚’æŒã£ã¦ã„ã¾ã—ãŸã€‚
2. **ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ**: APFSã¯**ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®ä½œæˆ**ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ã“ã‚Œã¯**èª­ã¿å–ã‚Šå°‚ç”¨**ã®ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ™‚ç‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã™ã€‚ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¯ã€è¿½åŠ ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ã»ã¨ã‚“ã©æ¶ˆè²»ã›ãšã€è¿…é€Ÿã«ä½œæˆã¾ãŸã¯å¾©å…ƒã§ãã‚‹ãŸã‚ã€åŠ¹ç‡çš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ç°¡å˜ãªã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
3. **ã‚¯ãƒ­ãƒ¼ãƒ³**: APFSã¯ã€å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¾ã§ã€**åŒã˜ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å…±æœ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’ä½œæˆ**ã§ãã¾ã™ã€‚ã“ã®æ©Ÿèƒ½ã¯ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¤‡è£½ã™ã‚‹ã“ã¨ãªãã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚³ãƒ”ãƒ¼ã‚’åŠ¹ç‡çš„ã«ä½œæˆã™ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚
4. **æš—å·åŒ–**: APFSã¯**ãƒ•ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯æš—å·åŒ–**ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã«ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã¨ã¨ã‚‚ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã®æš—å·åŒ–ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã€ã•ã¾ã–ã¾ãªä½¿ç”¨çŠ¶æ³ã«ãŠã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã—ã¾ã™ã€‚
5. **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ä¿è­·**: APFSã¯ã€çªç„¶ã®é›»æºå–ªå¤±ã‚„ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®å ´åˆã§ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ•´åˆæ€§ã‚’ä¿è¨¼ã™ã‚‹**ã‚³ãƒ”ãƒ¼ãƒ»ã‚ªãƒ³ãƒ»ãƒ©ã‚¤ãƒˆã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ **ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®ç ´æãƒªã‚¹ã‚¯ã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚

å…¨ä½“ã¨ã—ã¦ã€APFSã¯Appleãƒ‡ãƒã‚¤ã‚¹ã«ã¨ã£ã¦ã‚ˆã‚Šç¾ä»£çš„ã§æŸ”è»Ÿã§åŠ¹ç‡çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ä¿¡é ¼æ€§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å‘ä¸Šã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚
```bash
diskutil list # Get overview of the APFS volumes
```
## ãƒ•ã‚¡ãƒ¼ãƒ ãƒªãƒ³ã‚¯

`Data` ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯ **`/System/Volumes/Data`** ã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã¾ã™ï¼ˆ`diskutil apfs list` ã§ç¢ºèªã§ãã¾ã™ï¼‰ã€‚

ãƒ•ã‚¡ãƒ¼ãƒ ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆã¯ **`/usr/share/firmlinks`** ãƒ•ã‚¡ã‚¤ãƒ«ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
cat /usr/share/firmlinks
/AppleInternal	AppleInternal
/Applications	Applications
/Library	Library
[...]
```
**å·¦**ã«ã¯**System volume**ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ãŒã‚ã‚Šã€**å³**ã«ã¯ãã‚ŒãŒ**Data volume**ä¸Šã§ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€`/library` --> `/system/Volumes/data/library`

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§ã®AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks) ãŠã‚ˆã³ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰ã™ã‚‹**ã€‚

</details>
