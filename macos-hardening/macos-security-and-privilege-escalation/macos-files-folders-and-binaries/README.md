# macOS ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ•ã‚©ãƒ«ãƒ€ã€ãƒã‚¤ãƒŠãƒªï¼†ãƒ¡ãƒ¢ãƒª

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ** HackTricksã§**ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

## ãƒ•ã‚¡ã‚¤ãƒ«éšå±¤ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

* **/Applications**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã¯ã“ã“ã«ã‚ã‚Šã¾ã™ã€‚ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
* **/bin**: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒã‚¤ãƒŠãƒª
* **/cores**: å­˜åœ¨ã™ã‚‹å ´åˆã€ã‚³ã‚¢ãƒ€ãƒ³ãƒ—ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™
* **/dev**: ã™ã¹ã¦ãŒãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ãŸã‚ã€ã“ã“ã«ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ‡ãƒã‚¤ã‚¹ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
* **/etc**: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
* **/Library**: å¥½ã¿ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€ãƒ­ã‚°ã«é–¢é€£ã™ã‚‹å¤šãã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒã“ã“ã«ã‚ã‚Šã¾ã™ã€‚ãƒ«ãƒ¼ãƒˆã¨å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«Libraryãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã—ã¾ã™ã€‚
* **/private**: æ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€å¤šãã®è¨€åŠã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã¯privateãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã§ã™ã€‚
* **/sbin**: ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ã«é–¢é€£ã™ã‚‹å¿…é ˆã®ã‚·ã‚¹ãƒ†ãƒ ãƒã‚¤ãƒŠãƒª
* **/System**: OS Xã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã€‚ã“ã“ã«ã¯ä¸»ã«Appleã®å›ºæœ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ï¼ˆã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
* **/tmp**: ãƒ•ã‚¡ã‚¤ãƒ«ã¯3æ—¥å¾Œã«å‰Šé™¤ã•ã‚Œã¾ã™ï¼ˆ/private/tmpã¸ã®ã‚½ãƒ•ãƒˆãƒªãƒ³ã‚¯ã§ã™ï¼‰
* **/Users**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚
* **/usr**: è¨­å®šã¨ã‚·ã‚¹ãƒ†ãƒ ãƒã‚¤ãƒŠãƒª
* **/var**: ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
* **/Volumes**: ãƒã‚¦ãƒ³ãƒˆã•ã‚ŒãŸãƒ‰ãƒ©ã‚¤ãƒ–ã¯ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
* **/.vol**: `stat a.txt`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`16777223 7545753 -rw-r--r-- 1 username wheel ...`ã®ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚æœ€åˆã®æ•°å€¤ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®IDç•ªå·ã§ã‚ã‚Šã€2ç•ªç›®ã®æ•°å€¤ã¯inodeç•ªå·ã§ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã«ã¯ã€ãã®æƒ…å ±ã‚’ä½¿ç”¨ã—ã¦`cat /.vol/16777223/7545753`ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ«ãƒ€

* **ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã¯`/System/Applications`ã«ã‚ã‚Šã¾ã™ã€‚
* **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸ**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯é€šå¸¸`/Applications`ã¾ãŸã¯`~/Applications`ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚
* **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿**ã¯ã€ãƒ«ãƒ¼ãƒˆã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã¯`/Library/Application Support`ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã¯`~/Library/Application Support`ã«ã‚ã‚Šã¾ã™ã€‚
* **ãƒ«ãƒ¼ãƒˆã¨ã—ã¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹**ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ãƒ‡ãƒ¼ãƒ¢ãƒ³**ã¯é€šå¸¸`/Library/PrivilegedHelperTools/`ã«ã‚ã‚Šã¾ã™ã€‚
* **ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–ã•ã‚ŒãŸ**ã‚¢ãƒ—ãƒªã¯`~/Library/Containers`ãƒ•ã‚©ãƒ«ãƒ€ã«ãƒãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚å„ã‚¢ãƒ—ãƒªã«ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒãƒ³ãƒ‰ãƒ«IDï¼ˆ`com.apple.Safari`ãªã©ï¼‰ã«åŸºã¥ã„ãŸåå‰ã®ãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã™ã€‚
* **ã‚«ãƒ¼ãƒãƒ«**ã¯`/System/Library/Kernels/kernel`ã«ã‚ã‚Šã¾ã™ã€‚
* **Appleã®ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µ**ã¯`/System/Library/Extensions`ã«ã‚ã‚Šã¾ã™ã€‚
* **ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µ**ã¯`/Library/Extensions`ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### æ©Ÿå¯†æƒ…å ±ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«

MacOSã¯ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã©ã®æƒ…å ±ã‚’ã„ãã¤ã‹ã®å ´æ‰€ã«ä¿å­˜ã—ã¾ã™ï¼š

{% content-ref url="macos-sensitive-locations.md" %}
[macos-sensitive-locations.md](macos-sensitive-locations.md)
{% endcontent-ref %}

### è„†å¼±ãªpkgã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©

{% content-ref url="macos-installers-abuse.md" %}
[macos-installers-abuse.md](macos-installers-abuse.md)
{% endcontent-ref %}

## OS Xå›ºæœ‰ã®æ‹¡å¼µå­

* **`.dmg`**: Appleãƒ‡ã‚£ã‚¹ã‚¯ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã«éå¸¸ã«é »ç¹ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
* **`.kext`**: ç‰¹å®šã®æ§‹é€ ã«å¾“ã†å¿…è¦ãŒã‚ã‚Šã€ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®OS Xãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ï¼ˆãƒãƒ³ãƒ‰ãƒ«ã§ã™ï¼‰ã€‚
* **`.plist`**: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒªã‚¹ãƒˆã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã€æƒ…å ±ã‚’XMLã¾ãŸã¯ãƒã‚¤ãƒŠãƒªå½¢å¼ã§ä¿å­˜ã—ã¾ã™ã€‚
* XMLã¾ãŸã¯ãƒã‚¤ãƒŠãƒªå½¢å¼ã«ãªã‚Šã¾ã™ã€‚ãƒã‚¤ãƒŠãƒªå½¢å¼ã®ã‚‚ã®ã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š
* `defaults read config.plist`
* `/usr/libexec/PlistBuddy -c print config.plsit`
* `plutil -p ~/Library/Preferences/com.apple.screensaver.plist`
* `plutil -convert xml1 ~/Library/Preferences/com.apple.screensaver.plist -o -`
* `plutil -convert json ~/Library/Preferences/com.apple.screensaver.plist -o -`
* **`.app`**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«å¾“ã†Appleã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ï¼ˆãƒãƒ³ãƒ‰ãƒ«ã§ã™ï¼‰ã€‚
* **`.dylib`**: å‹•çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆWindowsã®DLLãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ˆã†ãªã‚‚ã®ï¼‰
* **`.pkg`**: xarï¼ˆeXtensible Archiveå½¢å¼ï¼‰ã¨åŒã˜ã§ã™ã€‚installerã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚
* **`.DS_Store`**: ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚Šã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å±æ€§ã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ä¿å­˜ã—ã¾ã™ã€‚
* **`.Spotlight-V100`**: ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã¯ã‚·ã‚¹ãƒ†ãƒ ã®ã™ã¹ã¦ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
* **`.metadata_never_index`**: ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹å ´åˆã€Spotlightã¯ãã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã—ã¾ã›ã‚“ã€‚
* **`.noindex`**: ã“ã®æ‹¡å¼µå­ã‚’æŒã¤ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ•ã‚©ãƒ«ãƒ€ã¯Spotlightã«ã‚ˆã£ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã•ã‚Œã¾ã›ã‚“ã€‚
### macOSãƒãƒ³ãƒ‰ãƒ«

åŸºæœ¬çš„ã«ã€ãƒãƒ³ãƒ‰ãƒ«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å†…ã®**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ **ã§ã™ã€‚èˆˆå‘³æ·±ã„ã“ã¨ã«ã€ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§Finderã§**å˜ä¸€ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚ˆã†ã«è¦‹ãˆã¾ã™**ï¼ˆä¾‹ï¼š`.app`ï¼‰ã€‚

{% content-ref url="macos-bundles.md" %}
[macos-bundles.md](macos-bundles.md)
{% endcontent-ref %}

## Dyldå…±æœ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥

macOSï¼ˆãŠã‚ˆã³iOSï¼‰ã§ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„dylibãªã©ã®ã‚·ã‚¹ãƒ†ãƒ å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€**å˜ä¸€ã®ãƒ•ã‚¡ã‚¤ãƒ«**ã§ã‚ã‚‹dyldå…±æœ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«çµåˆã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ã®èª­ã¿è¾¼ã¿ãŒé«˜é€ŸåŒ–ã•ã‚Œã¾ã™ã€‚

dyldå…±æœ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨åŒæ§˜ã«ã€ã‚«ãƒ¼ãƒãƒ«ã¨ã‚«ãƒ¼ãƒãƒ«æ‹¡å¼µã‚‚ã‚«ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€èµ·å‹•æ™‚ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

å˜ä¸€ã®ãƒ•ã‚¡ã‚¤ãƒ«dylibå…±æœ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã«ã€ãƒã‚¤ãƒŠãƒªã®[dyld\_shared\_cache\_util](https://www.mbsplugins.de/files/dyld\_shared\_cache\_util-dyld-733.8.zip)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸãŒã€ç¾åœ¨ã¯å‹•ä½œã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

{% code overflow="wrap" %}
```bash
dyld_shared_cache_util -extract ~/shared_cache/ /System/Volumes/Preboot/Cryptexes/OS/System/Library/dyld/dyld_shared_cache_arm64e
```
{% endcode %}

## ç‰¹æ®Šãªãƒ•ã‚¡ã‚¤ãƒ«ã®æ¨©é™

### ãƒ•ã‚©ãƒ«ãƒ€ã®æ¨©é™

**ãƒ•ã‚©ãƒ«ãƒ€**ã§ã¯ã€**èª­ã¿å–ã‚Š**ã¯**ãƒªã‚¹ãƒˆè¡¨ç¤º**ã‚’è¨±å¯ã—ã€**æ›¸ãè¾¼ã¿**ã¯**ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤**ã¨**æ›¸ãè¾¼ã¿**ã‚’è¨±å¯ã—ã€**å®Ÿè¡Œ**ã¯**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç§»å‹•**ã‚’è¨±å¯ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ä¾‹ãˆã°ã€**ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®èª­ã¿å–ã‚Šæ¨©é™**ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€**å®Ÿè¡Œæ¨©é™ãŒãªã„**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’**èª­ã¿å–ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“**ã€‚

### ãƒ•ãƒ©ã‚°ã®ä¿®é£¾å­

ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã§ãã‚‹ã„ãã¤ã‹ã®ãƒ•ãƒ©ã‚°ãŒã‚ã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å‹•ä½œã‚’ç•°ãªã‚‹ã‚‚ã®ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`ls -lO /path/directory`ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ãƒ©ã‚°ã‚’**ãƒã‚§ãƒƒã‚¯**ã§ãã¾ã™ã€‚

* **`uchg`**: **uchange**ãƒ•ãƒ©ã‚°ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã€**ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚„å‰Šé™¤ã‚’é˜²ãã¾ã™**ã€‚è¨­å®šã™ã‚‹ã«ã¯ã€`chflags uchg file.txt`ã¨å…¥åŠ›ã—ã¾ã™ã€‚
* ãƒ«ãƒ¼ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ•ãƒ©ã‚°ã‚’**å‰Šé™¤**ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚
* **`restricted`**: ã“ã®ãƒ•ãƒ©ã‚°ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’**SIPã§ä¿è­·**ã—ã¾ã™ï¼ˆã“ã®ãƒ•ãƒ©ã‚°ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼‰ã€‚
* **`Sticky bit`**: ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ãƒ“ãƒƒãƒˆãŒè¨­å®šã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ‰€æœ‰è€…ã¾ãŸã¯ãƒ«ãƒ¼ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ãŒãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’å¤‰æ›´ã¾ãŸã¯å‰Šé™¤**ã§ãã¾ã™ã€‚é€šå¸¸ã€ã“ã‚Œã¯/tmpãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­å®šã•ã‚Œã€ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã¾ãŸã¯ç§»å‹•ã§ããªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

### **ãƒ•ã‚¡ã‚¤ãƒ«ACL**

ãƒ•ã‚¡ã‚¤ãƒ«ã®**ACLï¼ˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚¨ãƒ³ãƒˆãƒªï¼‰**ã«ã¯ã€ç•°ãªã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚ˆã‚Š**ç´°ã‹ã„æ¨©é™**ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹**ACEï¼ˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚¨ãƒ³ãƒˆãƒªï¼‰**ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**ã«ã¯ã€æ¬¡ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š`list`ã€`search`ã€`add_file`ã€`add_subdirectory`ã€`delete_child`ã€`delete_child`ã€‚\
**ãƒ•ã‚¡ã‚¤ãƒ«**ã«ã¯ã€æ¬¡ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š`read`ã€`write`ã€`append`ã€`execute`ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«ã«ACLãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤ºã™ã‚‹éš›ã«**"+"ãŒè¡¨ç¤ºã•ã‚Œã¾ã™**ã€‚
```bash
ls -ld Movies
drwx------+   7 username  staff     224 15 Apr 19:42 Movies
```
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®ACLã‚’èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ï¼š
```bash
ls -lde Movies
drwx------+ 7 username  staff  224 15 Apr 19:42 Movies
0: group:everyone deny delete
```
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€**ACLã‚’æŒã¤ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«**ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆã“ã‚Œã¯éå¸¸ã«é…ã„ã§ã™ï¼‰:

```bash
find / -type f -exec ls -le {} \; 2>/dev/null
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ACLã‚’æŒã¤ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢ã—ã€ãã‚Œãã‚Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ACLæƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ãŸã ã—ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯éå¸¸ã«æ™‚é–“ãŒã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
```bash
ls -RAle / 2>/dev/null | grep -E -B1 "\d: "
```
### ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚©ãƒ¼ã‚¯ | macOS ADS

ã“ã‚Œã¯ã€**macOSãƒã‚·ãƒ³ã§ã®ä»£æ›¿ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ **ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã§ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’**file/..namedfork/rsrc**ã«ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€**com.apple.ResourceFork**ã¨ã„ã†æ‹¡å¼µå±æ€§å†…ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
echo "Hello" > a.txt
echo "Hello Mac ADS" > a.txt/..namedfork/rsrc

xattr -l a.txt #Read extended attributes
com.apple.ResourceFork: Hello Mac ADS

ls -l a.txt #The file length is still q
-rw-r--r--@ 1 username  wheel  6 17 Jul 01:15 a.txt
```
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã“ã®æ‹¡å¼µå±æ€§ã‚’æŒã¤ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

{% code overflow="wrap" %}
```bash
find / -type f -exec ls -ld {} \; 2>/dev/null | grep -E "[x\-]@ " | awk '{printf $9; printf "\n"}' | xargs -I {} xattr -lv {} | grep "com.apple.ResourceFork"
```
{% endcode %}

## **ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒã‚¤ãƒŠãƒªã¨**Mach-oãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

Mac OSã®ãƒã‚¤ãƒŠãƒªã¯é€šå¸¸ã€**ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒã‚¤ãƒŠãƒª**ã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã¾ã™ã€‚**ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒã‚¤ãƒŠãƒª**ã¯ã€**åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§è¤‡æ•°ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ã‚µãƒãƒ¼ãƒˆ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

{% content-ref url="universal-binaries-and-mach-o-format.md" %}
[universal-binaries-and-mach-o-format.md](universal-binaries-and-mach-o-format.md)
{% endcontent-ref %}

## macOSãƒ¡ãƒ¢ãƒªãƒ€ãƒ³ãƒ—

{% content-ref url="macos-memory-dumping.md" %}
[macos-memory-dumping.md](macos-memory-dumping.md)
{% endcontent-ref %}

## ãƒªã‚¹ã‚¯ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚¡ã‚¤ãƒ« Mac OS

ãƒ•ã‚¡ã‚¤ãƒ« `/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/System` ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ã«å¿œã˜ãŸãƒªã‚¹ã‚¯ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

å¯èƒ½ãªã‚«ãƒ†ã‚´ãƒªã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

* **LSRiskCategorySafe**ï¼š**å®Œå…¨ã«å®‰å…¨**ï¼›ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¾Œã«SafariãŒè‡ªå‹•çš„ã«é–‹ã
* **LSRiskCategoryNeutral**ï¼šè­¦å‘Šã¯ãªã„ãŒã€**è‡ªå‹•çš„ã«é–‹ã‹ã‚Œãªã„**
* **LSRiskCategoryUnsafeExecutable**ï¼šã€Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™...ã€ã¨ã„ã†**è­¦å‘Šã‚’ãƒˆãƒªã‚¬ãƒ¼**ã™ã‚‹
* **LSRiskCategoryMayContainUnsafeExecutable**ï¼šå®Ÿè¡Œå¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãªã©ã«å¯¾ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚SafariãŒã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå®‰å…¨ã¾ãŸã¯ä¸­ç«‹ã§ã‚ã‚‹ã“ã¨ã‚’åˆ¤æ–­ã§ããªã„å ´åˆã€**è­¦å‘Šã‚’ãƒˆãƒªã‚¬ãƒ¼**ã—ã¾ã™ã€‚

## ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

* **`$HOME/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV2`**ï¼šãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã™ã‚‹æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å…ƒã®URLãªã©ã€‚
* **`/var/log/system.log`**ï¼šOSXã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ã€‚sysloggingã®å®Ÿè¡Œã¯com.apple.syslogd.plistãŒæ‹…å½“ã—ã¦ã„ã¾ã™ï¼ˆ`launchctl list`ã§ã€Œcom.apple.syslogdã€ã‚’æ¤œç´¢ã—ã¦ç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã§ãã¾ã™ï¼‰ã€‚
* **`/private/var/log/asl/*.asl`**ï¼šèˆˆå‘³æ·±ã„æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹Apple System Logsã§ã™ã€‚
* **`$HOME/Library/Preferences/com.apple.recentitems.plist`**ï¼šã€ŒFinderã€ã‚’ä»‹ã—ã¦æœ€è¿‘ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿å­˜ã—ã¾ã™ã€‚
* **`$HOME/Library/Preferences/com.apple.loginitems.plsit`**ï¼šã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ™‚ã«èµ·å‹•ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¿å­˜ã—ã¾ã™ã€‚
* **`$HOME/Library/Logs/DiskUtility.log`**ï¼šDiskUtilityã‚¢ãƒ—ãƒªã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ‰ãƒ©ã‚¤ãƒ–ã«é–¢ã™ã‚‹æƒ…å ±ã€USBã‚’å«ã‚€ï¼‰ã€‚
* **`/Library/Preferences/SystemConfiguration/com.apple.airport.preferences.plist`**ï¼šãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã€‚
* **`/private/var/db/launchd.db/com.apple.launchd/overrides.plist`**ï¼šç„¡åŠ¹åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ãƒ¢ãƒ³ã®ãƒªã‚¹ãƒˆã€‚

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ** HackTricksã§**ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„HackTricksã®PDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
