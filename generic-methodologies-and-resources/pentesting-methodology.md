# Metodolog칤a de Pentesting

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Red Team de HackTricks para AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../.gitbook/assets/i3.png" alt=""><figcaption></figcaption></figure>

\
**Consejo para cazar bugs**: **reg칤strate** en **Intigriti**, una plataforma premium de **caza de bugs creada por hackers, para hackers**. 칔nete a nosotros en [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoy y comienza a ganar recompensas de hasta **$100,000**.

{% embed url="https://go.intigriti.com/hacktricks" %}

## Metodolog칤a de Pentesting

<figure><img src="../.gitbook/assets/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Logos de Hacktricks dise침ados por_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_._

### 0- Ataques F칤sicos

쯊ienes **acceso f칤sico** a la m치quina que quieres atacar? Deber칤as leer algunos [**trucos sobre ataques f칤sicos**](../physical-attacks/physical-attacks.md) y otros sobre [**escapar de aplicaciones GUI**](../physical-attacks/escaping-from-gui-applications/).

### 1 - [Descubriendo hosts dentro de la red](pentesting-network/#discovering-hosts) / [Descubriendo activos de la empresa](external-recon-methodology/)

**Dependiendo** de si el **test** que est치s realizando es un **test interno o externo**, podr칤as estar interesado en encontrar **hosts dentro de la red de la empresa** (test interno) o **encontrar activos de la empresa en internet** (test externo).

{% hint style="info" %}
Ten en cuenta que si est치s realizando un test externo, una vez que logres obtener acceso a la red interna de la empresa deber칤as reiniciar esta gu칤a.
{% endhint %}

### **2-** [**Divirti칠ndote con la red**](pentesting-network/) **(Interno)**

**Esta secci칩n solo aplica si est치s realizando un test interno.**\
Antes de atacar un host, quiz치s prefieras **robar algunas credenciales** **de la red** o **interceptar** algunos **datos** para aprender **pasiva/activamente (MitM)** qu칠 puedes encontrar dentro de la red. Puedes leer [**Pentesting de Red**](pentesting-network/#sniffing).

### 3- [Escaneo de Puertos - Descubrimiento de Servicios](pentesting-network/#scanning-hosts)

Lo primero que debes hacer al **buscar vulnerabilidades en un host** es saber qu칠 **servicios est치n corriendo** en qu칠 puertos. Veamos las [**herramientas b치sicas para escanear puertos de hosts**](pentesting-network/#scanning-hosts).

### **4-** [Buscando exploits de versiones de servicios](search-exploits.md)

Una vez que sabes qu칠 servicios est치n corriendo, y quiz치s sus versiones, tienes que **buscar vulnerabilidades conocidas**. Quiz치s tengas suerte y haya un exploit que te d칠 una shell...

### **5-** Pentesting de Servicios

Si no hay ning칰n exploit interesante para alg칰n servicio en ejecuci칩n, deber칤as buscar **configuraciones err칩neas comunes en cada servicio en funcionamiento.**

**Dentro de este libro encontrar치s una gu칤a para hacer pentesting a los servicios m치s comunes** (y otros que no lo son tanto)**. Por favor, busca en el 칤ndice izquierdo la secci칩n de** _**PENTESTING**_ (los servicios est치n ordenados por sus puertos por defecto).

**Quiero hacer una menci칩n especial a la parte de** [**Pentesting Web**](../network-services-pentesting/pentesting-web/) **(ya que es la m치s extensa).**\
Adem치s, aqu칤 puedes encontrar una peque침a gu칤a sobre c칩mo [**encontrar vulnerabilidades conocidas en software**](search-exploits.md).

**Si tu servicio no est치 en el 칤ndice, busca en Google** otros tutoriales y **h치zmelo saber si quieres que lo a침ada.** Si **no encuentras nada** en Google, realiza tu **propio pentesting a ciegas**, podr칤as empezar por **conectarte al servicio, hacer fuzzing y leer las respuestas** (si las hay).

#### 5.1 Herramientas Autom치ticas

Tambi칠n hay varias herramientas que pueden realizar **evaluaciones autom치ticas de vulnerabilidades**. **Te recomendar칤a que probaras** [**Legion**](https://github.com/carlospolop/legion)**, que es la herramienta que he creado y est치 basada en las notas sobre pentesting de servicios que puedes encontrar en este libro.**

#### **5.2 Fuerza Bruta en servicios**

En algunos escenarios, una **Fuerza Bruta** podr칤a ser 칰til para **comprometer** un **servicio**. [**Encuentra aqu칤 una CheatSheet de diferentes servicios de fuerza bruta**](brute-force.md)**.**

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**Consejo para cazar bugs**: **reg칤strate** en **Intigriti**, una plataforma premium de **caza de bugs creada por hackers, para hackers**. 칔nete a nosotros en [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoy y comienza a ganar recompensas de hasta **$100,000**.\\

{% embed url="https://go.intigriti.com/hacktricks" %}

### 6- [Phishing](phishing-methodology/)

Si en este punto no has encontrado ninguna vulnerabilidad interesante, **puede que necesites intentar hacer phishing** para entrar en la red. Puedes leer mi metodolog칤a de phishing [aqu칤](phishing-methodology/):

### **7-** [**Obteniendo Shell**](shells/)

De alguna manera deber칤as haber encontrado **alguna forma de ejecutar c칩digo** en la v칤ctima. Entonces, [una lista de posibles herramientas dentro del sistema que puedes usar para obtener una reverse shell ser칤a muy 칰til](shells/).

Especialmente en Windows podr칤as necesitar ayuda para **evitar antivirus**: [**Consulta esta p치gina**](../windows-hardening/av-bypass.md)**.**\\

### 8- Dentro

Si tienes problemas con la shell, aqu칤 puedes encontrar una peque침a **compilaci칩n de los comandos m치s 칰tiles** para pentesters:

* [**Linux**](../linux-hardening/useful-linux-commands/)
* [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
* [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**Exfiltraci칩n**](exfiltration.md)

Probablemente necesitar치s **extraer algunos datos de la v칤ctima** o incluso **introducir algo** (como scripts de escalada de privilegios). **Aqu칤 tienes un** [**post sobre herramientas comunes que puedes usar con estos prop칩sitos**](exfiltration.md)**.**

### **10- Escalada de Privilegios**

#### **10.1- Escalada de Privilegios Local**

Si **no eres root/Administrador** dentro de la caja, deber칤as encontrar una manera de **escalar privilegios.**\
Aqu칤 puedes encontrar una **gu칤a para escalar privilegios localmente en** [**Linux**](../linux-hardening/privilege-escalation/) **y en** [**Windows**](../windows-hardening/windows-local-privilege-escalation/)**.**\
Tambi칠n deber칤as revisar estas p치ginas sobre c칩mo funciona **Windows**:

* [**Autenticaci칩n, Credenciales, Privilegios de Token y UAC**](../windows-hardening/authentication-credentials-uac-and-efs.md)
* C칩mo funciona [**NTLM**](../windows-hardening/ntlm/)
* C칩mo [**robar credenciales**](broken-reference/) en Windows
* Algunos trucos sobre [_**Active Directory**_](../windows-hardening/active-directory-methodology/)

**No olvides revisar las mejores herramientas para enumerar caminos de Escalada de Privilegios locales en Windows y Linux:** [**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- Escalada de Privilegios de Dominio**

Aqu칤 puedes encontrar una [**metodolog칤a que explica las acciones m치s comunes para enumerar, escalar privilegios y persistir en un Active Directory**](../windows-hardening/active-directory-methodology/). Aunque esto es solo una subsecci칩n de una secci칩n, este proceso podr칤a ser **extremadamente delicado** en una asignaci칩n de Pentesting/Red Team.

### 11 - POST

#### **11**.1 - Saqueo

Comprueba si puedes encontrar m치s **contrase침as** dentro del host o si tienes **acceso a otras m치quinas** con los **privilegios** de tu **usuario**.\
Encuentra aqu칤 diferentes maneras de [**volcar contrase침as en Windows**](broken-reference/).

#### 11.2 - Persistencia

**Usa 2 o 3 diferentes tipos de mecanismos de persistencia para que no necesites explotar el sistema de nuevo.**\
**Aqu칤 puedes encontrar algunos** [**trucos de persistencia en active directory**](../windows-hardening/active-directory-methodology/#persistence)**.**

TODO: Completar post de Persistencia en Windows & Linux&#x20;

### 12 - Pivoteo

Con las **credenciales recopiladas** podr칤as tener acceso a otras m치quinas, o quiz치s necesites **descubrir y escanear nuevos hosts** (comenzar la Metodolog칤a de Pentesting de nuevo) dentro de nuevas redes donde tu v칤ctima est치 conectada.\
En este caso, el t칰nel podr칤a ser necesario. Aqu칤 puedes encontrar [**un post hablando sobre t칰neles**](tunneling-and-port-forwarding.md).\
Definitivamente tambi칠n deber칤as revisar el post sobre [Metodolog칤a de pentesting de Active Directory](../windows-hardening/active-directory-methodology/). All칤 encontrar치s trucos geniales para moverte lateralmente, escalar privilegios y volcar credenciales.\
Revisa tambi칠n la p치gina sobre [**NTLM**](../windows-hardening/ntlm/), podr칤a ser muy 칰til para pivotar en entornos Windows.

### M츼S

#### [Aplicaciones Android](../mobile-pentesting/android-app-pentesting/)

#### **Explotaci칩n**

* [**Explotaci칩n B치sica en Linux**](../exploiting/linux-exploiting-basic-esp/)
* [**Explotaci칩n B치sica en Windows**](../exploiting/windows-exploiting-basic-guide-oscp-lvl.md)
* [**Herramientas b치sicas de explotaci칩n**](../exploiting/tools/)

#### [**Python B치sico**](python/)

#### **Trucos de Criptograf칤a**

* [**ECB**](../cryptography/electronic-code-book-ecb.md)
* [**CBC-MAC**](../cryptography/cipher-block-chaining-cbc-mac-priv.md)
* [**Padding Oracle**](../cryptography/padding-oracle-priv.md)

<img src="../.gitbook/assets/i3.png" alt="" data-size="original">\
**Consejo para cazar bugs**: **reg칤strate** en **Intigriti**, una plataforma premium de **caza de bugs creada por hackers, para hackers**. 칔nete a nosotros en [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) hoy y comienza a ganar recompensas de hasta **$100,000**.

{% embed url="https://go.intigriti.com/hacktricks" %}

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Red Team de HackTricks para AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
