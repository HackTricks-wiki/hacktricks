# Chrome Cache to XSS

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Â¿Trabajas en una **empresa de ciberseguridad**? Â¿Quieres ver tu **empresa anunciada en HackTricks**? Â¿O quieres tener acceso a la **Ãºltima versiÃ³n de PEASS o descargar HackTricks en PDF**? Â¡Consulta los [**PLANES DE SUSCRIPCIÃ“N**](https://github.com/sponsors/carlospolop)!
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecciÃ³n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* ObtÃ©n la [**ropa oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* **Ãšnete al** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sÃ­gueme en** **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

MÃ¡s detalles en [**este informe**](https://blog.arkark.dev/2022/11/18/seccon-en/#web-spanote).

La tÃ©cnica discutida aquÃ­ implica comprender el comportamiento y la interacciÃ³n de dos tipos de cachÃ© principales: la **cachÃ© de retroceso/avance (bfcache)** y la **cachÃ© de disco**. El bfcache, que almacena una instantÃ¡nea completa de una pÃ¡gina incluyendo el montÃ³n de JavaScript, tiene prioridad sobre la cachÃ© de disco para las navegaciones de retroceso/avance debido a su capacidad para almacenar una instantÃ¡nea mÃ¡s completa. La cachÃ© de disco, en contraste, almacena recursos obtenidos de la web sin incluir el montÃ³n de JavaScript, y se utiliza para las navegaciones de retroceso/avance para reducir los costos de comunicaciÃ³n. Un aspecto interesante de la cachÃ© de disco es su inclusiÃ³n de recursos obtenidos usando `fetch`, lo que significa que los recursos de URL accedidos serÃ¡n renderizados por el navegador desde la cachÃ©.

### Puntos Clave:

- El **bfcache** tiene precedencia sobre la cachÃ© de disco en las navegaciones de retroceso/avance.
- Para utilizar una pÃ¡gina almacenada en la cachÃ© de disco en lugar del bfcache, este Ãºltimo debe estar deshabilitado.

### Deshabilitar bfcache:

Por defecto, Puppeteer deshabilita el bfcache, alineÃ¡ndose con las condiciones enumeradas en la documentaciÃ³n de Chromium. Un mÃ©todo efectivo para deshabilitar el bfcache es a travÃ©s del uso de `RelatedActiveContentsExist`, logrado abriendo una pÃ¡gina con `window.open()` que retiene una referencia a `window.opener`.

### Reproducir el comportamiento:

1. Visita una pÃ¡gina web, por ejemplo, `https://example.com`.
2. Ejecuta `open("http://spanote.seccon.games:3000/api/token")`, lo que resulta en una respuesta del servidor con un cÃ³digo de estado 500.
3. En la pestaÃ±a reciÃ©n abierta, navega a `http://spanote.seccon.games:3000/`. Esta acciÃ³n almacena la respuesta de `http://spanote.seccon.games:3000/api/token` como una cachÃ© de disco.
4. Usa `history.back()` para retroceder. La acciÃ³n resulta en la renderizaciÃ³n de la respuesta JSON en cachÃ© en la pÃ¡gina.

La confirmaciÃ³n de que se utilizÃ³ la cachÃ© de disco se puede verificar mediante el uso de DevTools en Google Chrome.

Para mÃ¡s detalles sobre bfcache y cachÃ© de disco, se pueden encontrar referencias en [web.dev sobre bfcache](https://web.dev/i18n/en/bfcache/) y en [los documentos de diseÃ±o de Chromium sobre cachÃ© de disco](https://www.chromium.org/developers/design-documents/network-stack/disk-cache/), respectivamente.


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* Â¿Trabajas en una **empresa de ciberseguridad**? Â¿Quieres ver tu **empresa anunciada en HackTricks**? Â¿O quieres tener acceso a la **Ãºltima versiÃ³n de PEASS o descargar HackTricks en PDF**? Â¡Consulta los [**PLANES DE SUSCRIPCIÃ“N**](https://github.com/sponsors/carlospolop)!
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecciÃ³n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* ObtÃ©n la [**ropa oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* **Ãšnete al** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sÃ­gueme en** **Twitter** ğŸ¦[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
