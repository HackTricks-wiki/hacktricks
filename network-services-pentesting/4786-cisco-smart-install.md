# 4786 - Cisco Smart Install

<details>

<summary><strong>Aprende a hackear AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipos Rojos de AWS de HackTricks)</strong></a><strong>!</strong></summary>

* 쯊rabajas en una **empresa de ciberseguridad**? 쯈uieres ver tu **empresa anunciada en HackTricks**? 쯆 quieres tener acceso a la **칰ltima versi칩n del PEASS o descargar HackTricks en PDF**? 춰Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt칠n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* **칔nete al** [**游눫**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="/.gitbook/assets/WebSec_1500x400_10fps_21sn_lightoptimized_v2.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}


## Informaci칩n B치sica

**Cisco Smart Install** es un dise침o de Cisco para automatizar la configuraci칩n inicial y la carga de una imagen del sistema operativo para nuevo hardware de Cisco. **De forma predeterminada, Cisco Smart Install est치 activo en el hardware de Cisco y utiliza el protocolo de capa de transporte, TCP, con el n칰mero de puerto 4786.**

**Puerto predeterminado:** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **Herramienta de Explotaci칩n de Smart Install**

**En 2018, se encontr칩 una vulnerabilidad cr칤tica, CVE-2018-0171, en este protocolo. El nivel de amenaza es de 9.8 en la escala CVSS.**

**Un paquete especialmente dise침ado enviado al puerto TCP/4786, donde est치 activo el Cisco Smart Install, desencadena un desbordamiento de b칰fer, lo que permite a un atacante:**

* reiniciar forzosamente el dispositivo
* llamar a RCE
* robar configuraciones de equipos de red.

**El** [**SIET**](https://github.com/frostbits-security/SIET) **(Herramienta de Explotaci칩n de Smart Install)** fue desarrollado para explotar esta vulnerabilidad, lo que te permite abusar de Cisco Smart Install. En este art칤culo te mostrar칠 c칩mo puedes leer un archivo de configuraci칩n leg칤timo de hardware de red. La configuraci칩n de exfiltraci칩n puede ser valiosa para un pentester porque aprender치 sobre las caracter칤sticas 칰nicas de la red. Y esto facilitar치 la vida y permitir치 encontrar nuevos vectores para un ataque.

**El dispositivo objetivo ser치 un switch Cisco Catalyst 2960 "en vivo". Las im치genes virtuales no tienen Cisco Smart Install, por lo que solo puedes practicar en el hardware real.**

La direcci칩n del switch objetivo es **10.10.100.10 y CSI est치 activo.** Carga SIET y comienza el ataque. **El argumento -g** significa exfiltraci칩n de la configuraci칩n del dispositivo, **el argumento -i** te permite establecer la direcci칩n IP del objetivo vulnerable.
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../.gitbook/assets/image (770).png" alt=""><figcaption></figcaption></figure>

La configuraci칩n del switch **10.10.100.10** estar치 en la carpeta **tftp/**

<figure><img src="../.gitbook/assets/image (1113).png" alt=""><figcaption></figcaption></figure>


<figure><img src="/.gitbook/assets/WebSec_1500x400_10fps_21sn_lightoptimized_v2.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

<details>

<summary><strong>Aprende hacking en AWS de cero a h칠roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* 쯊rabajas en una **empresa de ciberseguridad**? 쯈uieres ver tu **empresa anunciada en HackTricks**? 쯆 quieres tener acceso a la **칰ltima versi칩n del PEASS o descargar HackTricks en PDF**? 춰Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* Obt칠n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **칔nete al** [**游눫**](https://emojipedia.org/speech-balloon/) [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤gueme** en **Twitter** 游냕[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Comparte tus trucos de hacking enviando PRs al** [**repositorio de hacktricks**](https://github.com/carlospolop/hacktricks) **y al** [**repositorio de hacktricks-cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
