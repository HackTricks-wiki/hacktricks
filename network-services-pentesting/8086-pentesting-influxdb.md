# 8086 - Pentesting InfluxDB

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Utiliza [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) para construir y **automatizar flujos de trabajo** f谩cilmente con las herramientas comunitarias **m谩s avanzadas** del mundo.\
Obt茅n Acceso Hoy:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><strong>Aprende hacking de AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sigue** a **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Informaci贸n B谩sica

**InfluxDB** es una **base de datos de series temporales** (TSDB) de c贸digo abierto desarrollada por la empresa InfluxData.

Una **base de datos de series temporales (TSDB)** es un sistema de software que est谩 optimizado para almacenar y **servir series temporales** a trav茅s de pares asociados de tiempo(s) y valor(es).

Los conjuntos de datos de series temporales son **relativamente grandes y uniformes en comparaci贸n con otros conjuntos de datos**generalmente compuestos por una marca de tiempo y datos asociados. Los conjuntos de datos de series temporales tambi茅n pueden tener menos relaciones entre entradas de datos en diferentes tablas y no requieren almacenamiento indefinido de entradas. Las propiedades 煤nicas de los conjuntos de datos de series temporales significan que las bases de datos de series temporales pueden proporcionar **mejoras significativas en espacio de almacenamiento y rendimiento sobre las bases de datos de prop贸sito general**. Por ejemplo, debido a la uniformidad de los datos de series temporales, **algoritmos de compresi贸n especializados** pueden ofrecer mejoras sobre los algoritmos de compresi贸n regulares dise帽ados para trabajar con datos menos uniformes. Las bases de datos de series temporales tambi茅n pueden ser **configuradas para eliminar regularmente datos antiguos**, a diferencia de las bases de datos regulares que est谩n dise帽adas para almacenar datos indefinidamente. ndices de base de datos especiales tambi茅n pueden proporcionar aumentos en el rendimiento de consultas. (De [aqu铆](https://en.wikipedia.org/wiki/Time\_series\_database)).

**Puerto predeterminado**: 8086
```
PORT     STATE SERVICE VERSION
8086/tcp open  http    InfluxDB http admin 1.7.5
```
## Enumeraci贸n

Desde el punto de vista de un pentester, esta es otra base de datos que podr铆a estar almacenando informaci贸n sensible, por lo que es interesante saber c贸mo volcar toda la informaci贸n.

### Autenticaci贸n

InfluxDB podr铆a requerir autenticaci贸n o no
```bash
# Try unauthenticated
influx -host 'host name' -port 'port #'
> use _internal
```
Si **recibes un error como** este: `ERR: unable to parse authentication credentials` significa que **espera algunas credenciales**.
```
influx username influx password influx_pass
```
### Enumeraci贸n Manual

La informaci贸n de este ejemplo se tom贸 de [**aqu铆**](https://oznetnerd.com/2017/06/11/getting-know-influxdb/).

#### Mostrar bases de datos

Las bases de datos encontradas son _telegraf_ y _\_internal_ (esta 煤ltima se encuentra en todas partes)
```bash
> show databases
name: databases
name
----
telegraf
_internal
```
#### Mostrar tablas/mediciones

Como explica la [**documentaci贸n de InfluxDB**](https://docs.influxdata.com/influxdb/v1.2/introduction/getting_started/), las **mediciones** SQL pueden considerarse como tablas SQL. Como sugieren los nombres de las **mediciones** anteriores, cada una contiene informaci贸n que pertenece a una entidad espec铆fica.
```bash
> show measurements
name: measurements
name
----
cpu
disk
diskio
kernel
mem
processes
swap
system
```
#### Mostrar columnas/claves de campo

Las claves de campo son como las **columnas** de la base de datos.
```bash
> show field keys
name: cpu
fieldKey         fieldType
--------         ---------
usage_guest      float
usage_guest_nice float
usage_idle       float
usage_iowait     float

name: disk
fieldKey     fieldType
--------     ---------
free         integer
inodes_free  integer
inodes_total integer
inodes_used  integer

[ ... more keys ...]
```
#### Volcar Tabla

Y finalmente puedes **volcar la tabla** haciendo algo como
```bash
select * from cpu
name: cpu
time                cpu       host   usage_guest usage_guest_nice usage_idle        usage_iowait        usage_irq usage_nice usage_softirq        usage_steal usage_system        usage_user
----                ---       ----   ----------- ---------------- ----------        ------------        --------- ---------- -------------        ----------- ------------        ----------
1497018760000000000 cpu-total ubuntu 0           0                99.297893681046   0                   0         0          0                    0           0.35105315947842414 0.35105315947842414
1497018760000000000 cpu1      ubuntu 0           0                99.69909729188728 0                   0         0          0                    0           0.20060180541622202 0.10030090270811101
```
{% hint style="warning" %}
En algunas pruebas con el bypass de autenticaci贸n, se observ贸 que el nombre de la tabla necesitaba estar entre comillas dobles, como en: `select * from "cpu"`
{% endhint %}

### Autenticaci贸n Automatizada
```bash
msf6 > use auxiliary/scanner/http/influxdb_enum
```
<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **nete al grupo de**  [**Discord**](https://discord.gg/hRep4RUj7f) o al grupo de [**telegram**](https://t.me/peass) o **sigue** a **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

\
Usa [**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks) para construir y **automatizar flujos de trabajo** f谩cilmente, potenciados por las herramientas comunitarias **m谩s avanzadas**.\
Obt茅n Acceso Hoy:

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}
