# 53 - DNSã®ãƒšãƒ³ãƒ†ã‚¹ãƒˆ

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

<figure><img src="../.gitbook/assets/image (1) (1) (2) (4).png" alt=""><figcaption></figcaption></figure>

[**DragonJAR Security Conference es un evento internacional de ciberseguridad**](https://www.dragonjarcon.org/) con mÃ¡s de una dÃ©cada que se celebrarÃ¡ el 7 y 8 de septiembre de 2023 en BogotÃ¡, Colombia. Es un evento de gran contenido tÃ©cnico donde se presentan las Ãºltimas investigaciones en espaÃ±ol que atrae a hackers e investigadores de todo el mundo.\
Â¡RegÃ­strate ahora en el siguiente enlace y no te pierdas esta gran conferencia!:

{% embed url="https://www.dragonjarcon.org/" %}

## **åŸºæœ¬æƒ…å ±**

ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ï¼ˆDNSï¼‰ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®é›»è©±å¸³ã§ã™ã€‚äººé–“ã¯nytimes.comã‚„espn.comã®ã‚ˆã†ãªãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’é€šã˜ã¦ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚Webãƒ–ãƒ©ã‚¦ã‚¶ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆIPï¼‰ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä»‹ã—ã¦å¯¾è©±ã—ã¾ã™ã€‚DNSã¯ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’[IPã‚¢ãƒ‰ãƒ¬ã‚¹](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/)ã«å¤‰æ›ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒªã‚½ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚\
[ã“ã“ã‹ã‚‰](https://www.cloudflare.com/learning/dns/what-is-dns/)ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆ:** 53
```
PORT     STATE SERVICE  REASON
53/tcp   open  domain  Microsoft DNS 6.1.7601 (1DB15D39) (Windows Server 2008 R2 SP1)
5353/udp open  zeroconf udp-response
53/udp   open  domain  Microsoft DNS 6.1.7601 (1DB15D39) (Windows Server 2008 R2 SP1)
```
### ç•°ãªã‚‹DNSã‚µãƒ¼ãƒãƒ¼

[https://academy.hackthebox.com/module/112/section/1069](https://academy.hackthebox.com/module/112/section/1069)ã‹ã‚‰ã®æƒ…å ±

| **ã‚µãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ—**             | **èª¬æ˜**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `DNSãƒ«ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼`            | DNSã®ãƒ«ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆ`TLD`ï¼‰ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚æœ€å¾Œã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã—ã¦ã€åå‰ã‚µãƒ¼ãƒãƒ¼ãŒå¿œç­”ã—ãªã„å ´åˆã«ã®ã¿è¦æ±‚ã•ã‚Œã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ«ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒªãƒ³ã‚¯ã™ã‚‹ãŸã‚ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸­å¤®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã™ã€‚[ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå‰²ã‚Šå½“ã¦åå‰ã¨ç•ªå·ã®ç®¡ç†æ©Ÿæ§‹](https://www.icann.org/)ï¼ˆ`ICANN`ï¼‰ã¯ã€ãƒ«ãƒ¼ãƒˆåå‰ã‚µãƒ¼ãƒãƒ¼ã®ä½œæ¥­ã‚’èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚ä¸–ç•Œä¸­ã«ã¯`13`ã®ãƒ«ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ |
| `æ¨©å¨ã‚ã‚‹ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼`       | æ¨©å¨ã‚ã‚‹ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã¯ã€ç‰¹å®šã®ã‚¾ãƒ¼ãƒ³ã«å¯¾ã—ã¦æ¨©é™ã‚’æŒã£ã¦ã„ã¾ã™ã€‚å½¼ã‚‰ã¯è‡ªåˆ†ã®è²¬ä»»ç¯„å›²ã‹ã‚‰ã®ã‚¯ã‚¨ãƒªã«ã®ã¿å¿œç­”ã—ã€å½¼ã‚‰ã®æƒ…å ±ã¯æ‹˜æŸåŠ›ãŒã‚ã‚Šã¾ã™ã€‚æ¨©å¨ã‚ã‚‹ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¯ã‚¨ãƒªã«å¿œç­”ã§ããªã„å ´åˆã€ãƒ«ãƒ¼ãƒˆåå‰ã‚µãƒ¼ãƒãƒ¼ãŒãã®æ™‚ç‚¹ã§å¼•ãç¶™ãã¾ã™ã€‚                                                                                                                                                                                                                   |
| `éæ¨©å¨ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼`           | éæ¨©å¨ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã¯ã€ç‰¹å®šã®DNSã‚¾ãƒ¼ãƒ³ã«å¯¾ã—ã¦è²¬ä»»ã‚’æŒã£ã¦ã„ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«ã€å†å¸°çš„ã¾ãŸã¯åå¾©çš„ãªDNSã‚¯ã‚¨ãƒªã‚’ä½¿ç”¨ã—ã¦ã€ç‰¹å®šã®DNSã‚¾ãƒ¼ãƒ³ã®æƒ…å ±ã‚’è‡ªåˆ†ã§åé›†ã—ã¾ã™ã€‚                                                                                                                                                                                                                                                                                                               |
| `ã‚­ãƒ£ãƒƒã‚·ãƒ¥DNSã‚µãƒ¼ãƒãƒ¼`         | ã‚­ãƒ£ãƒƒã‚·ãƒ¥DNSã‚µãƒ¼ãƒãƒ¼ã¯ã€æŒ‡å®šã•ã‚ŒãŸæœŸé–“ã®é–“ã€ä»–ã®ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®æƒ…å ±ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚ã“ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®æœŸé–“ã¯ã€æ¨©å¨ã‚ã‚‹ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ãŒæ±ºå®šã—ã¾ã™ã€‚                                                                                                                                                                                                                                                                                                                             |
| `ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼`       | ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼ã¯ã€DNSã‚¯ã‚¨ãƒªã‚’åˆ¥ã®DNSã‚µãƒ¼ãƒãƒ¼ã«è»¢é€ã™ã‚‹ã ã‘ã®æ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚                                                                                                                                                                                                                                                                                                                                                                                            |
| `ãƒªã‚¾ãƒ«ãƒ`                     | ãƒªã‚¾ãƒ«ãƒã¯æ¨©å¨ã‚ã‚‹DNSã‚µãƒ¼ãƒãƒ¼ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã¾ãŸã¯ãƒ«ãƒ¼ã‚¿ãƒ¼å†…ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«åå‰è§£æ±ºã‚’å®Ÿè¡Œã—ã¾ã™ã€‚                                                                                                                                                                                                                                                                                                                                                                               |

## åˆ—æŒ™

### **ãƒãƒŠãƒ¼ã‚°ãƒ©ãƒ“ãƒ³ã‚°**

DNSã«ã¯å–å¾—ã™ã‚‹ã€ŒãƒãƒŠãƒ¼ã€ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æœ€ã‚‚è¿‘ã„ã‚‚ã®ã¯ã€ã»ã¨ã‚“ã©ã®BINDãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã§æ©Ÿèƒ½ã™ã‚‹`version.bind. CHAOS TXT`ã®ãƒã‚¸ãƒƒã‚¯ã‚¯ã‚¨ãƒªã§ã™ã€‚\
`dig`ã‚’ä½¿ç”¨ã—ã¦ã“ã®ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š
```bash
dig version.bind CHAOS TXT @DNS
```
ã‚‚ã—å‹•ä½œã—ãªã„å ´åˆã¯ã€æŒ‡ç´‹èªè­˜æŠ€è¡“ã‚’ä½¿ç”¨ã—ã¦ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚[`fpdns`](https://github.com/kirei/fpdns)ãƒ„ãƒ¼ãƒ«ã¯ãã®1ã¤ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ãŒã€ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€**nmap**ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚‚ãƒãƒŠãƒ¼ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```
--script dns-nsid
```
### **ä»»æ„ã®ãƒ¬ã‚³ãƒ¼ãƒ‰**

ãƒ¬ã‚³ãƒ¼ãƒ‰**ANY**ã¯ã€DNSã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ã€**é–‹ç¤ºã™ã‚‹æ„æ€ã®ã‚ã‚‹**ã™ã¹ã¦ã®åˆ©ç”¨å¯èƒ½ãª**ã‚¨ãƒ³ãƒˆãƒª**ã‚’**è¿”ã™ã‚ˆã†ã«è¦æ±‚**ã—ã¾ã™ã€‚
```bash
dig any victim.com @<DNS_IP>
```
### **ã‚¾ãƒ¼ãƒ³è»¢é€**

ã“ã®æ‰‹ç¶šãã¯ `éåŒæœŸãƒ•ãƒ«è»¢é€ã‚¾ãƒ¼ãƒ³` (`AXFR`) ã¨ç•¥ã•ã‚Œã¾ã™ã€‚
```bash
dig axfr @<DNS_IP> #Try zone transfer without domain
dig axfr @<DNS_IP> <DOMAIN> #Try zone transfer guessing the domain
fierce --domain <DOMAIN> --dns-servers <DNS_IP> #Will try toperform a zone transfer against every authoritative name server and if this doesn'twork, will launch a dictionary attack
```
### è©³ç´°æƒ…å ±

The Domain Name System (DNS) is a fundamental component of the internet that translates human-readable domain names into IP addresses. It is responsible for resolving domain names to their corresponding IP addresses, allowing users to access websites and other internet resources.

DNS is a critical service that is often targeted by hackers during network penetration testing. By exploiting vulnerabilities in DNS servers or misconfigurations in DNS settings, attackers can gain unauthorized access to a network, redirect traffic to malicious websites, or perform other malicious activities.

During a DNS pentest, it is important to identify and assess the security of DNS servers, as well as the overall DNS infrastructure. This includes examining the configuration of DNS servers, checking for common misconfigurations, and testing for vulnerabilities such as DNS cache poisoning, zone transfer, and DNS amplification attacks.

To perform a DNS pentest, various tools and techniques can be used. These include DNS enumeration tools like `dnsenum` and `dnsrecon` to gather information about DNS servers, zone transfers, and subdomains. DNS spoofing tools like `dnsspoof` can be used to redirect DNS queries to malicious servers. Additionally, tools like `dig` and `nslookup` can be used to manually query DNS servers and test for vulnerabilities.

It is also important to understand common DNS vulnerabilities and attack vectors. These include DNS cache poisoning, where an attacker injects malicious DNS records into a DNS cache; zone transfer, where an attacker retrieves a copy of a DNS zone file from a DNS server; and DNS amplification, where an attacker exploits misconfigured DNS servers to amplify the volume of traffic sent to a target.

By understanding the inner workings of DNS and the various attack vectors, a penetration tester can effectively assess the security of DNS infrastructure and help organizations mitigate potential risks.
```bash
dig ANY @<DNS_IP> <DOMAIN>     #Any information
dig A @<DNS_IP> <DOMAIN>       #Regular DNS request
dig AAAA @<DNS_IP> <DOMAIN>    #IPv6 DNS request
dig TXT @<DNS_IP> <DOMAIN>     #Information
dig MX @<DNS_IP> <DOMAIN>      #Emails related
dig NS @<DNS_IP> <DOMAIN>      #DNS that resolves that name
dig -x 192.168.0.2 @<DNS_IP>   #Reverse lookup
dig -x 2a00:1450:400c:c06::93 @<DNS_IP> #reverse IPv6 lookup

#Use [-p PORT]  or  -6 (to use ivp6 address of dns)
```
#### nslookupã®ä½¿ç”¨

The `nslookup` command is a commonly used tool for querying DNS (Domain Name System) servers to obtain information about domain names and IP addresses. It can be used to perform various tasks related to DNS troubleshooting and analysis during a penetration test.

`nslookup`ã‚³ãƒãƒ³ãƒ‰ã¯ã€DNSï¼ˆDomain Name Systemï¼‰ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆä¸­ã®DNSã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„åˆ†æã«é–¢é€£ã™ã‚‹ã•ã¾ã–ã¾ãªã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

To use `nslookup`, open a command prompt and type `nslookup` followed by the domain name or IP address you want to query. By default, `nslookup` will display the IP address of the queried domain name and the corresponding domain name of the queried IP address.

`nslookup`ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é–‹ãã€ã‚¯ã‚¨ãƒªã—ãŸã„ãƒ‰ãƒ¡ã‚¤ãƒ³åã¾ãŸã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å¾Œã«`nslookup`ã¨å…¥åŠ›ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€`nslookup`ã¯ã‚¯ã‚¨ãƒªã•ã‚ŒãŸãƒ‰ãƒ¡ã‚¤ãƒ³åã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã€ã‚¯ã‚¨ãƒªã•ã‚ŒãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å¯¾å¿œã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

You can also specify the DNS server to use for the query by typing `nslookup` followed by the domain name or IP address, followed by the IP address of the DNS server you want to use. This can be useful for testing DNS resolution against specific DNS servers.

ã¾ãŸã€`nslookup`ã®å¾Œã«ãƒ‰ãƒ¡ã‚¤ãƒ³åã¾ãŸã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã•ã‚‰ã«ä½¿ç”¨ã—ãŸã„DNSã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã§ã€ã‚¯ã‚¨ãƒªã«ä½¿ç”¨ã™ã‚‹DNSã‚µãƒ¼ãƒãƒ¼ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã“ã‚Œã¯ç‰¹å®šã®DNSã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦DNSè§£æ±ºã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹éš›ã«å½¹ç«‹ã¡ã¾ã™ã€‚

In addition to querying DNS servers, `nslookup` can also be used to perform reverse DNS lookups. This involves querying the DNS server for the domain name associated with a given IP address.

DNSã‚µãƒ¼ãƒãƒ¼ã¸ã®ã‚¯ã‚¨ãƒªã ã‘ã§ãªãã€`nslookup`ã¯é€†å¼•ãDNSãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã‚‚ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã¯ã€æŒ‡å®šã•ã‚ŒãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã«é–¢é€£ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’å–å¾—ã™ã‚‹ãŸã‚ã«DNSã‚µãƒ¼ãƒãƒ¼ã«ã‚¯ã‚¨ãƒªã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒå«ã¾ã‚Œã¾ã™ã€‚
```bash
nslookup
> SERVER <IP_DNS> #Select dns server
> 127.0.0.1 #Reverse lookup of 127.0.0.1, maybe...
> <IP_MACHINE> #Reverse lookup of a machine, maybe...
```
### ä¾¿åˆ©ãªMetasploitãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

Metasploitãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€DNSã‚µãƒ¼ãƒ“ã‚¹ã®ãƒšãƒ³ãƒ†ã‚¹ãƒˆã«å½¹ç«‹ã¤ã•ã¾ã–ã¾ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚ä»¥ä¸‹ã«ã„ãã¤ã‹ã®ä¾¿åˆ©ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

- **auxiliary/scanner/dns/dns_cache_snoop**: DNSã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒŒãƒ¼ãƒ”ãƒ³ã‚°ã‚’å®Ÿè¡Œã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜ã•ã‚ŒãŸæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
- **auxiliary/scanner/dns/dns_enum**: DNSåˆ—æŒ™ã‚’å®Ÿè¡Œã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã«é–¢é€£ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚
- **auxiliary/scanner/dns/dns_forward**: DNSãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã¦ã€ç‰¹å®šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«é–¢é€£ã™ã‚‹æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
- **auxiliary/scanner/dns/dns_reverse_lookup**: é€†å¼•ãDNSã‚’ä½¿ç”¨ã—ã¦ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«é–¢é€£ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’ç‰¹å®šã—ã¾ã™ã€‚
- **auxiliary/scanner/dns/dns_srv_enum**: DNS SRVãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’åˆ—æŒ™ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã®æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
- **auxiliary/scanner/dns/dns_tcp_enum**: DNSã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦TCPæ¥ç¶šã‚’ä½¿ç”¨ã—ã¦åˆ—æŒ™ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
- **auxiliary/scanner/dns/dns_update**: DNSæ›´æ–°ã‚’å®Ÿè¡Œã—ã€DNSã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šã‚’å¤‰æ›´ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€DNSã‚µãƒ¼ãƒ“ã‚¹ã®è„†å¼±æ€§ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹éš›ã«å½¹ç«‹ã¡ã¾ã™ã€‚Metasploitãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€DNSã‚µãƒ¼ãƒ“ã‚¹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’è©•ä¾¡ã—ã€æ½œåœ¨çš„ãªæ”»æ’ƒçµŒè·¯ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
auxiliary/gather/enum_dns #Perform enumeration actions
```
### ä¾¿åˆ©ãªnmapã‚¹ã‚¯ãƒªãƒ—ãƒˆ

Here are some useful nmap scripts that can be used for network services pentesting:

ä»¥ä¸‹ã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒšãƒ³ãƒ†ã‚¹ãƒˆã«ä½¿ç”¨ã§ãã‚‹ä¾¿åˆ©ãªnmapã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚

- **dns-brute.nse**: This script performs brute force DNS enumeration by guessing subdomains and querying for their existence.

- **dns-cache-snoop.nse**: This script allows you to perform DNS cache snooping by querying for records that are not supposed to be cached.

- **dns-zone-transfer.nse**: This script attempts to perform a DNS zone transfer by requesting the entire DNS zone from a DNS server.

- **dns-recursion.nse**: This script checks if a DNS server allows recursive queries, which can be used for DNS amplification attacks.

- **dns-service-discovery.nse**: This script discovers DNS services by querying for common DNS records.

- **dns-update.nse**: This script checks if a DNS server allows dynamic updates, which can be used for DNS poisoning attacks.

- **dns-blacklist.nse**: This script checks if a DNS server is blacklisted by querying popular DNS blacklists.

- **dns-random-txid.nse**: This script sends DNS queries with random transaction IDs to bypass DNS cache poisoning defenses.

- **dns-random-srcport.nse**: This script sends DNS queries with random source ports to bypass DNS cache poisoning defenses.

- **dns-random-tcp-queries.nse**: This script sends DNS queries over TCP with random transaction IDs to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport.nse**: This script sends DNS queries over TCP with random source ports to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid.nse**: This script sends DNS queries over TCP with random source ports and transaction IDs to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, and query names to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, and record types to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, and classes to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, and flags to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, and EDNS options to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, and NSID to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, and TSIG to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, and AXFR to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, and IXFR to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, and SOA to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, and MX to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, and NS to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, and CNAME to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, and PTR to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, and TXT to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, and SRV to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, and AAAA to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, and PTR to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, and NSID to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, and TKEY to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, and NSEC to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, and RRSIG to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, and DNSKEY to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, and DS to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, DS, and DLV to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv-ixfr.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, DS, DLV, and IXFR to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv-ixfr-soa.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, DS, DLV, IXFR, and SOA to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv-ixfr-soa-mx.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, DS, DLV, IXFR, SOA, and MX to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv-ixfr-soa-mx-ns.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, DS, DLV, IXFR, SOA, MX, and NS to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv-ixfr-soa-mx-ns-cname.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY, DS, DLV, IXFR, SOA, MX, NS, and CNAME to bypass DNS cache poisoning defenses.

- **dns-random-tcp-srcport-txid-queries-rrtype-class-flags-edns-nsid-tsig-axfr-ixfr-soa-mx-ns-cname-ptr-txt-srv-aaaa-ptr-nsid-tkey-nsec-rrsig-dnskey-ds-dlv-ixfr-soa-mx-ns-cname-ptr.nse**: This script sends DNS queries over TCP with random source ports, transaction IDs, query names, record types, classes, flags, EDNS options, NSID, TSIG, AXFR, IXFR, SOA, MX, NS, CNAME, PTR, TXT, SRV, AAAA, PTR, NSID, TKEY, NSEC, RRSIG, DNSKEY
```bash
#Perform enumeration actions
nmap -n --script "(default and *dns*) or fcrdns or dns-srv-enum or dns-random-txid or dns-random-srcport" <IP>
```
### DNS - é€†å¼•ãBF

Reverse BF (Brute Force) is a technique used to discover DNS records by systematically guessing subdomains. This technique is based on the fact that many organizations use predictable subdomain naming conventions.

To perform a reverse BF attack, you need a wordlist containing common subdomain names. Tools like `dnsrecon` or `sublist3r` can generate such wordlists for you. Once you have the wordlist, you can use a tool like `dnsenum` or `fierce` to perform the actual attack.

The attack involves sending DNS queries for each subdomain in the wordlist and checking if a DNS record exists for that subdomain. If a DNS record is found, it means that the subdomain is valid and can be further investigated.

Reverse BF attacks can be effective in discovering hidden subdomains that may not be easily visible through other means. However, it is important to note that this technique relies on the assumption that the organization follows a predictable subdomain naming convention.

To mitigate the risk of reverse BF attacks, organizations should implement measures such as randomizing subdomain names, using non-predictable naming conventions, and regularly monitoring DNS records for unauthorized subdomains.
```bash
dnsrecon -r 127.0.0.0/24 -n <IP_DNS>  #DNS reverse of all of the addresses
dnsrecon -r 127.0.1.0/24 -n <IP_DNS>  #DNS reverse of all of the addresses
dnsrecon -r <IP_DNS>/24 -n <IP_DNS>   #DNS reverse of all of the addresses
dnsrecon -d active.htb -a -n <IP_DNS> #Zone transfer
```
{% hint style="info" %}
å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«è§£æ±ºã™ã‚‹ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€ãã®IPç¯„å›²ã‚’å•ã„åˆã‚ã›ã‚‹ãŸã‚ã«ãƒ‰ãƒ¡ã‚¤ãƒ³ã®NSã«å¯¾ã—ã¦é€†DNS BFã‚’è©¦ã¿ã‚‹ã¹ãã§ã™ã€‚
{% endhint %}

ã“ã‚Œã‚’è¡Œã†ãŸã‚ã®åˆ¥ã®ãƒ„ãƒ¼ãƒ«ï¼š[https://github.com/amine7536/reverse-scan](https://github.com/amine7536/reverse-scan)

é€†IPç¯„å›²ã‚’å•ã„åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š[https://bgp.he.net/net/205.166.76.0/24#\_dns](https://bgp.he.net/net/205.166.76.0/24#\_dns)ï¼ˆã“ã®ãƒ„ãƒ¼ãƒ«ã¯BGPã§ã‚‚å½¹ç«‹ã¡ã¾ã™ï¼‰ã€‚

### DNS - ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³BF
```bash
dnsenum --dnsserver <IP_DNS> --enum -p 0 -s 0 -o subdomains.txt -f subdomains-1000.txt <DOMAIN>
dnsrecon -D subdomains-1000.txt -d <DOMAIN> -n <IP_DNS>
dnscan -d <domain> -r -w subdomains-1000.txt #Bruteforce subdomains in recursive way, https://github.com/rbsec/dnscan
```
### Active Directory ã‚µãƒ¼ãƒãƒ¼

Active Directoryï¼ˆADï¼‰ã‚µãƒ¼ãƒãƒ¼ã¯ã€Windowsãƒ™ãƒ¼ã‚¹ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ADã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ã‚°ãƒ«ãƒ¼ãƒ—ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã€ãŠã‚ˆã³ãã®ä»–ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ã‚’æ‹…å½“ã—ã¾ã™ã€‚ADã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã€ãŠã‚ˆã³ãƒãƒªã‚·ãƒ¼ã®é©ç”¨ãªã©ã€ã•ã¾ã–ã¾ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

ADã‚µãƒ¼ãƒãƒ¼ã®ãƒšãƒ³ãƒ†ã‚¹ãƒˆã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ”»æ’ƒæ‰‹æ³•ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç·å½“ãŸã‚Šæ”»æ’ƒï¼ˆãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒï¼‰
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥ã‚’ç›—ã‚€ãŸã‚ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚¹ãƒ—ãƒ¬ãƒ¼æ”»æ’ƒ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã‚’å¼•ãèµ·ã“ã™ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ”»æ’ƒ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ¨©é™æ˜‡æ ¼ã‚’è©¦ã¿ã‚‹ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™æ˜‡æ ¼æ”»æ’ƒ
- ãƒ‰ãƒ¡ã‚¤ãƒ³ç®¡ç†è€…ã®æ¨©é™ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ç®¡ç†è€…æ¨©é™æ˜‡æ ¼æ”»æ’ƒ

ã“ã‚Œã‚‰ã®æ”»æ’ƒæ‰‹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€ADã‚µãƒ¼ãƒãƒ¼ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ç‰¹å®šã—ã€é©åˆ‡ãªå¯¾ç­–ã‚’è¬›ã˜ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
```
dig -t _gc._tcp.lab.domain.com
dig -t _ldap._tcp.lab.domain.com
dig -t _kerberos._tcp.lab.domain.com
dig -t _kpasswd._tcp.lab.domain.com
nmap --script dns-srv-enum --script-args "dns-srv-enum.domain='domain.com'"
```
### DNSSec

DNSSecï¼ˆDomain Name System Security Extensionsï¼‰ã¯ã€DNSï¼ˆDomain Name Systemï¼‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã™ã‚‹ãŸã‚ã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚DNSSecã¯ã€DNSã®ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã¨ä¿¡é ¼æ€§ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

DNSSecã¯ã€ä»¥ä¸‹ã®ä¸»ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®è„†å¼±æ€§ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

- DNSã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¤ã‚ºãƒ‹ãƒ³ã‚°ï¼šæ”»æ’ƒè€…ãŒDNSã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«å½ã®æƒ…å ±ã‚’æ³¨å…¥ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’èª¤ã£ãŸã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«èª˜å°ã™ã‚‹æ”»æ’ƒæ‰‹æ³•ã§ã™ã€‚DNSSecã¯ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ã§ã€ã“ã®æ”»æ’ƒã‚’é˜²ãã¾ã™ã€‚

- DNSãƒã‚¤ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°ï¼šæ”»æ’ƒè€…ãŒDNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ”¹ã–ã‚“ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ”»æ’ƒè€…ã®åˆ¶å¾¡ä¸‹ã«ã‚ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«èª˜å°ã™ã‚‹æ”»æ’ƒæ‰‹æ³•ã§ã™ã€‚DNSSecã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ä¿¡é ¼æ€§ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ã§ã€ã“ã®æ”»æ’ƒã‚’é˜²ãã¾ã™ã€‚

DNSSecã¯ã€å…¬é–‹éµæš—å·ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®ç½²åã¨æ¤œè¨¼ã‚’è¡Œã„ã¾ã™ã€‚DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ‡ã‚¸ã‚¿ãƒ«ç½²åãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã€å…¬é–‹éµã‚’ä½¿ç”¨ã—ã¦ç½²åã‚’æ¤œè¨¼ã—ã€ãƒ‡ãƒ¼ã‚¿ã®ä¿¡é ¼æ€§ã‚’ç¢ºèªã—ã¾ã™ã€‚

DNSSecã¯ã€DNSãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã¨DNSã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä¸¡æ–¹ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ç½²åã‚’è¡Œã„ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ç½²åã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

DNSSecã¯ã€DNSã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®é‡è¦ãªãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€å®Œå…¨ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’æä¾›ã™ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ”»æ’ƒè€…ãŒãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼è‡ªä½“ã‚’æ”»æ’ƒã™ã‚‹å ´åˆã‚„ã€æ”»æ’ƒè€…ãŒä¿¡é ¼ã§ãã‚‹ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã‚’å‚å—ã™ã‚‹å ´åˆã«ã¯ã€DNSSecã®ä¿è­·ã¯åŠ¹æœãŒã‚ã‚Šã¾ã›ã‚“ã€‚

DNSSecã¯ã€DNSã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®é‡è¦ãªæ‰‹æ®µã®ä¸€ã¤ã§ã™ãŒã€é©åˆ‡ãªè¨­å®šã¨ç®¡ç†ãŒå¿…è¦ã§ã™ã€‚
```bash
#Query paypal subdomains to ns3.isc-sns.info
nmap -sSU -p53 --script dns-nsec-enum --script-args dns-nsec-enum.domains=paypal.com ns3.isc-sns.info
```
### IPv6

"AAAA"ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã®IPv6ã‚’åé›†ã™ã‚‹ãŸã‚ã®ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã€‚
```bash
dnsdict6 -s -t <domain>
```
## Bruteforce reverse DNS in using IPv6 addresses

IPv6 addresses are 128-bit addresses that are represented in hexadecimal format. Reverse DNS is a technique used to map an IP address to a domain name. In the case of IPv6 addresses, the reverse DNS lookup is done by querying the PTR records in the DNS server.

To bruteforce reverse DNS using IPv6 addresses, you can follow these steps:

1. Generate a list of possible IPv6 addresses that you want to bruteforce. This can be done by generating all possible combinations of hexadecimal characters for each segment of the IPv6 address.

2. Use a DNS lookup tool or a programming language with DNS resolution capabilities to perform reverse DNS lookups for each IPv6 address in your list. This can be done by querying the PTR record for each IPv6 address.

3. Analyze the results of the reverse DNS lookups. Look for domain names that are associated with the IPv6 addresses. This can help you identify potential targets or gather information about the target network.

4. Repeat the process with different combinations of hexadecimal characters until you have exhausted all possible IPv6 addresses.

It is important to note that bruteforcing reverse DNS can be time-consuming and resource-intensive, especially when dealing with a large number of IPv6 addresses. Additionally, it is essential to ensure that you have proper authorization and legal permission before performing any kind of penetration testing or hacking activities.
```bash
dnsrevenum6 pri.authdns.ripe.net 2001:67c:2e8::/48 #Will use the dns pri.authdns.ripe.net
```
### DNSå†å¸°DDoS

DNSå†å¸°ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹å ´åˆã€æ”»æ’ƒè€…ã¯UDPãƒ‘ã‚±ãƒƒãƒˆã®**é€ä¿¡å…ƒ**ã‚’**å½è£…**ã™ã‚‹ã“ã¨ã§ã€DNSãŒå¿œç­”ã‚’è¢«å®³è€…ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ”»æ’ƒè€…ã¯ã€**ANY**ã¾ãŸã¯**DNSSEC**ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’æ‚ªç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã¯ã€ã‚ˆã‚Šå¤§ããªå¿œç­”ã‚’æŒã¤å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚

DNSãŒå†å¸°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’**ç¢ºèª**ã™ã‚‹æ–¹æ³•ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’ã‚¯ã‚¨ãƒªã—ã€å¿œç­”ã«**ãƒ•ãƒ©ã‚° "ra"**ï¼ˆå†å¸°åˆ©ç”¨å¯èƒ½ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’**ç¢ºèª**ã™ã‚‹ã“ã¨ã§ã™ã€‚
```bash
dig google.com A @<IP>
```
**åˆ©ç”¨ã§ããªã„**:

![](<../.gitbook/assets/image (275).png>)

**åˆ©ç”¨å¯èƒ½**:

![](<../.gitbook/assets/image (276).png>)

<figure><img src="../.gitbook/assets/image (1) (1) (2) (4).png" alt=""><figcaption></figcaption></figure>

[**DragonJAR Security Conferenceã¯å›½éš›çš„ãªã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ**](https://www.dragonjarcon.org/)ã§ã€2023å¹´9æœˆ7æ—¥ã‹ã‚‰8æ—¥ã¾ã§ã‚³ãƒ­ãƒ³ãƒ“ã‚¢ã®ãƒœã‚´ã‚¿ã§é–‹å‚¬ã•ã‚Œã¾ã™ã€‚ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ã‚¹ãƒšã‚¤ãƒ³èªã§æœ€æ–°ã®ç ”ç©¶ãŒç™ºè¡¨ã•ã‚Œã‚‹æŠ€è¡“çš„ãªå†…å®¹ã®é«˜ã„ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚ã‚Šã€ä¸–ç•Œä¸­ã®ãƒãƒƒã‚«ãƒ¼ã‚„ç ”ç©¶è€…ã‚’æƒ¹ãã¤ã‘ã¦ã„ã¾ã™ã€‚\
ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ä»Šã™ãç™»éŒ²ã—ã€ã“ã®ç´ æ™´ã‚‰ã—ã„ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ãŠè¦‹é€ƒã—ãªãï¼:

{% embed url="https://www.dragonjarcon.org/" %}

### å­˜åœ¨ã—ãªã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ãƒ¡ãƒ¼ãƒ«

æ›¸ç±: Network Security Assessment (ç¬¬3ç‰ˆ)

ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã®å­˜åœ¨ã—ãªã„ã‚¢ãƒ‰ãƒ¬ã‚¹ã«å˜ç´”ã«ãƒ¡ãƒ¼ãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã ã‘ã§ã€_é…ä¿¡ä¸èƒ½é€šçŸ¥_ï¼ˆNDNï¼‰ã‚’é€šã˜ã¦æœ‰ç”¨ãªå†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ãŒæ˜ã‚‰ã‹ã«ãªã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚
```
Generating server: noa.nintendo.com

blah@nintendo.com
#550 5.1.1 RESOLVER.ADR.RecipNotFound; not found ##

Original message headers:

Received: from ONERDEDGE02.one.nintendo.com (10.13.20.35) by
onerdexch08.one.nintendo.com (10.13.30.39) with Microsoft SMTP Server (TLS)
id 14.3.174.1; Sat, 26 Apr 2014 16:52:22 -0700
Received: from barracuda.noa.nintendo.com (205.166.76.35) by
ONERDEDGE02.one.nintendo.com (10.13.20.35) with Microsoft SMTP Server (TLS)
id 14.3.174.1; Sat, 26 Apr 2014 16:51:22 -0700
X-ASG-Debug-ID: 1398556333-0614671716199b0d0001-zOQ9WJ
Received: from gateway05.websitewelcome.com (gateway05.websitewelcome.com  [69.93.154.37]) by
barracuda.noa.nintendo.com with ESMTP id xVNPkwaqGgdyH5Ag for <blah@nintendo.com>; Sat,
26 Apr 2014 16:52:13 -0700 (PDT)
X-Barracuda-Envelope-From: chris@example.org
X-Barracuda-Apparent-Source-IP: 69.93.154.37
```
ä»¥ä¸‹ã®ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯æœ‰ç”¨ã§ã™ï¼š

* å†…éƒ¨ãƒ›ã‚¹ãƒˆåã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãŠã‚ˆã³ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
* ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¯Microsoft Exchange Server 2010 SP3ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™
* Barracuda Networksãƒ‡ãƒã‚¤ã‚¹ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```
host.conf
/etc/resolv.conf
/etc/bind/named.conf
/etc/bind/named.conf.local
/etc/bind/named.conf.options
/etc/bind/named.conf.log
/etc/bind/*
```
Bindã‚µãƒ¼ãƒãƒ¼ã‚’è¨­å®šã™ã‚‹éš›ã®å±é™ºãªè¨­å®š:

| **ã‚ªãƒ—ã‚·ãƒ§ãƒ³**        | **èª¬æ˜**                                                                |
| ----------------- | ------------------------------------------------------------------------------ |
| `allow-query`     | DNSã‚µãƒ¼ãƒãƒ¼ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚            |
| `allow-recursion` | DNSã‚µãƒ¼ãƒãƒ¼ã«å†å¸°çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚  |
| `allow-transfer`  | DNSã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¾ãƒ¼ãƒ³è»¢é€ã‚’å—ã‘å–ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚ |
| `zone-statistics` | ã‚¾ãƒ¼ãƒ³ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¾ã™ã€‚                                            |

## HackTricksè‡ªå‹•ã‚³ãƒãƒ³ãƒ‰
```
Protocol_Name: DNS    #Protocol Abbreviation if there is one.
Port_Number:  53     #Comma separated if there is more than one.
Protocol_Description: Domain Name Service        #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for DNS
Note: |
#These are the commands I run every time I see an open DNS port

dnsrecon -r 127.0.0.0/24 -n {IP} -d {Domain_Name}
dnsrecon -r 127.0.1.0/24 -n {IP} -d {Domain_Name}
dnsrecon -r {Network}{CIDR} -n {IP} -d {Domain_Name}
dig axfr @{IP}
dig axfr {Domain_Name} @{IP}
nslookup
SERVER {IP}
127.0.0.1
{IP}
Domain_Name
exit

https://book.hacktricks.xyz/pentesting/pentesting-dns

Entry_2:
Name: Banner Grab
Description: Grab DNS Banner
Command: dig version.bind CHAOS TXT @DNS

Entry_3:
Name: Nmap Vuln Scan
Description: Scan for Vulnerabilities with Nmap
Command: nmap -n --script "(default and *dns*) or fcrdns or dns-srv-enum or dns-random-txid or dns-random-srcport" {IP}

Entry_4:
Name: Zone Transfer
Description: Three attempts at forcing a zone transfer
Command: dig axfr @{IP} && dix axfr @{IP} {Domain_Name} && fierce --dns-servers {IP} --domain {Domain_Name}


Entry_5:
Name: Active Directory
Description: Eunuerate a DC via DNS
Command: dig -t _gc._{Domain_Name} && dig -t _ldap._{Domain_Name} && dig -t _kerberos._{Domain_Name} && dig -t _kpasswd._{Domain_Name} && nmap --script dns-srv-enum --script-args "dns-srv-enum.domain={Domain_Name}"

Entry_6:
Name: consolesless mfs enumeration
Description: DNS enumeration without the need to run msfconsole
Note: sourced from https://github.com/carlospolop/legion
Command: msfconsole -q -x 'use auxiliary/scanner/dns/dns_amp; set RHOSTS {IP}; set RPORT 53; run; exit' && msfconsole -q -x 'use auxiliary/gather/enum_dns; set RHOSTS {IP}; set RPORT 53; run; exit'
```
<figure><img src="../.gitbook/assets/image (1) (1) (2) (4).png" alt=""><figcaption></figcaption></figure>

[**DragonJAR Security Conferenceã¯å›½éš›çš„ãªã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ**](https://www.dragonjarcon.org/)ã§ã€2023å¹´9æœˆ7æ—¥ã‹ã‚‰8æ—¥ã¾ã§ã‚³ãƒ­ãƒ³ãƒ“ã‚¢ã®ãƒœã‚´ã‚¿ã§é–‹å‚¬ã•ã‚Œã¾ã™ã€‚ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ã‚¹ãƒšã‚¤ãƒ³èªã§æœ€æ–°ã®ç ”ç©¶ãŒç™ºè¡¨ã•ã‚Œã‚‹æŠ€è¡“çš„ãªå†…å®¹ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚ã‚Šã€ä¸–ç•Œä¸­ã®ãƒãƒƒã‚«ãƒ¼ã‚„ç ”ç©¶è€…ã‚’æƒ¹ãã¤ã‘ã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ä»Šã™ãç™»éŒ²ã—ã€ã“ã®ç´ æ™´ã‚‰ã—ã„ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ãŠè¦‹é€ƒã—ãªãï¼:

{% embed url="https://www.dragonjarcon.org/" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ** **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ã”è¦§ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
