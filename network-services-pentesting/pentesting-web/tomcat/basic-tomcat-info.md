# åŸºæœ¬çš„ãªTomcatæƒ…å ±

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[hacktricksãƒªãƒã‚¸ãƒˆãƒª](https://github.com/carlospolop/hacktricks)ã¨[hacktricks-cloudãƒªãƒã‚¸ãƒˆãƒª](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

æœ€ã‚‚é‡è¦ãªè„†å¼±æ€§ã‚’è¦‹ã¤ã‘ã¦ä¿®æ­£ã‚’è¿…é€ŸåŒ–ã—ã¾ã—ã‚‡ã†ã€‚Intruderã¯æ”»æ’ƒå¯¾è±¡ã‚’è¿½è·¡ã—ã€ç©æ¥µçš„ãªè„…å¨ã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿè¡Œã—ã€APIã‹ã‚‰Webã‚¢ãƒ—ãƒªã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã¾ã§ã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯å…¨ä½“ã§å•é¡Œã‚’è¦‹ã¤ã‘ã¾ã™ã€‚[**ç„¡æ–™ã§ãŠè©¦ã—ãã ã•ã„**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks)ã€‚

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}

***

### rootã§ã®å®Ÿè¡Œã‚’é¿ã‘ã‚‹

Tomcatã‚’rootã§å®Ÿè¡Œã—ãªã„ãŸã‚ã®éå¸¸ã«ä¸€èˆ¬çš„ãªè¨­å®šã¯ã€ãƒãƒ¼ãƒˆ80/443ã§Apacheã‚µãƒ¼ãƒãƒ¼ã‚’è¨­å®šã—ã€è¦æ±‚ã•ã‚ŒãŸãƒ‘ã‚¹ãŒæ­£è¦è¡¨ç¾ã«ä¸€è‡´ã™ã‚‹å ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯åˆ¥ã®ãƒãƒ¼ãƒˆã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹Tomcatã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ§‹é€ 
```
â”œâ”€â”€ bin
â”œâ”€â”€ conf
â”‚   â”œâ”€â”€ catalina.policy
â”‚   â”œâ”€â”€ catalina.properties
â”‚   â”œâ”€â”€ context.xml
â”‚   â”œâ”€â”€ tomcat-users.xml
â”‚   â”œâ”€â”€ tomcat-users.xsd
â”‚   â””â”€â”€ web.xml
â”œâ”€â”€ lib
â”œâ”€â”€ logs
â”œâ”€â”€ temp
â”œâ”€â”€ webapps
â”‚   â”œâ”€â”€ manager
â”‚   â”‚   â”œâ”€â”€ images
â”‚   â”‚   â”œâ”€â”€ META-INF
â”‚   â”‚   â””â”€â”€ WEB-INF
|   |       â””â”€â”€ web.xml
â”‚   â””â”€â”€ ROOT
â”‚       â””â”€â”€ WEB-INF
â””â”€â”€ work
â””â”€â”€ Catalina
â””â”€â”€ localhost
```
* `WEB-INF` folder: This folder contains the configuration files and classes specific to the web application.
* `META-INF` folder: This folder contains the metadata files for the web application.
* Other files and folders: These can include HTML, CSS, JavaScript, and other resources used by the web application.

It is important to note that the structure and contents of the `webapps` folder may vary depending on the specific web applications deployed on the Tomcat server.
```
webapps/customapp
â”œâ”€â”€ images
â”œâ”€â”€ index.jsp
â”œâ”€â”€ META-INF
â”‚   â””â”€â”€ context.xml
â”œâ”€â”€ status.xsd
â””â”€â”€ WEB-INF
â”œâ”€â”€ jsp
|   â””â”€â”€ admin.jsp
â””â”€â”€ web.xml
â””â”€â”€ lib
|    â””â”€â”€ jdbc_drivers.jar
â””â”€â”€ classes
â””â”€â”€ AdminServlet.class
```
æœ€ã‚‚é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¯`WEB-INF/web.xml`ã§ã€ã“ã‚Œã¯ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨˜è¿°å­ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ«ãƒ¼ãƒˆã«é–¢ã™ã‚‹æƒ…å ±ã¨ã€ã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒˆã‚’å‡¦ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚\
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã‚‹ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã¯ã€`WEB-INF/classes`ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ã«ã¯é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚„æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã„ã‹ãªã‚‹è„†å¼±æ€§ã‚‚ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®å®Œå…¨ãªä¾µå®³ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`lib`ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ã€ãã®ç‰¹å®šã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚`jsp`ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ã€[Jakarta Server Pages (JSP)](https://en.wikipedia.org/wiki/Jakarta\_Server\_Pages)ï¼ˆä»¥å‰ã¯`JavaServer Pages`ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã—ãŸï¼‰ãŒæ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€Apacheã‚µãƒ¼ãƒãƒ¼ä¸Šã®PHPãƒ•ã‚¡ã‚¤ãƒ«ã¨æ¯”è¼ƒã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã«**web.xml**ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚
```xml
<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
<servlet>
<servlet-name>AdminServlet</servlet-name>
<servlet-class>com.inlanefreight.api.AdminServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>AdminServlet</servlet-name>
<url-pattern>/admin</url-pattern>
</servlet-mapping>
</web-app>
```
ä¸Šè¨˜ã®`web.xml`ã®è¨­å®šã¯ã€**`AdminServlet`**ã¨ã„ã†æ–°ã—ã„ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆã¯ã€**`com.inlanefreight.api.AdminServlet`**ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã¦ã„ã¾ã™ã€‚Javaã§ã¯ã€ãƒ‰ãƒƒãƒˆè¡¨è¨˜ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’ä½œæˆã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ä¸Šè¨˜ã§å®šç¾©ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã®ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã®ãƒ‘ã‚¹ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

* **`classes/com/inlanefreight/api/AdminServlet.class`**

æ¬¡ã«ã€`/admin`ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’`AdminServlet`ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹æ–°ã—ã„ã‚µãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ã“ã®è¨­å®šã«ã‚ˆã‚Šã€**`/admin`ã¸ã®ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ`AdminServlet.class`ã‚¯ãƒ©ã‚¹ã«é€ä¿¡**ã•ã‚Œã€å‡¦ç†ã•ã‚Œã¾ã™ã€‚`web.xml`ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã«ã¯ã€**æ©Ÿå¯†æƒ…å ±**ãŒå¤šãå«ã¾ã‚Œã¦ãŠã‚Šã€**ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆLFIï¼‰ã®è„†å¼±æ€§**ã‚’åˆ©ç”¨ã™ã‚‹éš›ã«é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

### tomcat-users

**`tomcat-users.xml`**ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€**`/manager`ãŠã‚ˆã³`host-manager`ç®¡ç†ãƒšãƒ¼ã‚¸**ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã¾ãŸã¯æ‹’å¦ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
```xml
<?xml version="1.0" encoding="UTF-8"?>

<SNIP>

<tomcat-users xmlns="http://tomcat.apache.org/xml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"
version="1.0">
<!--
By default, no user is included in the "manager-gui" role required
to operate the "/manager/html" web application.  If you wish to use this app,
you must define such a user - the username and password are arbitrary.

Built-in Tomcat manager roles:
- manager-gui    - allows access to the HTML GUI and the status pages
- manager-script - allows access to the HTTP API and the status pages
- manager-jmx    - allows access to the JMX proxy and the status pages
- manager-status - allows access to the status pages only

The users below are wrapped in a comment and are therefore ignored. If you
wish to configure one or more of these users for use with the manager web
application, do not forget to remove the <!.. ..> that surrounds them. You
will also need to set the passwords to something appropriate.
-->


<SNIP>

!-- user manager can access only manager section -->
<role rolename="manager-gui" />
<user username="tomcat" password="tomcat" roles="manager-gui" />

<!-- user admin can access manager and admin section both -->
<role rolename="admin-gui" />
<user username="admin" password="admin" roles="manager-gui,admin-gui" />


</tomcat-users>
```
ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€`manager-gui`ã€`manager-script`ã€`manager-jmx`ã€ãŠã‚ˆã³`manager-status`ã®å„å½¹å‰²ãŒæä¾›ã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼`tomcat`ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒ`tomcat`ã§ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ`admin`ã«ã¯å¼±ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰`admin`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://academy.hackthebox.com/module/113/section/1090](https://academy.hackthebox.com/module/113/section/1090)

<figure><img src="/.gitbook/assets/image (675).png" alt=""><figcaption></figcaption></figure>

æœ€ã‚‚é‡è¦ãªè„†å¼±æ€§ã‚’è¦‹ã¤ã‘ã¦ã€ã‚ˆã‚Šé€Ÿãä¿®æ­£ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚Intruderã¯æ”»æ’ƒå¯¾è±¡ã‚’è¿½è·¡ã—ã€ç©æ¥µçš„ãªè„…å¨ã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿè¡Œã—ã€APIã‹ã‚‰Webã‚¢ãƒ—ãƒªã¾ã§ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã«ã‚ãŸã‚‹å•é¡Œã‚’è¦‹ã¤ã‘ã¾ã™ã€‚[**ç„¡æ–™ã§ãŠè©¦ã—ãã ã•ã„**](https://www.intruder.io/?utm\_source=referral\&utm\_campaign=hacktricks)ã€‚

{% embed url="https://www.intruder.io/?utm_campaign=hacktricks&utm_source=referral" %}


<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

* **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ** HackTricksã§**ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥æ‰‹**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[hacktricks repo](https://github.com/carlospolop/hacktricks)ã¨[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>
