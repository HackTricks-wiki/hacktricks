# 123/udp - Pentesting NTP

<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

nete al servidor de [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) para comunicarte con hackers experimentados y cazadores de bugs!

**Perspectivas de Hacking**\
Invol煤crate con contenido que explora la emoci贸n y los desaf铆os del hacking

**Noticias de Hacking en Tiempo Real**\
Mantente al d铆a con el mundo del hacking a trav茅s de noticias e informaci贸n en tiempo real

**ltimos Anuncios**\
Mantente informado sobre los nuevos programas de recompensas por bugs y actualizaciones importantes de plataformas

**nete a nosotros en** [**Discord**](https://discord.com/invite/N3FrSbmwdy) y comienza a colaborar con los mejores hackers hoy!

## Informaci贸n B谩sica

El **Protocolo de Tiempo de Red (NTP)** asegura que las computadoras y dispositivos de red a trav茅s de redes con latencia variable sincronicen sus relojes con precisi贸n. Es vital para mantener una medici贸n precisa del tiempo en operaciones de TI, seguridad y registro de eventos. La precisi贸n de NTP es esencial, pero tambi茅n plantea riesgos de seguridad si no se gestiona adecuadamente.

### Resumen y Consejos de Seguridad:
- **Prop贸sito**: Sincroniza los relojes de los dispositivos a trav茅s de redes.
- **Importancia**: Cr铆tico para la seguridad, registro de eventos y operaciones.
- **Medidas de Seguridad**:
- Utilizar fuentes de NTP confiables con autenticaci贸n.
- Limitar el acceso de red al servidor NTP.
- Monitorear la sincronizaci贸n en busca de signos de manipulaci贸n.

**Puerto predeterminado:** 123/udp
```
PORT    STATE SERVICE REASON
123/udp open  ntp     udp-response
```
## Enumeraci贸n
```bash
ntpq -c readlist <IP_ADDRESS>
ntpq -c readvar <IP_ADDRESS>
ntpq -c peers <IP_ADDRESS>
ntpq -c associations <IP_ADDRESS>
ntpdc -c monlist <IP_ADDRESS>
ntpdc -c listpeers <IP_ADDRESS>
ntpdc -c sysinfo <IP_ADDRESS>
```

```bash
nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 <IP>
```
## Examinar archivos de configuraci贸n

* ntp.conf

## Ataque de Amplificaci贸n NTP

[**C贸mo funciona el Ataque DDoS NTP**](https://resources.infosecinstitute.com/network-time-protocol-ntp-threats-countermeasures/#gref)

El protocolo **NTP**, utilizando UDP, permite operar sin necesidad de procedimientos de saludo, a diferencia de TCP. Esta caracter铆stica es explotada en los **ataques de amplificaci贸n NTP DDoS**. Aqu铆, los atacantes crean paquetes con una IP de origen falsa, haciendo que parezca que las solicitudes de ataque provienen de la v铆ctima. Estos paquetes, inicialmente peque帽os, hacen que el servidor NTP responda con vol煤menes de datos mucho m谩s grandes, amplificando el ataque.

El comando **_MONLIST_**, a pesar de su uso poco frecuente, puede informar sobre los 煤ltimos 600 clientes conectados al servicio NTP. Si bien el comando en s铆 es simple, su mal uso en tales ataques resalta vulnerabilidades de seguridad cr铆ticas.
```bash
ntpdc -n -c monlist <IP>
```
## Shodan

* `ntp`

## Comandos Autom谩ticos de HackTricks
```
Protocol_Name: NTP    #Protocol Abbreviation if there is one.
Port_Number:  123     #Comma separated if there is more than one.
Protocol_Description: Network Time Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NTP
Note: |
The Network Time Protocol (NTP) ensures computers and network devices across variable-latency networks sync their clocks accurately. It's vital for maintaining precise timekeeping in IT operations, security, and logging. NTP's accuracy is essential, but it also poses security risks if not properly managed.

https://book.hacktricks.xyz/pentesting/pentesting-ntp

Entry_2:
Name: Nmap
Description: Enumerate NTP
Command: nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 {IP}
```
<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

nete al servidor de [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) para comunicarte con hackers experimentados y cazadores de recompensas por errores.

**Perspectivas de Hacking**\
Participa en contenido que explora la emoci贸n y los desaf铆os del hacking.

**Noticias de Hacking en Tiempo Real**\
Mantente al d铆a con el mundo del hacking a trav茅s de noticias e informaci贸n en tiempo real.

**ltimos Anuncios**\
Mantente informado sobre los nuevos programas de recompensas por errores que se lanzan y las actualizaciones cruciales de la plataforma.

隆nete a nosotros en [**Discord**](https://discord.com/invite/N3FrSbmwdy) y comienza a colaborar con los mejores hackers hoy!

<details>

<summary><strong>Aprende a hackear AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
