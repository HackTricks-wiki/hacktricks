# 3260 - Pentesting ISCSI

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼šç¤¾**ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼**ã—ãŸã„ã§ã™ã‹ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼

- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚

- [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚

- [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„[**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã€‚**

- **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[hacktricks repo](https://github.com/carlospolop/hacktricks)ã¨[hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>

## åŸºæœ¬æƒ…å ±

> ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ãŠã„ã¦ã€**iSCSI**ã¯**Internet Small Computer Systems Interface**ã®ç•¥ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ–½è¨­ã‚’ãƒªãƒ³ã‚¯ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆIPï¼‰ãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°æ¨™æº–ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€TCP/IPãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§SCSIã‚³ãƒãƒ³ãƒ‰ã‚’è¼¸é€ã™ã‚‹ã“ã¨ã§ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ãƒ–ãƒ­ãƒƒã‚¯ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæä¾›ã•ã‚Œã¾ã™ã€‚iSCSIã¯ã‚¤ãƒ³ãƒˆãƒ©ãƒãƒƒãƒˆä¸Šã§ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚„é•·è·é›¢ã§ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒªã‚¢ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆLANï¼‰ã€åºƒåŸŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆWANï¼‰ã€ã¾ãŸã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ä»‹ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã€å ´æ‰€ã«ä¾å­˜ã—ãªã„ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨å–å¾—ã‚’å¯èƒ½ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
>
> ã“ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆã‚¤ãƒ‹ã‚·ã‚¨ãƒ¼ã‚¿ï¼‰ãŒãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ä¸Šã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ‡ãƒã‚¤ã‚¹ï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰ã«SCSIã‚³ãƒãƒ³ãƒ‰ï¼ˆCDBï¼‰ã‚’é€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆSANï¼‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚ã‚Šã€çµ„ç¹”ãŒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ãƒ¬ã‚¤ã«çµ±åˆã™ã‚‹ä¸€æ–¹ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„Webã‚µãƒ¼ãƒãƒ¼ãªã©ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ­ãƒ¼ã‚«ãƒ«ã«æ¥ç¶šã•ã‚ŒãŸSCSIãƒ‡ã‚£ã‚¹ã‚¯ã®å¹»æƒ³ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã¯ä¸»ã«Fibre Channelã¨ç«¶åˆã—ã¦ã„ã¾ã™ãŒã€é€šå¸¸å°‚ç”¨ã®ã‚±ãƒ¼ãƒ–ãƒ«ãŒå¿…è¦ãªå¾“æ¥ã®Fibre Channelã¨ã¯ç•°ãªã‚Šã€æ—¢å­˜ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’ä½¿ç”¨ã—ã¦é•·è·é›¢ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆï¼š** 3260
```
PORT     STATE SERVICE VERSION
3260/tcp open  iscsi?
```
## åˆ—æŒ™

iSCSIã‚µãƒ¼ãƒ“ã‚¹ã®ãƒšãƒ³ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ã¾ãšã¯ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åˆ—æŒ™ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ã€iSCSIã‚µãƒ¼ãƒ“ã‚¹ã®åˆ—æŒ™ã«å½¹ç«‹ã¤ãƒ„ãƒ¼ãƒ«ã¨ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚

### Nmapã‚¹ã‚¯ãƒªãƒ—ãƒˆ

Nmapã¯ã€iSCSIã‚µãƒ¼ãƒ“ã‚¹ã®åˆ—æŒ™ã«å½¹ç«‹ã¤ã•ã¾ã–ã¾ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€ã„ãã¤ã‹ã®ä¾¿åˆ©ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¾‹ã§ã™ã€‚

- `iscsi-info`ï¼šiSCSIã‚µãƒ¼ãƒãƒ¼ã®æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
- `iscsi-enum-targets`ï¼šiSCSIã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’åˆ—æŒ™ã—ã¾ã™ã€‚
- `iscsi-brute`ï¼šiSCSIã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€iSCSIã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹é‡è¦ãªæƒ…å ±ã‚’åé›†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### Wireshark

Wiresharkã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€è§£æã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚iSCSIã‚µãƒ¼ãƒ“ã‚¹ã®åˆ—æŒ™ã«ã¯ã€Wiresharkã‚’ä½¿ç”¨ã—ã¦iSCSIãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã€è§£æã™ã‚‹ã“ã¨ãŒæœ‰åŠ¹ã§ã™ã€‚iSCSIãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã«ã¯ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒãƒ¼ãƒˆç•ªå·ãªã©ã®é‡è¦ãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

### iSCSI Discovery

iSCSIãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªã¯ã€iSCSIã‚µãƒ¼ãƒãƒ¼ãŒæä¾›ã™ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ç‰¹å®šã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚iSCSIãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªã«ã¯ã€ä»¥ä¸‹ã®2ã¤ã®ä¸»è¦ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

- **SendTargets**ï¼šiSCSIã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦SendTargetsãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€åˆ©ç”¨å¯èƒ½ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚
- **iSNS**ï¼šiSNSï¼ˆInternet Storage Name Serviceï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€iSCSIã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ç‰¹å®šã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®iSCSIã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

iSCSIã‚µãƒ¼ãƒ“ã‚¹ã®åˆ—æŒ™ã¯ã€ãƒšãƒ³ãƒ†ã‚¹ãƒˆã®é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ”»æ’ƒè€…ã¯ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®è„†å¼±æ€§ã‚’ç‰¹å®šã—ã€æ”»æ’ƒã®æ‰‹æ³•ã‚’è¨ˆç”»ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```
nmap -sV --script=iscsi-info -p 3260 192.168.xx.xx
```
ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€èªè¨¼ãŒå¿…è¦ã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚

### [ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹](../generic-methodologies-and-resources/brute-force.md#iscsi)

### [Linuxã§ã®ISCSIã®ãƒã‚¦ãƒ³ãƒˆ](https://www.synology.com/en-us/knowledgebase/DSM/tutorial/Virtualization/How\_to\_set\_up\_and\_use\_iSCSI\_target\_on\_Linux)

**æ³¨æ„:** ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒç™ºè¦‹ã•ã‚Œã‚‹ã¨ã€ç•°ãªã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒªã‚¹ãƒˆã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€iSCSIã‚µãƒ¼ãƒ“ã‚¹ãŒNATã¾ãŸã¯ä»®æƒ³IPçµŒç”±ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹å ´åˆã«èµ·ã“ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã€`iscsiadmin`ã¯æ¥ç¶šã«å¤±æ•—ã—ã¾ã™ã€‚ã“ã‚Œã«ã¯2ã¤ã®èª¿æ•´ãŒå¿…è¦ã§ã™ã€‚1ã¤ã¯ã€è‡ªå‹•çš„ã«ä½œæˆã•ã‚ŒãŸãƒãƒ¼ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã€ã‚‚ã†1ã¤ã¯ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«å«ã¾ã‚Œã‚‹`default`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã™ã€‚

ä¾‹ãˆã°ã€123.123.123.123ã®ãƒãƒ¼ãƒˆ3260ã§iSCSIã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«æ¥ç¶šã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚iSCSIã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã¯å®Ÿéš›ã«ã¯192.168.1.2ã«ã‚ã‚Šã¾ã™ãŒã€NATçµŒç”±ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚isciadmã¯ã€_å…¬é–‹_ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã¯ãªãã€_å†…éƒ¨_ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™»éŒ²ã—ã¾ã™ã€‚
```
iscsiadm -m discovery -t sendtargets -p 123.123.123.123:3260
192.168.1.2:3260,1 iqn.1992-05.com.emc:fl1001433000190000-3-vnxe
[...]
```
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ï¼š
```
/etc/iscsi/nodes/iqn.1992-05.com.emc:fl1001433000190000-3-vnxe/192.168.1.2\,3260\,1/
```
ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã¯ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«æ¥ç¶šã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®è¨­å®šãŒå«ã¾ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚

1. `/etc/iscsi/nodes/iqn.1992-05.com.emc:fl1001433000190000-3-vnxe/192.168.1.2\,3260\,1/` ã‚’ `/etc/iscsi/nodes/iqn.1992-05.com.emc:fl1001433000190000-3-vnxe/123.123.123.123\,3260\,1/` ã«åå‰ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
2. `/etc/iscsi/nodes/iqn.1992-05.com.emc:fl1001433000190000-3-vnxe/123.123.123.123\,3260\,1/default` å†…ã® `node.conn[0].address` ã®è¨­å®šã‚’ã€192.168.1.2 ã®ä»£ã‚ã‚Šã« 123.123.123.123 ã‚’æŒ‡ã™ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼š`sed -i 's/192.168.1.2/123.123.123.123/g' /etc/iscsi/nodes/iqn.1992-05.com.emc:fl1001433000190000-3-vnxe/123.123.123.123\,3260\,1/default`

ãƒªãƒ³ã‚¯å†…ã®æ‰‹é †ã«å¾“ã£ã¦ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### [Windowsã§ISCSIã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ee338476\(v=ws.10\)?redirectedfrom=MSDN)

## **æ‰‹å‹•åˆ—æŒ™**
```bash
sudo apt-get install open-iscsi
```
ã¾ãšæœ€åˆã«ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®èƒŒå¾Œã«ã‚ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®åå‰ã‚’**ç‰¹å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™**ï¼š
```
iscsiadm -m discovery -t sendtargets -p 123.123.123.123:3260
123.123.123.123:3260,1 iqn.1992-05.com.emc:fl1001433000190000-3-vnxe
[2a01:211:7b7:1223:211:32ff:fea9:fab9]:3260,1 iqn.2000-01.com.synology:asd3.Target-1.d0280fd382
[fe80::211:3232:fab9:1223]:3260,1 iqn.2000-01.com.synology:Oassdx.Target-1.d0280fd382
```
_æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ãã‚Œã¯ã€**ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«åˆ°é”ã§ãã‚‹**ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®I**Pã¨ãƒãƒ¼ãƒˆ**ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ä½¿ç”¨ã—ãŸã‚‚ã®ã¨ã¯ç•°ãªã‚‹**å†…éƒ¨IPã‚„ç•°ãªã‚‹IP**ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚_

æ¬¡ã«ã€å„è¡Œã®**å°åˆ·ã•ã‚ŒãŸæ–‡å­—åˆ—ã®2ç•ªç›®ã®éƒ¨åˆ†**ï¼ˆæœ€åˆã®è¡Œã‹ã‚‰_iqn.1992-05.com.emc:fl1001433000190000-3-vnxe_ï¼‰ã‚’**ã‚­ãƒ£ãƒƒãƒ**ã—ã¦ã€**ãƒ­ã‚°ã‚¤ãƒ³ã‚’è©¦ã¿ã¾ã™**ï¼š
```bash
iscsiadm -m node --targetname="iqn.1992-05.com.emc:fl1001433000190000-3-vnxe" -p 123.123.123.123:3260 --login
Logging in to [iface: default, target: iqn.1992-05.com.emc:fl1001433000190000-3-vnxe, portal: 123.123.123.123,3260] (multiple)
Login to [iface: default, target: iqn.1992-05.com.emc:fl1001433000190000-3-vnxe, portal: 123.123.123.123,3260] successful.
```
ãã®å¾Œã€`â€“logout`ã‚’ä½¿ç”¨ã—ã¦**ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
iscsiadm -m node --targetname="iqn.1992-05.com.emc:fl1001433000190000-3-vnxe" -p 123.123.123.123:3260 --logout
Logging out of session [sid: 6, target: iqn.1992-05.com.emc:fl1001433000190000-3-vnxe, portal: 123.123.123.123,3260]
Logout of [sid: 6, target: iqn.1992-05.com.emc:fl1001433000190000-3-vnxe, portal: 123.123.123.123,3260] successful.
```
**ã•ã‚‰ãªã‚‹æƒ…å ±**ã¯ã€`--login`/`--logout`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã›ãšã«è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
iscsiadm -m node --targetname="iqn.1992-05.com.emc:fl1001433000190000-3-vnxe" -p 123.123.123.123:3260
# BEGIN RECORD 2.0-873
node.name = iqn.1992-05.com.emc:fl1001433000190000-3-vnxe
node.tpgt = 1
node.startup = manual
node.leading_login = No
iface.hwaddress = <empty>
iface.ipaddress = <empty>
iface.iscsi_ifacename = default
iface.net_ifacename = <empty>
iface.transport_name = tcp
iface.initiatorname = <empty>
iface.bootproto = <empty>
iface.subnet_mask = <empty>
iface.gateway = <empty>
iface.ipv6_autocfg = <empty>
iface.linklocal_autocfg = <empty>
iface.router_autocfg = <empty>
iface.ipv6_linklocal = <empty>
iface.ipv6_router = <empty>
iface.state = <empty>
iface.vlan_id = 0
iface.vlan_priority = 0
iface.vlan_state = <empty>
iface.iface_num = 0
iface.mtu = 0
iface.port = 0
node.discovery_address = 192.168.xx.xx
node.discovery_port = 3260
node.discovery_type = send_targets
node.session.initial_cmdsn = 0
node.session.initial_login_retry_max = 8
node.session.xmit_thread_priority = -20
node.session.cmds_max = 128
node.session.queue_depth = 32
node.session.nr_sessions = 1
node.session.auth.authmethod = None
node.session.auth.username = <empty>
node.session.auth.password = <empty>
node.session.auth.username_in = <empty>
node.session.auth.password_in = <empty>
node.session.timeo.replacement_timeout = 120
node.session.err_timeo.abort_timeout = 15
node.session.err_timeo.lu_reset_timeout = 30
node.session.err_timeo.tgt_reset_timeout = 30
node.session.err_timeo.host_reset_timeout = 60
node.session.iscsi.FastAbort = Yes
node.session.iscsi.InitialR2T = No
node.session.iscsi.ImmediateData = Yes
node.session.iscsi.FirstBurstLength = 262144
node.session.iscsi.MaxBurstLength = 16776192
node.session.iscsi.DefaultTime2Retain = 0
node.session.iscsi.DefaultTime2Wait = 2
node.session.iscsi.MaxConnections = 1
node.session.iscsi.MaxOutstandingR2T = 1
node.session.iscsi.ERL = 0
node.conn[0].address = 192.168.xx.xx
node.conn[0].port = 3260
node.conn[0].startup = manual
node.conn[0].tcp.window_size = 524288
node.conn[0].tcp.type_of_service = 0
node.conn[0].timeo.logout_timeout = 15
node.conn[0].timeo.login_timeout = 15
node.conn[0].timeo.auth_timeout = 45
node.conn[0].timeo.noop_out_interval = 5
node.conn[0].timeo.noop_out_timeout = 5
node.conn[0].iscsi.MaxXmitDataSegmentLength = 0
node.conn[0].iscsi.MaxRecvDataSegmentLength = 262144
node.conn[0].iscsi.HeaderDigest = None
node.conn[0].iscsi.DataDigest = None
node.conn[0].iscsi.IFMarker = No
node.conn[0].iscsi.OFMarker = No
# END RECORD
```
**åŸºæœ¬çš„ãªã‚µãƒ–ãƒãƒƒãƒˆåˆ—æŒ™ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒ** [**iscsiadm**](https://github.com/bitvijays/Pentest-Scripts/tree/master/Vulnerability\_Analysis/isciadm) **ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚**

## **Shodan**

* `port:3260 AuthMethod`

## **å‚è€ƒæ–‡çŒ®**

{% embed url="https://bitvijays.github.io/LFF-IPS-P2-VulnerabilityAnalysis.html" %}

<details>

<summary><a href="https://cloud.hacktricks.xyz/pentesting-cloud/pentesting-cloud-methodology"><strong>â˜ï¸ HackTricks Cloud â˜ï¸</strong></a> -<a href="https://twitter.com/hacktricks_live"><strong>ğŸ¦ Twitter ğŸ¦</strong></a> - <a href="https://www.twitch.tv/hacktricks_live/schedule"><strong>ğŸ™ï¸ Twitch ğŸ™ï¸</strong></a> - <a href="https://www.youtube.com/@hacktricks_LIVE"><strong>ğŸ¥ Youtube ğŸ¥</strong></a></summary>

- **ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¼æ¥­ã§åƒã„ã¦ã„ã¾ã™ã‹ï¼Ÿ** **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼ã—ãŸã„ã§ã™ã‹**ï¼Ÿã¾ãŸã¯ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚Šã€HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚Š**ã—ãŸã„ã§ã™ã‹ï¼Ÿ[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼

- [**The PEASS Family**](https://opensea.io/collection/the-peass-family) **ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†**ã€**ç‹¬å çš„ãªNFTã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**ã§ã™ã€‚

- [**å…¬å¼ã®PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚

- **[ğŸ’¬](https://emojipedia.org/speech-balloon/) Discordã‚°ãƒ«ãƒ¼ãƒ—**ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/hacktricks_live)**ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„**ã€‚

- **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€[hacktricksãƒªãƒã‚¸ãƒˆãƒª](https://github.com/carlospolop/hacktricks)ã¨[hacktricks-cloudãƒªãƒã‚¸ãƒˆãƒª](https://github.com/carlospolop/hacktricks-cloud)**ã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>
