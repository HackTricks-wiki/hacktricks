<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>


## Informaci贸n B谩sica

**PAM (M贸dulos de Autenticaci贸n Enchufables)** act煤a como un mecanismo de seguridad que **verifica la identidad de los usuarios que intentan acceder a los servicios inform谩ticos**, controlando su acceso en funci贸n de varios criterios. Es como un portero digital, asegurando que solo los usuarios autorizados puedan interactuar con servicios espec铆ficos, al mismo tiempo que potencialmente limita su uso para evitar sobrecargas del sistema.

### Archivos de Configuraci贸n

- Los **sistemas Solaris y basados en UNIX** suelen utilizar un archivo de configuraci贸n central ubicado en `/etc/pam.conf`.
- Los **sistemas Linux** prefieren un enfoque de directorio, almacenando configuraciones espec铆ficas del servicio dentro de `/etc/pam.d`. Por ejemplo, el archivo de configuraci贸n para el servicio de inicio de sesi贸n se encuentra en `/etc/pam.d/login`.

Un ejemplo de una configuraci贸n PAM para el servicio de inicio de sesi贸n podr铆a verse as铆:
```text
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
### **Reinos de Gesti贸n de PAM**

Estos reinos, o grupos de gesti贸n, incluyen **auth**, **account**, **password** y **session**, cada uno responsable de diferentes aspectos del proceso de autenticaci贸n y gesti贸n de sesiones:

- **Auth**: Valida la identidad del usuario, a menudo solicitando una contrase帽a.
- **Account**: Maneja la verificaci贸n de la cuenta, verificando condiciones como la membres铆a a un grupo o restricciones de hora del d铆a.
- **Password**: Gestiona las actualizaciones de contrase帽as, incluyendo comprobaciones de complejidad o prevenci贸n de ataques de diccionario.
- **Session**: Gestiona acciones durante el inicio o fin de una sesi贸n de servicio, como montar directorios o establecer l铆mites de recursos.

### **Controles de M贸dulos PAM**

Los controles dictan la respuesta del m贸dulo ante el 茅xito o el fracaso, influyendo en el proceso de autenticaci贸n en general. Estos incluyen:

- **Required**: El fracaso de un m贸dulo requerido resulta en un fracaso eventual, pero solo despu茅s de que se verifiquen todos los m贸dulos subsiguientes.
- **Requisite**: Terminaci贸n inmediata del proceso al fallar.
- **Sufficient**: El 茅xito evita el resto de las comprobaciones del mismo reino a menos que falle un m贸dulo subsiguiente.
- **Optional**: Solo causa un fallo si es el 煤nico m贸dulo en la pila.

### Escenario de Ejemplo

En una configuraci贸n con m煤ltiples m贸dulos de autenticaci贸n, el proceso sigue un orden estricto. Si el m贸dulo `pam_securetty` encuentra que el terminal de inicio de sesi贸n no est谩 autorizado, los inicios de sesi贸n de root se bloquean, sin embargo, todos los m贸dulos se procesan debido a su estado "required". El `pam_env` establece variables de entorno, potencialmente ayudando en la experiencia del usuario. Los m贸dulos `pam_ldap` y `pam_unix` trabajan juntos para autenticar al usuario, con `pam_unix` intentando usar una contrase帽a suministrada previamente, mejorando la eficiencia y flexibilidad en los m茅todos de autenticaci贸n.

# Referencias
* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)


<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
