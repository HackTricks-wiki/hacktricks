# Configuração do Burp Suite para iOS

{{#include ../../banners/hacktricks-training.md}}

<figure><img src="../../images/image (48).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) para construir e **automatizar fluxos de trabalho** facilmente com as **ferramentas mais avançadas** da comunidade.\
Acesse hoje:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}

## Instalando o Certificado Burp em Dispositivos iOS

Para análise segura de tráfego web e SSL pinning em dispositivos iOS, o Burp Suite pode ser utilizado através do **Burp Mobile Assistant** ou via configuração manual. Abaixo está um guia resumido sobre ambos os métodos:

### Instalação Automatizada com Burp Mobile Assistant

O **Burp Mobile Assistant** simplifica o processo de instalação do Certificado Burp, configuração do proxy e SSL Pinning. Orientações detalhadas podem ser encontradas na [documentação oficial da PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### Passos de Instalação Manual

1. **Configuração do Proxy:** Comece configurando o Burp como proxy nas configurações de Wi-Fi do iPhone.
2. **Download do Certificado:** Navegue até `http://burp` no navegador do seu dispositivo para baixar o certificado.
3. **Instalação do Certificado:** Instale o perfil baixado via **Ajustes** > **Geral** > **VPN & Gerenciamento de Dispositivos**, em seguida, habilite a confiança para a CA da PortSwigger em **Configurações de Confiança do Certificado**.

### Configurando um Proxy de Interceptação

A configuração permite a análise de tráfego entre o dispositivo iOS e a internet através do Burp, exigindo uma rede Wi-Fi que suporte tráfego cliente a cliente. Se não estiver disponível, uma conexão USB via usbmuxd pode servir como alternativa. Os tutoriais da PortSwigger fornecem instruções detalhadas sobre [configuração do dispositivo](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) e [instalação do certificado](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Configuração Avançada para Dispositivos Jailbroken

Para usuários com dispositivos jailbroken, SSH sobre USB (via **iproxy**) oferece um método para direcionar o tráfego diretamente através do Burp:

1.  **Estabelecer Conexão SSH:** Use iproxy para encaminhar SSH para localhost, permitindo a conexão do dispositivo iOS ao computador que executa o Burp.

```bash
iproxy 2222 22
```

2.  **Encaminhamento de Porta Remota:** Encaminhe a porta 8080 do dispositivo iOS para o localhost do computador para permitir acesso direto à interface do Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```

3.  **Configuração de Proxy Global:** Por fim, configure as configurações de Wi-Fi do dispositivo iOS para usar um proxy manual, direcionando todo o tráfego web através do Burp.

### Monitoramento/Sniffing Completo da Rede

O monitoramento do tráfego de dispositivos não-HTTP pode ser realizado de forma eficiente usando **Wireshark**, uma ferramenta capaz de capturar todas as formas de tráfego de dados. Para dispositivos iOS, o monitoramento de tráfego em tempo real é facilitado pela criação de uma Interface Virtual Remota, um processo detalhado [neste post do Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Antes de começar, a instalação do **Wireshark** em um sistema macOS é um pré-requisito.

O procedimento envolve várias etapas-chave:

1. Inicie uma conexão entre o dispositivo iOS e o host macOS via USB.
2. Determine o **UDID** do dispositivo iOS, um passo necessário para o monitoramento de tráfego. Isso pode ser feito executando um comando no Terminal do macOS:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Após a identificação do UDID, **Wireshark** deve ser aberto e a interface "rvi0" selecionada para captura de dados.  
4. Para monitoramento direcionado, como capturar tráfego HTTP relacionado a um endereço IP específico, os Filtros de Captura do Wireshark podem ser utilizados:

## Instalação do Certificado Burp no Simulador

- **Exportar Certificado Burp**

Em _Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../images/image (534).png>)

- **Arraste e solte** o certificado dentro do Emulador  
- **Dentro do emulador**, vá para _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_ e **verifique o certificado**  
- **Dentro do emulador**, vá para _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_ e **ative o PortSwigger CA**

![](<../../images/image (1048).png>)

**Parabéns, você configurou com sucesso o Certificado CA do Burp no simulador iOS**

> [!NOTE]  
> **O simulador iOS usará as configurações de proxy do MacOS.**

### Configuração de Proxy do MacOS

Passos para configurar o Burp como proxy:

- Vá para _System Preferences_ --> _Network_ --> _Advanced_  
- Na aba _Proxies_, marque _Web Proxy (HTTP)_ e _Secure Web Proxy (HTTPS)_  
- Em ambas as opções, configure _127.0.0.1:8080_

![](<../../images/image (431).png>)

- Clique em _**Ok**_ e depois em _**Apply**_

<figure><img src="../../images/image (48).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) para construir e **automatizar fluxos de trabalho** facilmente, impulsionados pelas **ferramentas comunitárias mais avançadas** do mundo.\
Acesse hoje:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}
{{#include ../../banners/hacktricks-training.md}}
