# Konfiguracja Burp Suite dla iOS

{{#include ../../banners/hacktricks-training.md}}

<figure><img src="../../images/image (48).png" alt=""><figcaption></figcaption></figure>

\
Użyj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios), aby łatwo budować i **automatyzować przepływy pracy** zasilane przez **najbardziej zaawansowane** narzędzia społecznościowe na świecie.\
Uzyskaj dostęp już dziś:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}

## Instalacja certyfikatu Burp na urządzeniach iOS

Aby przeprowadzić analizę bezpiecznego ruchu internetowego i SSL pinning na urządzeniach iOS, Burp Suite można wykorzystać zarówno za pomocą **Burp Mobile Assistant**, jak i poprzez ręczną konfigurację. Poniżej znajduje się podsumowany przewodnik po obu metodach:

### Automatyczna instalacja z Burp Mobile Assistant

**Burp Mobile Assistant** upraszcza proces instalacji certyfikatu Burp, konfiguracji proxy i SSL Pinning. Szczegółowe wskazówki można znaleźć w [oficjalnej dokumentacji PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### Kroki instalacji ręcznej

1. **Konfiguracja proxy:** Rozpocznij od ustawienia Burp jako proxy w ustawieniach Wi-Fi iPhone'a.
2. **Pobieranie certyfikatu:** Przejdź do `http://burp` w przeglądarce urządzenia, aby pobrać certyfikat.
3. **Instalacja certyfikatu:** Zainstaluj pobrany profil przez **Ustawienia** > **Ogólne** > **VPN i zarządzanie urządzeniem**, a następnie włącz zaufanie dla CA PortSwigger w **Ustawieniach zaufania certyfikatu**.

### Konfiguracja proxy przechwytującego

Konfiguracja umożliwia analizę ruchu między urządzeniem iOS a internetem przez Burp, wymagając sieci Wi-Fi, która obsługuje ruch klient-klient. Jeśli nie jest dostępna, połączenie USB przez usbmuxd może służyć jako alternatywa. Samouczki PortSwigger dostarczają szczegółowych instrukcji dotyczących [konfiguracji urządzenia](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) oraz [instalacji certyfikatu](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Zaawansowana konfiguracja dla urządzeń z jailbreakiem

Dla użytkowników z urządzeniami z jailbreakiem, SSH przez USB (za pomocą **iproxy**) oferuje metodę kierowania ruchu bezpośrednio przez Burp:

1.  **Nawiązanie połączenia SSH:** Użyj iproxy, aby przekierować SSH na localhost, umożliwiając połączenie z urządzenia iOS do komputera uruchamiającego Burp.

```bash
iproxy 2222 22
```

2.  **Przekierowanie portów zdalnych:** Przekieruj port 8080 urządzenia iOS na localhost komputera, aby umożliwić bezpośredni dostęp do interfejsu Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```

3.  **Ustawienie globalnego proxy:** Na koniec skonfiguruj ustawienia Wi-Fi urządzenia iOS, aby używało ręcznego proxy, kierując cały ruch internetowy przez Burp.

### Pełne monitorowanie/słuchanie sieci

Monitorowanie ruchu urządzenia, który nie jest HTTP, można efektywnie przeprowadzić za pomocą **Wireshark**, narzędzia zdolnego do przechwytywania wszystkich form ruchu danych. Dla urządzeń iOS, monitorowanie ruchu w czasie rzeczywistym jest ułatwione poprzez stworzenie Zdalnego Wirtualnego Interfejsu, co jest szczegółowo opisane w [tym poście na Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Przed rozpoczęciem, instalacja **Wireshark** na systemie macOS jest warunkiem wstępnym.

Procedura obejmuje kilka kluczowych kroków:

1. Nawiąż połączenie między urządzeniem iOS a hostem macOS przez USB.
2. Ustal **UDID** urządzenia iOS, co jest niezbędnym krokiem do monitorowania ruchu. Można to zrobić, wykonując polecenie w Terminalu macOS:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Po zidentyfikowaniu UDID, **Wireshark** należy otworzyć i wybrać interfejs "rvi0" do przechwytywania danych.  
4. W celu monitorowania docelowego, takiego jak przechwytywanie ruchu HTTP związanego z określonym adresem IP, można zastosować filtry przechwytywania Wireshark:

## Instalacja certyfikatu Burp w symulatorze

- **Eksportuj certyfikat Burp**

W _Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../images/image (534).png>)

- **Przeciągnij i upuść** certyfikat do emulatora  
- **W emulatorze** przejdź do _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_, i **zweryfikuj certyfikat**  
- **W emulatorze** przejdź do _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_, i **włącz PortSwigger CA**

![](<../../images/image (1048).png>)

**Gratulacje, pomyślnie skonfigurowałeś certyfikat Burp CA w symulatorze iOS**

> [!NOTE]  
> **Symulator iOS będzie używał konfiguracji proxy z MacOS.**

### Konfiguracja proxy w MacOS

Kroki do skonfigurowania Burp jako proxy:

- Przejdź do _System Preferences_ --> _Network_ --> _Advanced_  
- W zakładce _Proxies_ zaznacz _Web Proxy (HTTP)_ i _Secure Web Proxy (HTTPS)_  
- W obu opcjach skonfiguruj _127.0.0.1:8080_

![](<../../images/image (431).png>)

- Kliknij na _**Ok**_ a następnie na _**Apply**_

<figure><img src="../../images/image (48).png" alt=""><figcaption></figcaption></figure>

\
Użyj [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios), aby łatwo budować i **automatyzować przepływy pracy** zasilane przez **najbardziej zaawansowane** narzędzia społeczności na świecie.\
Uzyskaj dostęp już dziś:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}
{{#include ../../banners/hacktricks-training.md}}
