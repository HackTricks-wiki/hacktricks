# Configuration de Burp Suite pour iOS

{{#include ../../banners/hacktricks-training.md}}

<figure><img src="../../images/image (48).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) pour créer et **automatiser des flux de travail** facilement grâce aux **outils communautaires les plus avancés** au monde.\
Accédez dès aujourd'hui :

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}

## Installation du certificat Burp sur les appareils iOS

Pour l'analyse sécurisée du trafic web et le SSL pinning sur les appareils iOS, Burp Suite peut être utilisé soit via le **Burp Mobile Assistant**, soit par configuration manuelle. Voici un guide résumé sur les deux méthodes :

### Installation automatisée avec Burp Mobile Assistant

Le **Burp Mobile Assistant** simplifie le processus d'installation du certificat Burp, de la configuration du proxy et du SSL Pinning. Des instructions détaillées peuvent être trouvées dans la [documentation officielle de PortSwigger](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing).

### Étapes d'installation manuelle

1. **Configuration du proxy :** Commencez par définir Burp comme proxy dans les paramètres Wi-Fi de l'iPhone.
2. **Téléchargement du certificat :** Accédez à `http://burp` sur le navigateur de votre appareil pour télécharger le certificat.
3. **Installation du certificat :** Installez le profil téléchargé via **Réglages** > **Général** > **VPN et gestion des appareils**, puis activez la confiance pour le CA PortSwigger dans **Paramètres de confiance des certificats**.

### Configuration d'un proxy d'interception

La configuration permet l'analyse du trafic entre l'appareil iOS et Internet via Burp, nécessitant un réseau Wi-Fi qui prend en charge le trafic client à client. Si cela n'est pas disponible, une connexion USB via usbmuxd peut servir d'alternative. Les tutoriels de PortSwigger fournissent des instructions détaillées sur la [configuration de l'appareil](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) et [l'installation du certificat](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device).

### Configuration avancée pour les appareils jailbreakés

Pour les utilisateurs d'appareils jailbreakés, SSH via USB (via **iproxy**) offre une méthode pour acheminer le trafic directement à travers Burp :

1.  **Établir une connexion SSH :** Utilisez iproxy pour rediriger SSH vers localhost, permettant la connexion de l'appareil iOS à l'ordinateur exécutant Burp.

```bash
iproxy 2222 22
```

2.  **Redirection de port à distance :** Redirigez le port 8080 de l'appareil iOS vers le localhost de l'ordinateur pour permettre un accès direct à l'interface de Burp.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```

3.  **Paramètre de proxy global :** Enfin, configurez les paramètres Wi-Fi de l'appareil iOS pour utiliser un proxy manuel, dirigeant tout le trafic web à travers Burp.

### Surveillance/Analyse complète du réseau

La surveillance du trafic non-HTTP des appareils peut être efficacement réalisée à l'aide de **Wireshark**, un outil capable de capturer toutes les formes de trafic de données. Pour les appareils iOS, la surveillance du trafic en temps réel est facilitée par la création d'une interface virtuelle distante, un processus détaillé dans [ce post Stack Overflow](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819). Avant de commencer, l'installation de **Wireshark** sur un système macOS est une condition préalable.

La procédure implique plusieurs étapes clés :

1. Initiez une connexion entre l'appareil iOS et l'hôte macOS via USB.
2. Déterminez le **UDID** de l'appareil iOS, une étape nécessaire pour la surveillance du trafic. Cela peut être fait en exécutant une commande dans le Terminal macOS :
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. Après l'identification de l'UDID, **Wireshark** doit être ouvert et l'interface "rvi0" sélectionnée pour la capture de données.  
4. Pour un monitoring ciblé, comme la capture du trafic HTTP lié à une adresse IP spécifique, les filtres de capture de Wireshark peuvent être utilisés :

## Installation du Certificat Burp dans le Simulateur

- **Exporter le Certificat Burp**

Dans _Proxy_ --> _Options_ --> _Exporter le certificat CA_ --> _Certificat au format DER_

![](<../../images/image (534).png>)

- **Glisser-déposer** le certificat dans l'Émulateur  
- **Dans l'émulateur**, allez à _Réglages_ --> _Général_ --> _Profil_ --> _PortSwigger CA_, et **vérifiez le certificat**  
- **Dans l'émulateur**, allez à _Réglages_ --> _Général_ --> _À propos_ --> _Paramètres de confiance des certificats_, et **activez PortSwigger CA**

![](<../../images/image (1048).png>)

**Félicitations, vous avez configuré avec succès le Certificat CA Burp dans le simulateur iOS**

> [!NOTE]  
> **Le simulateur iOS utilisera les configurations de proxy de MacOS.**

### Configuration du Proxy MacOS

Étapes pour configurer Burp en tant que proxy :

- Allez à _Préférences Système_ --> _Réseau_ --> _Avancé_  
- Dans l'onglet _Proxies_, cochez _Proxy Web (HTTP)_ et _Proxy Web Sécurisé (HTTPS)_  
- Dans les deux options, configurez _127.0.0.1:8080_

![](<../../images/image (431).png>)

- Cliquez sur _**Ok**_ puis sur _**Appliquer**_

<figure><img src="../../images/image (48).png" alt=""><figcaption></figcaption></figure>

\
Utilisez [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) pour construire et **automatiser facilement des flux de travail** alimentés par les **outils communautaires les plus avancés** au monde.\
Accédez dès aujourd'hui :

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}
{{#include ../../banners/hacktricks-training.md}}
