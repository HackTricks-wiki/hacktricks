# iOS Burp Suite Yapılandırması

{{#include ../../banners/hacktricks-training.md}}

## iOS Cihazlarda Burp Sertifikasının Yüklenmesi

Güvenli web trafiği analizi ve SSL pinning için iOS cihazlarda Burp Suite, **Burp Mobile Assistant** aracılığıyla veya manuel yapılandırma ile kullanılabilir. Aşağıda her iki yöntem için özet bir kılavuz bulunmaktadır:

### Burp Mobile Assistant ile Otomatik Yükleme

**Burp Mobile Assistant**, Burp Sertifikasının yüklenmesi, proxy yapılandırması ve SSL Pinning işlemlerini basitleştirir. Ayrıntılı rehber [PortSwigger'ın resmi belgelerinde](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing) bulunabilir.

### Manuel Yükleme Adımları

1. **Proxy Yapılandırması:** Öncelikle Burp'ı iPhone'un Wi-Fi ayarlarında proxy olarak ayarlayın.
2. **Sertifika İndirme:** Cihazınızın tarayıcısında `http://burp` adresine giderek sertifikayı indirin.
3. **Sertifika Yükleme:** İndirilen profili **Ayarlar** > **Genel** > **VPN & Cihaz Yönetimi** üzerinden yükleyin, ardından **Sertifika Güven Ayarları** altında PortSwigger CA için güveni etkinleştirin.

### Bir Kesme Proxy'sinin Yapılandırılması

Bu yapılandırma, iOS cihazı ile internet arasındaki trafiği Burp üzerinden analiz etmeyi sağlar ve istemci-istemci trafiğini destekleyen bir Wi-Fi ağı gerektirir. Eğer mevcut değilse, usbmuxd aracılığıyla bir USB bağlantısı alternatif olarak kullanılabilir. PortSwigger'ın eğitimleri, [cihaz yapılandırması](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp) ve [sertifika yükleme](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device) hakkında derinlemesine talimatlar sunmaktadır.

### Jailbroken Cihazlar için Gelişmiş Yapılandırma

Jailbroken cihazlara sahip kullanıcılar için, USB üzerinden SSH ( **iproxy** aracılığıyla) trafiği doğrudan Burp üzerinden yönlendirmek için bir yöntem sunar:

1.  **SSH Bağlantısını Kurun:** iproxy kullanarak SSH'yi localhost'a yönlendirin, bu sayede iOS cihazı ile Burp'ı çalıştıran bilgisayar arasında bağlantı sağlanır.

```bash
iproxy 2222 22
```

2.  **Uzak Port Yönlendirme:** iOS cihazının 8080 portunu bilgisayarın localhost'una yönlendirerek Burp arayüzüne doğrudan erişimi etkinleştirin.

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```

3.  **Küresel Proxy Ayarı:** Son olarak, iOS cihazının Wi-Fi ayarlarını manuel proxy kullanacak şekilde yapılandırarak tüm web trafiğini Burp üzerinden yönlendirin.

### Tam Ağ İzleme/İzleme

HTTP dışındaki cihaz trafiğinin izlenmesi, tüm veri trafiğini yakalayabilen **Wireshark** aracı kullanılarak verimli bir şekilde gerçekleştirilebilir. iOS cihazları için gerçek zamanlı trafik izleme, bir Uzak Sanal Arayüz oluşturularak sağlanır; bu süreç [bu Stack Overflow gönderisinde](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819) detaylandırılmıştır. Başlamadan önce, macOS sistemine **Wireshark** yüklenmesi gerekmektedir.

Prosedür birkaç ana adımı içerir:

1. iOS cihazı ile macOS ana bilgisayarı arasında USB üzerinden bir bağlantı başlatın.
2. Trafik izleme için gerekli olan iOS cihazının **UDID**'sini belirleyin. Bu, macOS Terminal'inde bir komut çalıştırarak yapılabilir:
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. UDID'nin belirlenmesinden sonra, **Wireshark** açılmalı ve veri yakalama için "rvi0" arayüzü seçilmelidir.  
4. Belirli bir IP adresine ilişkin HTTP trafiğini yakalamak gibi hedefli izleme için, Wireshark'ın Yakalama Filtreleri kullanılabilir:

## Simülatörde Burp Sertifika Kurulumu

- **Burp Sertifikasını Dışa Aktar**

_Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../images/image (534).png>)

- Sertifikayı Emülatör içine **Sürükleyip Bırakın**  
- **Emülatör içinde** _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_ yoluna gidin ve **sertifikayı doğrulayın**  
- **Emülatör içinde** _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_ yoluna gidin ve **PortSwigger CA'yı etkinleştirin**  

![](<../../images/image (1048).png>)

**Tebrikler, Burp CA Sertifikasını iOS simülatöründe başarıyla yapılandırdınız**

> [!NOTE]  
> **iOS simülatörü, MacOS'un proxy yapılandırmalarını kullanacaktır.**

### MacOS Proxy Yapılandırması

Burp'ı proxy olarak yapılandırma adımları:

- _System Preferences_ --> _Network_ --> _Advanced_ yoluna gidin  
- _Proxies_ sekmesinde _Web Proxy (HTTP)_ ve _Secure Web Proxy (HTTPS)_ seçeneklerini işaretleyin  
- Her iki seçenek için _127.0.0.1:8080_ yapılandırın  

![](<../../images/image (431).png>)

- _**Ok**_ butonuna tıklayın ve ardından _**Apply**_ butonuna tıklayın  


{{#include ../../banners/hacktricks-training.md}}
