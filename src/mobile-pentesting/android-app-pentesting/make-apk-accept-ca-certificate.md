{{#include ../../banners/hacktricks-training.md}}

Ορισμένες εφαρμογές δεν δέχονται πιστοποιητικά που έχουν κατεβάσει οι χρήστες, οπότε για να επιθεωρήσουμε την κίνηση του ιστού για ορισμένες εφαρμογές, πρέπει στην πραγματικότητα να αποσυμπιέσουμε την εφαρμογή & να προσθέσουμε μερικά πράγματα & να την ξανασυμπιέσουμε.

# Αυτόματα

Το εργαλείο [**https://github.com/shroudedcode/apk-mitm**](https://github.com/shroudedcode/apk-mitm) θα **αυτόματα** κάνει τις απαραίτητες αλλαγές στην εφαρμογή για να αρχίσει να καταγράφει τα αιτήματα και θα απενεργοποιήσει επίσης την πιστοποίηση πιστοποιητικών (αν υπάρχει).

# Χειροκίνητα

Αρχικά αποσυμπιέζουμε την εφαρμογή: `apktool d *file-name*.apk`

![](../../images/img9.png)

Στη συνέχεια, πηγαίνουμε στο αρχείο **Manifest.xml** & κυλάμε προς τα κάτω στην ετικέτα `<\application android>` & θα προσθέσουμε την παρακάτω γραμμή αν δεν υπάρχει ήδη:

`android:networkSecurityConfig="@xml/network_security_config"`

Πριν την προσθήκη:

![](../../images/img10.png)

Μετά την προσθήκη:

![](../../images/img11.png)

Τώρα πηγαίνουμε στον φάκελο **res/xml** & δημιουργούμε/τροποποιούμε ένα αρχείο με το όνομα network_security_config.xml με τα παρακάτω περιεχόμενα:
```html
<network-security-config>
<base-config>
<trust-anchors>
<!-- Trust preinstalled CAs -->
<certificates src="system" />
<!-- Additionally trust user added CAs -->
<certificates src="user" />
</trust-anchors>
</base-config>
</network-security-config>
```
Στη συνέχεια, αποθηκεύστε το αρχείο και βγείτε από όλους τους φακέλους και ξαναχτίστε το apk με την παρακάτω εντολή: `apktool b *folder-name/* -o *output-file.apk*`

![](../../images/img12.png)

Τέλος, χρειάζεται απλώς να **υπογράψετε τη νέα εφαρμογή**. [Διαβάστε αυτή την ενότητα της σελίδας Smali - Decompiling/\[Modifying\]/Compiling για να μάθετε πώς να την υπογράψετε](smali-changes.md#sing-the-new-apk).

{{#include ../../banners/hacktricks-training.md}}
