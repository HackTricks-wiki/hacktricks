{{#include ../../banners/hacktricks-training.md}}

Sommige toepassings hou nie van gebruikersafgelaaide sertifikate nie, so om webverkeer vir sommige toepassings te inspekteer, moet ons eintlik die toepassing dekompileer, 'n paar dinge byvoeg en dit weer compileer.

# Outomaties

Die hulpmiddel [**https://github.com/shroudedcode/apk-mitm**](https://github.com/shroudedcode/apk-mitm) sal **outomaties** die nodige veranderinge aan die toepassing aanbring om die versoeke te begin vasvang en sal ook sertifikaat-pinning deaktiveer (indien daar is).

# Handmatig

Eerstens dekompileer ons die app: `apktool d *file-name*.apk`

![](../../images/img9.png)

Dan gaan ons in die **Manifest.xml**-lêer en blaai af na die `<\application android>`-tag en ons gaan die volgende lyn byvoeg as dit nog nie daar is nie:

`android:networkSecurityConfig="@xml/network_security_config"`

Voor toevoeging:

![](../../images/img10.png)

Na toevoeging:

![](../../images/img11.png)

Nou gaan in die **res/xml**-map en skep/wysig 'n lêer genaamd network_security_config.xml met die volgende inhoud:
```markup
<network-security-config>
<base-config>
<trust-anchors>
<!-- Trust preinstalled CAs -->
<certificates src="system" />
<!-- Additionally trust user added CAs -->
<certificates src="user" />
</trust-anchors>
</base-config>
</network-security-config>
```
Dan stoor die lêer en gaan uit al die gidse uit en herbou die apk met die volgende opdrag: `apktool b *folder-name/* -o *output-file.apk*`

![](../../images/img12.png)

Laastens, moet jy net die **nuwe aansoek teken**. [Lees hierdie afdeling van die bladsy Smali - Decompiling/\[Modifying\]/Compiling om te leer hoe om dit te teken](smali-changes.md#sing-the-new-apk).

{{#include ../../banners/hacktricks-training.md}}
