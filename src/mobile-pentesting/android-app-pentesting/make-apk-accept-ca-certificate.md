{{#include ../../banners/hacktricks-training.md}}

Baadhi ya programu hazipendi vyeti vilivyopakuliwa na mtumiaji, hivyo ili kukagua trafiki ya wavuti kwa baadhi ya programu tunahitaji kweli kufungua upya programu hiyo na kuongeza mambo machache na kuirekebisha tena.

# Automatic

Zana [**https://github.com/shroudedcode/apk-mitm**](https://github.com/shroudedcode/apk-mitm) itafanya mabadiliko muhimu kwenye programu ili kuanza kukamata maombi na pia itazima certificate pinning (ikiwa ipo).

# Manual

Kwanza tunafungua upya programu: `apktool d *file-name*.apk`

![](../../images/img9.png)

Kisha tunaingia kwenye faili ya **Manifest.xml** na kuporomoka hadi kwenye tag ya `<\application android>` na tutongeza mstari ufuatao ikiwa haupo tayari:

`android:networkSecurityConfig="@xml/network_security_config"`

Kabla ya kuongeza:

![](../../images/img10.png)

Baada ya kuongeza:

![](../../images/img11.png)

Sasa ingia kwenye folda ya **res/xml** na uunde/badilisha faili inayoitwa network_security_config.xml yenye maudhui yafuatayo:
```html
<network-security-config>
<base-config>
<trust-anchors>
<!-- Trust preinstalled CAs -->
<certificates src="system" />
<!-- Additionally trust user added CAs -->
<certificates src="user" />
</trust-anchors>
</base-config>
</network-security-config>
```
Kisha hifadhi faili na kutoka kwenye saraka zote na ujenge tena apk kwa amri ifuatayo: `apktool b *folder-name/* -o *output-file.apk*`

![](../../images/img12.png)

Hatimaye, unahitaji tu **kusaini programu mpya**. [Soma sehemu hii ya ukurasa Smali - Decompiling/\[Modifying\]/Compiling ili kujifunza jinsi ya kuisaini](smali-changes.md#sing-the-new-apk).

{{#include ../../banners/hacktricks-training.md}}
