# Reverzija Nativnih Biblioteka

{{#include ../../banners/hacktricks-training.md}}

<figure><img src="/images/image (2).png" alt=""><figcaption></figcaption></figure>

Produbite svoje znanje u **Mobilnoj Bezbednosti** sa 8kSec Akademijom. Savladajte iOS i Android bezbednost kroz naše kurseve koji se mogu pratiti sopstvenim tempom i dobijite sertifikat:

{% embed url="https://academy.8ksec.io/" %}

**Za više informacija proverite:** [**https://maddiestone.github.io/AndroidAppRE/reversing_native_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing_native_libs.html)

Android aplikacije mogu koristiti nativne biblioteke, obično napisane u C ili C++, za zadatke koji zahtevaju visoke performanse. Kreatori malvera takođe koriste ove biblioteke, jer je teže izvršiti reverzno inženjerstvo nego DEX bajtkodu. Odeljak naglašava veštine reverznog inženjerstva prilagođene Androidu, umesto da uči jezike asemblera. ARM i x86 verzije biblioteka su obezbeđene za kompatibilnost.

### Ključne Tačke:

- **Nativne Biblioteke u Android Aplikacijama:**
- Koriste se za zadatke koji zahtevaju visoke performanse.
- Napisane u C ili C++, što otežava reverzno inženjerstvo.
- Pronađene u `.so` (deljeni objekat) formatu, slično Linux binarnim datotekama.
- Kreatori malvera preferiraju nativni kod kako bi otežali analizu.
- **Java Native Interface (JNI) & Android NDK:**
- JNI omogućava implementaciju Java metoda u nativnom kodu.
- NDK je set alata specifičnih za Android za pisanje nativnog koda.
- JNI i NDK povezuju Java (ili Kotlin) kod sa nativnim bibliotekama.
- **Učitavanje i Izvršavanje Biblioteka:**
- Biblioteke se učitavaju u memoriju koristeći `System.loadLibrary` ili `System.load`.
- JNI_OnLoad se izvršava prilikom učitavanja biblioteke.
- Java-deklarisane nativne metode povezuju se sa nativnim funkcijama, omogućavajući izvršavanje.
- **Povezivanje Java Metoda sa Nativnim Funkcijama:**
- **Dinamičko Povezivanje:** Imena funkcija u nativnim bibliotekama odgovaraju specifičnom obrascu, omogućavajući automatsko povezivanje.
- **Statčko Povezivanje:** Koristi `RegisterNatives` za povezivanje, pružajući fleksibilnost u imenovanju i strukturi funkcija.
- **Alati i Tehnike Reverznog Inženjerstva:**
- Alati poput Ghidra i IDA Pro pomažu u analizi nativnih biblioteka.
- `JNIEnv` je ključan za razumevanje JNI funkcija i interakcija.
- Vežbe su obezbeđene za praksu učitavanja biblioteka, povezivanja metoda i identifikacije nativnih funkcija.

### Resursi:

- **Učenje ARM Asemblera:**
- Preporučuje se za dublje razumevanje osnovne arhitekture.
- [Osnovi ARM Asemblera](https://azeria-labs.com/writing-arm-assembly-part-1/) iz Azeria Labs se preporučuje.
- **JNI & NDK Dokumentacija:**
- [Oracle-ova JNI Specifikacija](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
- [Android-ovi JNI Saveti](https://developer.android.com/training/articles/perf-jni)
- [Početak sa NDK](https://developer.android.com/ndk/guides/)
- **Debagovanje Nativnih Biblioteka:**
- [Debagovanje Android Nativnih Biblioteka koristeći JEB Decompiler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)

<figure><img src="/images/image (2).png" alt=""><figcaption></figcaption></figure>

Produbite svoje znanje u **Mobilnoj Bezbednosti** sa 8kSec Akademijom. Savladajte iOS i Android bezbednost kroz naše kurseve koji se mogu pratiti sopstvenim tempom i dobijite sertifikat:

{% embed url="https://academy.8ksec.io/" %}

{{#include ../../banners/hacktricks-training.md}}
