# ペンテスティング手法

{{#include ../banners/hacktricks-training.md}}


## ペンテスティング手法

<figure><img src="../images/HACKTRICKS-logo.svg" alt=""><figcaption></figcaption></figure>

_Hacktricksのロゴは_ [_@ppiernacho_](https://www.instagram.com/ppieranacho/)_によってデザインされました。_

### 0- 物理攻撃

攻撃したいマシンに**物理的アクセス**がありますか？いくつかの[**物理攻撃に関するトリック**](../hardware-physical-access/physical-attacks.md)や[**GUIアプリケーションからの脱出に関するトリック**](../hardware-physical-access/escaping-from-gui-applications.md)を読むべきです。

### 1 - [ネットワーク内のホストを発見する](pentesting-network/#discovering-hosts)/ [会社の資産を発見する](external-recon-methodology/)

**実施している**テストが**内部テストか外部テストかによって**、**会社のネットワーク内のホストを見つける**ことに興味があるか、**インターネット上の会社の資産を見つける**ことに興味があるかもしれません。

> [!NOTE]
> 外部テストを実施している場合、会社の内部ネットワークへのアクセスを取得したら、このガイドを再スタートする必要があります。

### **2-** [**ネットワークで楽しむ**](pentesting-network/) **(内部)**

**このセクションは内部テストを実施している場合にのみ適用されます。**\
ホストを攻撃する前に、**ネットワークからいくつかの資格情報を盗む**か、**データをスニッフィング**して**パッシブ/アクティブ（MitM）**にネットワーク内で何が見つかるかを学ぶことを好むかもしれません。[**ペンテスティングネットワーク**](pentesting-network/#sniffing)を読むことができます。

### 3- [ポートスキャン - サービス発見](pentesting-network/#scanning-hosts)

**ホストの脆弱性を探す**ときに最初に行うべきことは、どの**サービスがどのポートで実行されているかを知る**ことです。[**ホストのポートをスキャンするための基本ツール**](pentesting-network/#scanning-hosts)を見てみましょう。

### **4-** [サービスバージョンのエクスプロイトを検索](../generic-hacking/search-exploits.md)

どのサービスが実行されているか、そしておそらくそのバージョンを知ったら、**既知の脆弱性を検索する**必要があります。運が良ければ、シェルを取得するためのエクスプロイトがあるかもしれません...

### **5-** ペンテスティングサービス

実行中のサービスに特別なエクスプロイトがない場合は、**各サービスの一般的な誤設定を探す**べきです。

**この本の中には、最も一般的なサービスをペンテストするためのガイドがあります**（あまり一般的でないサービスも含む）。左のインデックスで**_**PENTESTING**_**セクションを検索してください**（サービスはデフォルトポート順に並んでいます）。

**特に** [**ペンテスティングWeb**](../network-services-pentesting/pentesting-web/) **部分に特別な言及をしたいと思います（最も広範な部分です）。**\
また、[**ソフトウェアの既知の脆弱性を見つける方法**](../generic-hacking/search-exploits.md)に関する小さなガイドもここにあります。

**インデックスにサービスがない場合は、Googleで他のチュートリアルを検索してください**。**追加してほしい場合は教えてください。** Googleで**何も見つからない場合は、自分で**ブラインドペンテスティング**を行い、**サービスに接続し、ファジングして応答を読む**ことから始めることができます（あれば）。

#### 5.1 自動ツール

**自動脆弱性評価を実行できるツールもいくつかあります。** **[**Legion**](https://github.com/carlospolop/legion)**を試してみることをお勧めします。これは、私が作成したツールで、この本にあるペンテスティングサービスに関するノートに基づいています。**

#### **5.2 ブルートフォースサービス**

いくつかのシナリオでは、**ブルートフォース**が**サービスを妥協する**のに役立つかもしれません。[**ここで異なるサービスのブルートフォースのチートシートを見つけてください**](../generic-hacking/brute-force.md)**。**

### 6- [フィッシング](phishing-methodology/)

この時点で興味深い脆弱性が見つからない場合は、**ネットワークに入るためにフィッシングを試みる必要があるかもしれません。**私のフィッシング手法を[こちら](phishing-methodology/)で読むことができます。

### **7-** [**シェルを取得する**](../generic-hacking/reverse-shells/)

何らかの方法で、**被害者でコードを実行する方法を見つけるべきです。**その後、[**リバースシェルを取得するために使用できるシステム内の可能なツールのリストが非常に役立ちます**](../generic-hacking/reverse-shells/)。

特にWindowsでは、**アンチウイルスを回避するための助けが必要かもしれません**：[**このページを確認してください**](../windows-hardening/av-bypass.md)**。**\\

### 8- 内部

シェルに問題がある場合は、ペンテスターにとって最も便利なコマンドの小さな**コンパイル**をここで見つけることができます：

- [**Linux**](../linux-hardening/useful-linux-commands.md)
- [**Windows (CMD)**](../windows-hardening/basic-cmd-for-pentesters.md)
- [**Windows (PS)**](../windows-hardening/basic-powershell-for-pentesters/)

### **9 -** [**エクスフィルトレーション**](../generic-hacking/exfiltration.md)

おそらく、**被害者からデータを抽出する**必要があるか、**何かを導入する**必要があるでしょう（特権昇格スクリプトなど）。**ここに、これらの目的で使用できる一般的なツールに関する** [**投稿があります**](../generic-hacking/exfiltration.md)**。**

### **10- 特権昇格**

#### **10.1- ローカル特権昇格**

ボックス内で**root/Administrator**でない場合は、**特権を昇格させる方法を見つけるべきです。**\
ここに、**[**Linux**](../linux-hardening/privilege-escalation/) **および** [**Windows**](../windows-hardening/windows-local-privilege-escalation/)**でローカルに特権を昇格させるためのガイドがあります。**\
また、**Windowsがどのように機能するかに関するこのページも確認してください**：

- [**認証、資格情報、トークン特権、UAC**](../windows-hardening/authentication-credentials-uac-and-efs/)
- [**NTLMの動作**](../windows-hardening/ntlm/)
- Windowsで[**資格情報を盗む方法**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md)
- [_**Active Directory**_に関するいくつかのトリック](../windows-hardening/active-directory-methodology/)

**WindowsおよびLinuxのローカル特権昇格パスを列挙するための最良のツールも確認してください**：[**Suite PEAS**](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)

#### **10.2- ドメイン特権昇格**

ここに、[**Active Directoryで特権を列挙、昇格、持続させるための最も一般的なアクションを説明する方法論があります**](../windows-hardening/active-directory-methodology/)。これはセクションのサブセクションに過ぎませんが、このプロセスはペンテスティング/レッドチームの任務において**非常にデリケート**である可能性があります。

### 11 - POST

#### **11**.1 - ルーティング

ホスト内でさらに多くの**パスワード**を見つけることができるか、**ユーザーの特権**で**他のマシンにアクセス**できるか確認してください。\
ここで、Windowsで[**パスワードをダンプするさまざまな方法**](https://github.com/carlospolop/hacktricks/blob/master/generic-methodologies-and-resources/broken-reference/README.md)を見つけてください。

#### 11.2 - 持続性

**システムを再度攻撃する必要がないように、2または3種類の異なる持続メカニズムを使用してください。**\
**ここに、Active Directoryでの** [**持続性のトリック**](../windows-hardening/active-directory-methodology/#persistence)**があります。**

TODO: WindowsとLinuxの持続性ポストを完成させる

### 12 - ピボッティング

**収集した資格情報**を使用して他のマシンにアクセスできるか、または**新しいホストを発見してスキャンする**必要があるかもしれません（被害者が接続されている新しいネットワーク内でペンテスティング手法を再スタート）。\
この場合、トンネリングが必要になるかもしれません。[**トンネリングに関する投稿を見つけることができます**](../generic-hacking/tunneling-and-port-forwarding.md)。\
また、[Active Directoryペンテスティング手法](../windows-hardening/active-directory-methodology/)に関する投稿も確認するべきです。そこでは、横移動、特権昇格、資格情報のダンプに関するクールなトリックが見つかります。\
[**NTLM**](../windows-hardening/ntlm/)に関するページも確認してください。Windows環境でピボッティングするのに非常に役立つかもしれません。

### MORE

#### [Androidアプリケーション](../mobile-pentesting/android-app-pentesting/)

#### **エクスプロイト**

- [**基本的なLinuxエクスプロイト**](broken-reference/)
- [**基本的なWindowsエクスプロイト**](../binary-exploitation/windows-exploiting-basic-guide-oscp-lvl.md)
- [**基本的なエクスプロイトツール**](../binary-exploitation/basic-stack-binary-exploitation-methodology/tools/)

#### [**基本的なPython**](python/)

#### **暗号トリック**

- [**ECB**](../crypto-and-stego/electronic-code-book-ecb.md)
- [**CBC-MAC**](../crypto-and-stego/cipher-block-chaining-cbc-mac-priv.md)
- [**パディングオラクル**](../crypto-and-stego/padding-oracle-priv.md)


{{#include ../banners/hacktricks-training.md}}
