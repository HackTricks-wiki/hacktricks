# Print Stack Canary

{{#include ../../../../banners/hacktricks-training.md}}

## Büyütülmüş yığın yazdırma

Bir **yığın taşması** açığına sahip bir **programın** **stack overflow**'un **bir kısmına** **işaret eden** bir **puts** fonksiyonunu çalıştırabileceği bir durumu hayal edin. Saldırgan, **kanaryanın ilk baytının bir null baytı** olduğunu (`\x00`) ve kanaryanın geri kalanının **rastgele** baytlar olduğunu bilir. Ardından, saldırgan **kanaryanın ilk baytına kadar yığını** **aşındıran** bir taşma oluşturabilir.

Sonra, saldırgan **yükün** ortasında **puts fonksiyonunu** çağırır ve bu, **kanaryanın tümünü** (ilk null bayt hariç) **yazdırır**.

Bu bilgiyle saldırgan, kanaryayı (aynı program oturumunda) bilerek **yeni bir saldırı oluşturup gönderebilir**.

Açıkça, bu taktik çok **sınırlıdır** çünkü saldırganın **kanaryayı** **sızdırmak** için **yükünün** **içeriğini** **yazdırabilmesi** ve ardından **yeni bir yük** oluşturup (aynı program oturumunda) **gerçek tampon taşmasını** **gönderebilmesi** gerekir.

**CTF örnekleri:**

- [**https://guyinatuxedo.github.io/08-bof_dynamic/csawquals17_svc/index.html**](https://guyinatuxedo.github.io/08-bof_dynamic/csawquals17_svc/index.html)
- 64 bit, ASLR etkin ama PIE yok, ilk adım kanaryanın 0x00 baytına kadar bir taşma doldurmak ve ardından puts'u çağırarak sızdırmaktır. Kanarya ile bir ROP aparatı oluşturulur ve puts'un GOT'dan adresini sızdırmak için puts'u çağırır ve ardından `system('/bin/sh')` çağırmak için bir ROP aparatı oluşturulur.

## Keyfi Okuma

Format **dizeleri** tarafından sağlanan bir keyfi okuma ile kanaryayı sızdırmak mümkün olabilir. Bu örneğe bakın: [**https://ir0nstone.gitbook.io/notes/types/stack/canaries**](https://ir0nstone.gitbook.io/notes/types/stack/canaries) ve keyfi bellek adreslerini okumak için format dizelerini kötüye kullanma hakkında okuyabilirsiniz:

{{#ref}}
../../format-strings/
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
