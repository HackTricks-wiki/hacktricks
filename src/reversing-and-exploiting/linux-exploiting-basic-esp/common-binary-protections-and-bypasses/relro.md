# Relro

{{#include ../../../banners/hacktricks-training.md}}

## Relro

**RELRO** 代表 **Relocation Read-Only**，它是用于二进制文件的一种安全特性，以减轻与 **GOT (Global Offset Table)** 覆盖相关的风险。为了清晰起见，让我们将这个概念分解为两种不同的类型：**Partial RELRO** 和 **Full RELRO**。

### **Partial RELRO**

**Partial RELRO** 采取了一种更简单的方法来增强安全性，而不会显著影响二进制文件的性能。通过 **将 GOT 放置在程序变量的上方，Partial RELRO 旨在防止缓冲区溢出到达并破坏 GOT**。

这 **并不能防止 GOT** 被 **任意写入** 漏洞利用。

### **Full RELRO**

**Full RELRO** 通过 **使 GOT 完全只读** 来加强保护。一旦二进制文件启动，所有函数地址都会在 GOT 中解析并加载，然后，GOT 被标记为只读，有效地防止在运行时对其进行任何修改。

然而，Full RELRO 的权衡在于性能和启动时间。因为它需要在启动时解析所有动态符号，然后再将 GOT 标记为只读，**启用 Full RELRO 的二进制文件可能会经历更长的加载时间**。这种额外的启动开销就是为什么并非所有二进制文件默认启用 Full RELRO。

可以通过以下方式查看二进制文件是否启用了 Full RELRO：
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## 绕过

如果启用了完整的 RELRO，绕过它的唯一方法是找到另一种不需要在 GOT 表中写入以获得任意执行的方法。

请注意，LIBC 的 GOT 通常是部分 RELRO，因此可以通过任意写入进行修改。更多信息请参见 [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)。

{{#include ../../../banners/hacktricks-training.md}}
