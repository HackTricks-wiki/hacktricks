# Relro

{{#include ../../../banners/hacktricks-training.md}}

## Relro

**RELRO** sta per **Relocation Read-Only** ed è una funzione di sicurezza utilizzata nei binari per mitigare i rischi associati con le sovrascritture della **GOT (Global Offset Table)**. Analizziamo il concetto nelle sue due tipologie distinte per chiarezza: **Partial RELRO** e **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** adotta un approccio più semplice per migliorare la sicurezza senza influire significativamente sulle prestazioni del binario. Posizionando **la GOT sopra le variabili del programma in memoria, Partial RELRO mira a prevenire che i buffer overflow raggiungano e corrompano la GOT**.&#x20;

Questo **non impedisce alla GOT** di essere abusata **da vulnerabilità di scrittura arbitraria**.

### **Full RELRO**

**Full RELRO** aumenta la protezione rendendo **la GOT completamente di sola lettura.** Una volta che il binario inizia, tutti gli indirizzi delle funzioni vengono risolti e caricati nella GOT, quindi, la GOT viene contrassegnata come di sola lettura, prevenendo efficacemente qualsiasi modifica durante l'esecuzione.

Tuttavia, il compromesso con Full RELRO riguarda le prestazioni e il tempo di avvio. Poiché deve risolvere tutti i simboli dinamici all'avvio prima di contrassegnare la GOT come di sola lettura, **i binari con Full RELRO abilitato potrebbero sperimentare tempi di caricamento più lunghi**. Questo sovraccarico aggiuntivo all'avvio è il motivo per cui Full RELRO non è abilitato per impostazione predefinita in tutti i binari.

È possibile verificare se Full RELRO è abilitato in un binario con:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Se il Full RELRO è abilitato, l'unico modo per bypassarlo è trovare un altro modo che non richieda di scrivere nella tabella GOT per ottenere un'esecuzione arbitraria.

Nota che il GOT di LIBC è solitamente Partial RELRO, quindi può essere modificato con una scrittura arbitraria. Maggiori informazioni in [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries).

{{#include ../../../banners/hacktricks-training.md}}
