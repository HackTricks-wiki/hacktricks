# Relro

{{#include ../../../banners/hacktricks-training.md}}

## Relro

**RELRO** означає **Relocation Read-Only**, і це функція безпеки, що використовується в бінарних файлах для зменшення ризиків, пов'язаних з переписуваннями **GOT (Global Offset Table)**. Давайте розглянемо концепцію на двох її різних типах для ясності: **Partial RELRO** та **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** використовує простіший підхід для підвищення безпеки без значного впливу на продуктивність бінарного файлу. **Розміщуючи GOT вище змінних програми в пам'яті, Partial RELRO намагається запобігти переповненням буфера, які можуть досягти та пошкодити GOT**.&#x20;

Це **не запобігає зловживанню GOT** через **вразливості довільного запису**.

### **Full RELRO**

**Full RELRO** підвищує рівень захисту, **роблячи GOT повністю доступним лише для читання.** Коли бінарний файл запускається, всі адреси функцій вирішуються та завантажуються в GOT, після чого GOT позначається як доступний лише для читання, що ефективно запобігає будь-яким змінам під час виконання.

Однак компроміс з Full RELRO стосується продуктивності та часу запуску. Оскільки потрібно вирішити всі динамічні символи під час запуску перед тим, як позначити GOT як доступний лише для читання, **бінарні файли з увімкненим Full RELRO можуть мати довший час завантаження**. Це додаткове навантаження під час запуску є причиною, чому Full RELRO не увімкнено за замовчуванням у всіх бінарних файлах.

Можна перевірити, чи увімкнено Full RELRO у бінарному файлі за допомогою:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Обхід

Якщо увімкнено повний RELRO, єдиний спосіб обійти його - знайти інший спосіб, який не потребує запису в таблицю GOT для отримання довільного виконання.

Зверніть увагу, що GOT LIBC зазвичай є частковим RELRO, тому його можна змінити за допомогою довільного запису. Більше інформації в [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries).

{{#include ../../../banners/hacktricks-training.md}}
