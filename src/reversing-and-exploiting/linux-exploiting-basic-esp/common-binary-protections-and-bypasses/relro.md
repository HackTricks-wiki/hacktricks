# Relro

{{#include ../../../banners/hacktricks-training.md}}

## Relro

**RELRO** significa **Relocation Read-Only**, e é um recurso de segurança usado em binários para mitigar os riscos associados a **GOT (Global Offset Table)** sobrescritas. Vamos dividir o conceito em seus dois tipos distintos para clareza: **Partial RELRO** e **Full RELRO**.

### **Partial RELRO**

**Partial RELRO** adota uma abordagem mais simples para aumentar a segurança sem impactar significativamente o desempenho do binário. Ao **posicionar o GOT acima das variáveis do programa na memória, o Partial RELRO visa prevenir que estouros de buffer alcancem e corrompam o GOT**.&#x20;

Isso **não impede que o GOT** seja abusado **a partir de vulnerabilidades de escrita arbitrária**.

### **Full RELRO**

**Full RELRO** aumenta a proteção ao **tornar o GOT completamente somente leitura.** Uma vez que o binário é iniciado, todos os endereços de função são resolvidos e carregados no GOT, então, o GOT é marcado como somente leitura, efetivamente prevenindo quaisquer modificações durante a execução.

No entanto, a desvantagem do Full RELRO está em termos de desempenho e tempo de inicialização. Como precisa resolver todos os símbolos dinâmicos na inicialização antes de marcar o GOT como somente leitura, **binários com Full RELRO habilitado podem experimentar tempos de carregamento mais longos**. Essa sobrecarga adicional na inicialização é a razão pela qual o Full RELRO não é habilitado por padrão em todos os binários.

É possível verificar se o Full RELRO está habilitado em um binário com:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Se o Full RELRO estiver habilitado, a única maneira de contorná-lo é encontrar outra forma que não precise escrever na tabela GOT para obter execução arbitrária.

Observe que o GOT da LIBC geralmente é Partial RELRO, portanto, pode ser modificado com uma escrita arbitrária. Mais informações em [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries).

{{#include ../../../banners/hacktricks-training.md}}
