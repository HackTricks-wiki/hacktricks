# Relro

{{#include ../../../banners/hacktricks-training.md}}

## Relro

**RELRO**는 **Relocation Read-Only**의 약자로, **GOT (Global Offset Table)** 오버라이트와 관련된 위험을 완화하기 위해 바이너리에서 사용되는 보안 기능입니다. 개념을 명확하게 하기 위해 두 가지 유형으로 나누어 보겠습니다: **Partial RELRO**와 **Full RELRO**.

### **Partial RELRO**

**Partial RELRO**는 바이너리의 성능에 큰 영향을 주지 않으면서 보안을 강화하는 더 간단한 접근 방식을 취합니다. **메모리에서 프로그램의 변수 위에 GOT를 배치함으로써, Partial RELRO는 버퍼 오버플로우가 GOT에 도달하여 손상되는 것을 방지하는 것을 목표로 합니다.**&#x20;

이것은 **임의 쓰기** 취약점으로부터 GOT가 남용되는 것을 방지하지 않습니다.

### **Full RELRO**

**Full RELRO**는 **GOT를 완전히 읽기 전용으로 만들어 보호를 강화합니다.** 바이너리가 시작되면 모든 함수 주소가 해결되고 GOT에 로드된 후, GOT는 읽기 전용으로 표시되어 런타임 중에 수정이 효과적으로 방지됩니다.

그러나 Full RELRO의 단점은 성능과 시작 시간 측면에서 발생합니다. GOT를 읽기 전용으로 표시하기 전에 모든 동적 기호를 시작 시 해결해야 하므로, **Full RELRO가 활성화된 바이너리는 로드 시간이 더 길어질 수 있습니다.** 이 추가 시작 오버헤드 때문에 Full RELRO는 모든 바이너리에서 기본적으로 활성화되어 있지 않습니다.

바이너리에서 Full RELRO가 활성화되어 있는지 확인할 수 있는 방법이 있습니다:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Full RELRO가 활성화되어 있으면, 임의 실행을 얻기 위해 GOT 테이블에 쓰지 않는 다른 방법을 찾아야만 우회할 수 있습니다.

LIBC의 GOT는 일반적으로 Partial RELRO이므로, 임의 쓰기로 수정할 수 있습니다. 자세한 내용은 [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)를 참조하세요.

{{#include ../../../banners/hacktricks-training.md}}
