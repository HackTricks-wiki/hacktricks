# 1080 - Pentesting Socks

{{#include ../banners/hacktricks-training.md}}

## बुनियादी जानकारी

**SOCKS** एक प्रोटोकॉल है जो क्लाइंट और सर्वर के बीच proxy के माध्यम से डेटा ट्रांसफर करने के लिए उपयोग होता है। पाँचवाँ वर्शन, **SOCKS5**, एक वैकल्पिक authentication फ़ीचर जोड़ता है, जो केवल अधिकृत उपयोगकर्ताओं को सर्वर तक पहुँचने की अनुमति देता है। यह मुख्यतः TCP connections की proxying और UDP packets के forwarding (via the `UDP ASSOCIATE` command) को हैंडल करता है, और OSI मॉडल की session layer (Layer 5) पर ऑपरेट करता है। जब tooling `socks5h` scheme का समर्थन करता है, तो DNS resolution को proxy के माध्यम से जबरदस्ती किया जाता है, जिससे local DNS leaks रोके जाते हैं और originating host का fingerprinting कठिन हो जाता है।

**डिफ़ॉल्ट पोर्ट:** 1080

## एन्यूमरेशन

### Authentication Check
```bash
nmap -p 1080 <ip> --script socks-auth-info
```
### Brute Force

#### बुनियादी उपयोग
```bash
nmap --script socks-brute -p 1080 <ip>
```
#### उन्नत उपयोग
```bash
nmap  --script socks-brute --script-args userdb=users.txt,passdb=rockyou.txt,unpwdb.timelimit=30m -p 1080 <ip>
```
#### Output
```
PORT     STATE SERVICE
1080/tcp open  socks
| socks-brute:
|   Accounts
|     patrik:12345 - Valid credentials
|   Statistics
|_    Performed 1921 guesses in 6 seconds, average tps: 320
```
#### Hydra मॉड्यूल
```bash
hydra -L users.txt -P passwords.txt -s 1080 -t 16 -V <ip> socks5
```
### विधि & open-proxy enumeration
```bash
nmap -sV --script socks-methods,socks-open-proxy -p 1080 <ip>
```
`socks-methods` सर्वर को supported authentication types की सूची दिखाने के लिए मजबूर करता है, जबकि `socks-open-proxy` यह पुष्टि करने के लिए एक outbound CONNECT का प्रयास करता है कि service को relay के रूप में दुरुपयोग किया जा सकता है या नहीं।

#### Raw handshake check
```bash
printf '\x05\x01\x00' | nc -nv <ip> 1080
```
एक `\x05 01 00` response सूचित करता है कि SOCKS5 "no authentication" की पेशकश कर रहा है। कोई भी `\x00` जिसके बाद `\x02` आता है, मतलब username/password आवश्यक है, जो scripts में exposed devices की जल्दी से fingerprinting के लिए उपयोगी होता है।

### त्वरित egress सत्यापन
```bash
curl --socks5-hostname <ip>:1080 https://ifconfig.me
curl --socks5-hostname user:pass@<ip>:1080 http://internal.target
```
`--socks5-hostname` (या `socks5h://` URLs) का उपयोग करें ताकि DNS resolution दूरस्थ रूप से हो। `proxychains4 -q nmap -sT -Pn --top-ports 200 <internal-host>` के साथ मिलाकर चलाएँ ताकि यह सत्यापित किया जा सके कि proxy वाक़ई internal reach प्रदान करता है या नहीं।

### Internet-wide discovery / fingerprinting
```bash
masscan 0.0.0.0/0 -p1080 --banners --rate 100000 -oX socks.xml
```
परिणामों को NSE, `zgrab2`, या custom python scripts में वापस फ़ीड करें ताकि उम्मीदवार hosts को प्राथमिकता दी जा सके (उदा., banner strings जैसे `3proxy`, `Dante`, `MikroTik`)।

## Tunneling and Port Forwarding

tunneling और post forwarding के बारे में जानकारी के लिए पेज देखें: [Tunneling and Port Forwarding](../generic-hacking/tunneling-and-port-forwarding.md)

## संदर्भ

- [Use a SOCKS5 Proxy to Access the Kubernetes API (Kubernetes Docs, 2024)](https://kubernetes.io/docs/tasks/extend-kubernetes/socks5-proxy-access-api)

{{#include ../banners/hacktricks-training.md}}
