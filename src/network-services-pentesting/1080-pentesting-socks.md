# 1080 - Pentesting Socks

{{#include ../banners/hacktricks-training.md}}

## Βασικές Πληροφορίες

**SOCKS** είναι ένα πρωτόκολλο που χρησιμοποιείται για τη μεταφορά δεδομένων μεταξύ ενός client και ενός server μέσω ενός proxy. Η πέμπτη έκδοση, **SOCKS5**, προσθέτει μια προαιρετική δυνατότητα authentication, επιτρέποντας μόνο εξουσιοδοτημένους χρήστες να έχουν πρόσβαση στον server. Κυρίως αναλαμβάνει το proxying των TCP συνδέσεων και τη μεταφορά πακέτων UDP (μέσω της εντολής `UDP ASSOCIATE`), λειτουργώντας στο session layer (Layer 5) του μοντέλου OSI. Όταν τα εργαλεία υποστηρίζουν το scheme `socks5h`, η επίλυση DNS αναγκάζεται να περάσει μέσω του proxy, αποτρέποντας τοπικά DNS leaks και καθιστώντας πιο δύσκολο το fingerprinting του originating host.

**Προεπιλεγμένη Θύρα:** 1080

## Εντοπισμός

### Έλεγχος Authentication
```bash
nmap -p 1080 <ip> --script socks-auth-info
```
### Brute Force

#### Βασική χρήση
```bash
nmap --script socks-brute -p 1080 <ip>
```
#### Προχωρημένη χρήση
```bash
nmap  --script socks-brute --script-args userdb=users.txt,passdb=rockyou.txt,unpwdb.timelimit=30m -p 1080 <ip>
```
Δεν βρέθηκε περιεχόμενο για μετάφραση. Παρακαλώ επικόλλησε εδώ το περιεχόμενο του αρχείου src/network-services-pentesting/1080-pentesting-socks.md ή το απόσπασμα που θέλεις να μεταφράσω. Θα διατηρήσω τη σύνταξη Markdown/HTML, τα links, paths και tags όπως είναι.
```
PORT     STATE SERVICE
1080/tcp open  socks
| socks-brute:
|   Accounts
|     patrik:12345 - Valid credentials
|   Statistics
|_    Performed 1921 guesses in 6 seconds, average tps: 320
```
#### Μονάδα Hydra
```bash
hydra -L users.txt -P passwords.txt -s 1080 -t 16 -V <ip> socks5
```
### Μέθοδος & open-proxy enumeration
```bash
nmap -sV --script socks-methods,socks-open-proxy -p 1080 <ip>
```
`socks-methods` αναγκάζει τον διακομιστή να απαριθμήσει τους υποστηριζόμενους τύπους αυθεντικοποίησης, ενώ `socks-open-proxy` επιχειρεί ένα εξερχόμενο CONNECT για να επιβεβαιώσει αν η υπηρεσία μπορεί να καταχραστεί ως relay.

#### Έλεγχος raw handshake
```bash
printf '\x05\x01\x00' | nc -nv <ip> 1080
```
### Γρήγορος έλεγχος εξερχόμενης κίνησης

Μια απάντηση `\x05 01 00` υποδεικνύει ότι το SOCKS5 προσφέρει "no authentication". Οποιοδήποτε `\x00` ακολουθούμενο από `\x02` σημαίνει ότι απαιτείται username/password, κάτι που είναι χρήσιμο για γρήγορο fingerprinting εκτεθειμένων συσκευών σε scripts.
```bash
curl --socks5-hostname <ip>:1080 https://ifconfig.me
curl --socks5-hostname user:pass@<ip>:1080 http://internal.target
```
Χρησιμοποιήστε `--socks5-hostname` (ή `socks5h://` URLs) ώστε η επίλυση DNS να γίνεται απομακρυσμένα. Συνδυάστε το με `proxychains4 -q nmap -sT -Pn --top-ports 200 <internal-host>` για να επαληθεύσετε αν ο proxy παρέχει πραγματικά πρόσβαση στο εσωτερικό δίκτυο.

### Internet-wide discovery / fingerprinting
```bash
masscan 0.0.0.0/0 -p1080 --banners --rate 100000 -oX socks.xml
```
Τροφοδοτήστε ξανά τα αποτελέσματα στο NSE, `zgrab2`, ή σε προσαρμοσμένα python scripts για να προτεραιοποιήσετε υποσχόμενους hosts (π.χ., banner strings όπως `3proxy`, `Dante`, `MikroTik`).

## Tunneling and Port Forwarding

Για πληροφορίες σχετικά με tunneling και post forwarding, ελέγξτε τη σελίδα: [Tunneling and Port Forwarding](../generic-hacking/tunneling-and-port-forwarding.md)

## Αναφορές

- [Use a SOCKS5 Proxy to Access the Kubernetes API (Kubernetes Docs, 2024)](https://kubernetes.io/docs/tasks/extend-kubernetes/socks5-proxy-access-api)

{{#include ../banners/hacktricks-training.md}}
