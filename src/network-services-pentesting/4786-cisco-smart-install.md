# 4786 - Cisco Smart Install

{{#include ../banners/hacktricks-training.md}}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

## 基本信息

**Cisco Smart Install** 是思科设计的一种工具，用于自动化新思科硬件的初始配置和操作系统镜像的加载。**默认情况下，Cisco Smart Install 在思科硬件上处于活动状态，并使用传输层协议 TCP，端口号为 4786。**

**默认端口：** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **智能安装利用工具**

**在2018年，发现了该协议中的一个关键漏洞，CVE-2018–0171。威胁级别在CVSS评分中为9.8。**

**发送到TCP/4786端口的特制数据包（Cisco Smart Install处于活动状态）会触发缓冲区溢出，允许攻击者：**

- 强制重启设备
- 调用RCE
- 偷取网络设备的配置。

**该** [**SIET**](https://github.com/frostbits-security/SIET) **（智能安装利用工具）**是为了利用这个漏洞而开发的，它允许你滥用Cisco Smart Install。在本文中，我将向你展示如何读取合法的网络硬件配置文件。配置外泄对渗透测试者来说是有价值的，因为它将了解网络的独特特性。这将使生活更轻松，并允许找到新的攻击向量。

**目标设备将是一个“在线”的Cisco Catalyst 2960交换机。虚拟镜像没有Cisco Smart Install，因此你只能在真实硬件上进行练习。**

目标交换机的地址是**10.10.100.10，CSI处于活动状态。**加载SIET并开始攻击。**-g参数**表示从设备中提取配置，**-i参数**允许你设置易受攻击目标的IP地址。
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../images/image (773).png" alt=""><figcaption></figcaption></figure>

交换机配置 **10.10.100.10** 将位于 **tftp/** 文件夹中

<figure><img src="../images/image (1116).png" alt=""><figcaption></figcaption></figure>

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

{{#include ../banners/hacktricks-training.md}}
