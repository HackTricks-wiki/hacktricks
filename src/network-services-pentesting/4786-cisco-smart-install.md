# 4786 - Cisco Smart Install

{{#include ../banners/hacktricks-training.md}}


## Informazioni di base

**Cisco Smart Install** è un sistema progettato da Cisco per automatizzare la configurazione iniziale e il caricamento di un'immagine del sistema operativo per nuovo hardware Cisco. **Per impostazione predefinita, Cisco Smart Install è attivo sull'hardware Cisco e utilizza il protocollo di trasporto TCP, con numero di porta 4786.**

**Porta predefinita:** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **Strumento di Sfruttamento Smart Install**

**Nel 2018, è stata trovata una vulnerabilità critica, CVE-2018–0171, in questo protocollo. Il livello di minaccia è 9.8 sulla scala CVSS.**

**Un pacchetto appositamente creato inviato alla porta TCP/4786, dove Cisco Smart Install è attivo, attiva un overflow del buffer, consentendo a un attaccante di:**

- riavviare forzatamente il dispositivo
- chiamare RCE
- rubare le configurazioni delle apparecchiature di rete.

**Il** [**SIET**](https://github.com/frostbits-security/SIET) **(Strumento di Sfruttamento Smart Install)** è stato sviluppato per sfruttare questa vulnerabilità, consente di abusare di Cisco Smart Install. In questo articolo ti mostrerò come puoi leggere un file di configurazione hardware di rete legittimo. La configurazione dell'exfiltrazione può essere preziosa per un pentester perché apprenderà le caratteristiche uniche della rete. E questo renderà la vita più facile e permetterà di trovare nuovi vettori per un attacco.

**Il dispositivo target sarà uno switch Cisco Catalyst 2960 "live". Le immagini virtuali non hanno Cisco Smart Install, quindi puoi praticare solo sull'hardware reale.**

L'indirizzo dello switch target è **10.10.100.10 e CSI è attivo.** Carica SIET e inizia l'attacco. **L'argomento -g** significa estrazione della configurazione dal dispositivo, **l'argomento -i** consente di impostare l'indirizzo IP del target vulnerabile.
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../images/image (773).png" alt=""><figcaption></figcaption></figure>

La configurazione dello switch **10.10.100.10** sarà nella cartella **tftp/**

<figure><img src="../images/image (1116).png" alt=""><figcaption></figcaption></figure>


{{#include ../banners/hacktricks-training.md}}
