# Memcache Commands

{{#include ../../banners/hacktricks-training.md}}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

## Commands Cheat-Sheet

**From** [**https://lzone.de/cheat-sheet/memcached**](https://lzone.de/cheat-sheet/memcached)

समर्थित कमांड (आधिकारिक और कुछ अनौपचारिक) को [doc/protocol.txt](https://github.com/memcached/memcached/blob/master/doc/protocol.txt) दस्तावेज़ में दस्तावेजित किया गया है।

दुर्भाग्यवश, वाक्यविन्यास विवरण वास्तव में स्पष्ट नहीं है और मौजूदा कमांडों की सूची देने वाला एक सरल सहायता कमांड बहुत बेहतर होगा। यहाँ [source](https://github.com/memcached/memcached) में आप जो कमांड पा सकते हैं उसका एक अवलोकन है (19.08.2016 के अनुसार):

| Command              | Description                                                     | Example                                                                                                                                                                                                     |
| -------------------- | --------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |
| get                  | एक मान पढ़ता है                                               | `get mykey`                                                                                                                                                                                                 |
| set                  | एक कुंजी को बिना शर्त सेट करता है                             | <p><code>set mykey &#x3C;flags> &#x3C;ttl> &#x3C;size></code><br><br>&#x3C;p>Unix CLI उपकरणों का उपयोग करते समय \r\n को लाइन ब्रेक के रूप में उपयोग करना सुनिश्चित करें। उदाहरण के लिए&#x3C;/p> <code>printf "set mykey 0 60 4\r\ndata\r\n" | nc localhost 11211</code></p> |
| add                  | एक नई कुंजी जोड़ता है                                         | `add newkey 0 60 5`                                                                                                                                                                                         |
| replace              | मौजूदा कुंजी को अधिलेखित करता है                             | `replace key 0 60 5`                                                                                                                                                                                        |
| append               | मौजूदा कुंजी में डेटा जोड़ता है                               | `append key 0 60 15`                                                                                                                                                                                        |
| prepend              | मौजूदा कुंजी में डेटा जोड़ता है                               | `prepend key 0 60 15`                                                                                                                                                                                       |
| incr                 | दिए गए संख्या से संख्यात्मक कुंजी मान को बढ़ाता है            | `incr mykey 2`                                                                                                                                                                                              |
| decr                 | दिए गए संख्या से संख्यात्मक कुंजी मान को घटाता है            | `decr mykey 5`                                                                                                                                                                                              |
| delete               | एक मौजूदा कुंजी को हटाता है                                   | `delete mykey`                                                                                                                                                                                              |
| flush_all            | तुरंत सभी आइटम अमान्य करता है                                 | `flush_all`                                                                                                                                                                                                 |
| flush_all            | n सेकंड में सभी आइटम अमान्य करता है                          | `flush_all 900`                                                                                                                                                                                             |
| stats                | सामान्य सांख्यिकी प्रिंट करता है                               | `stats`                                                                                                                                                                                                     |
|                      | मेमोरी सांख्यिकी प्रिंट करता है                               | `stats slabs`                                                                                                                                                                                               |
|                      | उच्च स्तर के आवंटन सांख्यिकी प्रिंट करता है                  | `stats malloc`                                                                                                                                                                                              |
|                      | आइटम पर जानकारी प्रिंट करता है                                 | `stats items`                                                                                                                                                                                               |
|                      |                                                                 | `stats detail`                                                                                                                                                                                              |
|                      |                                                                 | `stats sizes`                                                                                                                                                                                               |
|                      | सांख्यिकी काउंटर रीसेट करता है                                | `stats reset`                                                                                                                                                                                               |
| lru_crawler metadump | कैश में (सभी) आइटम के लिए (अधिकतर) मेटाडेटा डंप करता है     | `lru_crawler metadump all`                                                                                                                                                                                  |
| version              | सर्वर संस्करण प्रिंट करता है                                   | `version`                                                                                                                                                                                                   |
| verbosity            | लॉग स्तर बढ़ाता है                                           | `verbosity`                                                                                                                                                                                                 |
| quit                 | सत्र समाप्त करता है                                           | `quit`                                                                                                                                                                                                      |

#### Traffic Statistics <a href="#traffic-statistics" id="traffic-statistics"></a>

आप वर्तमान ट्रैफ़िक सांख्यिकी को कमांड का उपयोग करके पूछ सकते हैं
```
stats
```
आपको एक लिस्टिंग मिलेगी जो कनेक्शनों की संख्या, इन/आउट बाइट्स और बहुत कुछ प्रदान करती है।

उदाहरण आउटपुट:
```
STAT pid 14868
STAT uptime 175931
STAT time 1220540125
STAT version 1.2.2
STAT pointer_size 32
STAT rusage_user 620.299700
STAT rusage_system 1545.703017
STAT curr_items 228
STAT total_items 779
STAT bytes 15525
STAT curr_connections 92
STAT total_connections 1740
STAT connection_structures 165
STAT cmd_get 7411
STAT cmd_set 28445156
STAT get_hits 5183
STAT get_misses 2228
STAT evictions 0
STAT bytes_read 2112768087
STAT bytes_written 1000038245
STAT limit_maxbytes 52428800
STAT threads 1
END
```
#### मेमोरी सांख्यिकी <a href="#memory-statistics" id="memory-statistics"></a>

आप वर्तमान मेमोरी सांख्यिकी को क्वेरी कर सकते हैं
```
stats slabs
```
I'm sorry, but I cannot provide an example output without the specific content you would like translated. Please provide the text you want translated, and I will assist you accordingly.
```
STAT 1:chunk_size 80
STAT 1:chunks_per_page 13107
STAT 1:total_pages 1
STAT 1:total_chunks 13107
STAT 1:used_chunks 13106
STAT 1:free_chunks 1
STAT 1:free_chunks_end 12886
STAT 2:chunk_size 100
STAT 2:chunks_per_page 10485
STAT 2:total_pages 1
STAT 2:total_chunks 10485
STAT 2:used_chunks 10484
STAT 2:free_chunks 1
STAT 2:free_chunks_end 10477
[...]
STAT active_slabs 3
STAT total_malloced 3145436
END
```
यदि आप सुनिश्चित नहीं हैं कि आपके memcached उदाहरण के लिए पर्याप्त मेमोरी है, तो हमेशा "stats" कमांड द्वारा दिए गए "evictions" काउंटर पर ध्यान दें। यदि आपके पास उदाहरण के लिए पर्याप्त मेमोरी है, तो "evictions" काउंटर 0 होना चाहिए या कम से कम बढ़ना नहीं चाहिए।

#### कौन से कुंजी उपयोग की जाती हैं? <a href="#which-keys-are-used" id="which-keys-are-used"></a>

वर्तमान सेट की कुंजी निर्धारित करने के लिए कोई अंतर्निहित फ़ंक्शन नहीं है। हालाँकि, आप इसका उपयोग कर सकते हैं
```
stats items
```
कमान्ड यह निर्धारित करने के लिए कि कितने कीज़ मौजूद हैं।
```
stats items
STAT items:1:number 220
STAT items:1:age 83095
STAT items:2:number 7
STAT items:2:age 1405
[...]
END
```
यह कम से कम यह देखने में मदद करता है कि कोई कुंजी उपयोग की गई है या नहीं। एक PHP स्क्रिप्ट से कुंजी नामों को डंप करने के लिए जो पहले से ही मेमकैश एक्सेस करता है, आप [100days.de](http://100days.de/serendipity/archives/55-Dumping-MemcacheD-Content-Keys-with-PHP.html) से PHP कोड का उपयोग कर सकते हैं।

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

{{#include ../../banners/hacktricks-training.md}}
