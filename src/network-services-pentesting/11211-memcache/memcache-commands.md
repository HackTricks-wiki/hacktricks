# Memcache Commands

{{#include ../../banners/hacktricks-training.md}}


## Commands Cheat-Sheet

**From** [**https://lzone.de/cheat-sheet/memcached**](https://lzone.de/cheat-sheet/memcached)

Amri zinazoungwa mkono (za rasmi na zisizo rasmi) zimeandikwa katika hati ya [doc/protocol.txt](https://github.com/memcached/memcached/blob/master/doc/protocol.txt).

Kwa bahati mbaya, maelezo ya sintaksia hayako wazi sana na amri rahisi ya msaada inayoorodhesha amri zilizopo ingekuwa bora zaidi. Hapa kuna muhtasari wa amri unazoweza kupata katika [source](https://github.com/memcached/memcached) (kuanzia 19.08.2016):

| Command              | Description                                                     | Example                                                                                                                                                                                                     |
| -------------------- | --------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |
| get                  | Kusoma thamani                                                 | `get mykey`                                                                                                                                                                                                 |
| set                  | Weka ufunguo bila masharti                                      | <p><code>set mykey &#x3C;flags> &#x3C;ttl> &#x3C;size></code><br><br>&#x3C;p>Hakikisha kutumia \r\n kama mapumziko ya mistari unapokuwa ukitumia zana za CLI za Unix. Kwa mfano&#x3C;/p> <code>printf "set mykey 0 60 4\r\ndata\r\n" | nc localhost 11211</code></p> |
| add                  | Ongeza ufunguo mpya                                            | `add newkey 0 60 5`                                                                                                                                                                                         |
| replace              | Badilisha ufunguo uliopo                                       | `replace key 0 60 5`                                                                                                                                                                                        |
| append               | Ongeza data kwa ufunguo uliopo                                  | `append key 0 60 15`                                                                                                                                                                                        |
| prepend              | Ongeza data kabla ya ufunguo uliopo                             | `prepend key 0 60 15`                                                                                                                                                                                       |
| incr                 | Ongeza thamani ya ufunguo wa nambari kwa nambari iliyotolewa    | `incr mykey 2`                                                                                                                                                                                              |
| decr                 | Punguza thamani ya ufunguo wa nambari kwa nambari iliyotolewa    | `decr mykey 5`                                                                                                                                                                                              |
| delete               | Futa ufunguo uliopo                                           | `delete mykey`                                                                                                                                                                                              |
| flush_all            | Batilisha vitu vyote mara moja                                   | `flush_all`                                                                                                                                                                                                 |
| flush_all            | Batilisha vitu vyote katika sekunde n                          | `flush_all 900`                                                                                                                                                                                             |
| stats                | Chapisha takwimu za jumla                                      | `stats`                                                                                                                                                                                                     |
|                      | Chapisha takwimu za kumbukumbu                                  | `stats slabs`                                                                                                                                                                                               |
|                      | Chapisha takwimu za ugawaji wa kiwango cha juu                 | `stats malloc`                                                                                                                                                                                              |
|                      | Chapisha habari kuhusu vitu                                      | `stats items`                                                                                                                                                                                               |
|                      |                                                                 | `stats detail`                                                                                                                                                                                              |
|                      |                                                                 | `stats sizes`                                                                                                                                                                                               |
|                      | Rejesha hesabu za takwimu                                       | `stats reset`                                                                                                                                                                                               |
| lru_crawler metadump | Fanya dump (zaidi ya) metadata kwa (vitu vyote) katika cache    | `lru_crawler metadump all`                                                                                                                                                                                  |
| version              | Chapisha toleo la seva.                                        | `version`                                                                                                                                                                                                   |
| verbosity            | Ongeza kiwango cha kumbukumbu                                   | `verbosity`                                                                                                                                                                                                 |
| quit                 | Maliza kikao                                                  | `quit`                                                                                                                                                                                                      |

#### Traffic Statistics <a href="#traffic-statistics" id="traffic-statistics"></a>

Unaweza kuuliza takwimu za sasa za trafiki kwa kutumia amri
```
stats
```
Utapata orodha inayotoa idadi ya muunganisho, bytes ndani/nje na mengi zaidi.

Mfano wa Matokeo:
```
STAT pid 14868
STAT uptime 175931
STAT time 1220540125
STAT version 1.2.2
STAT pointer_size 32
STAT rusage_user 620.299700
STAT rusage_system 1545.703017
STAT curr_items 228
STAT total_items 779
STAT bytes 15525
STAT curr_connections 92
STAT total_connections 1740
STAT connection_structures 165
STAT cmd_get 7411
STAT cmd_set 28445156
STAT get_hits 5183
STAT get_misses 2228
STAT evictions 0
STAT bytes_read 2112768087
STAT bytes_written 1000038245
STAT limit_maxbytes 52428800
STAT threads 1
END
```
#### Takwimu za Kumbukumbu <a href="#memory-statistics" id="memory-statistics"></a>

Unaweza kuuliza takwimu za sasa za kumbukumbu kwa kutumia
```
stats slabs
```
N/A
```
STAT 1:chunk_size 80
STAT 1:chunks_per_page 13107
STAT 1:total_pages 1
STAT 1:total_chunks 13107
STAT 1:used_chunks 13106
STAT 1:free_chunks 1
STAT 1:free_chunks_end 12886
STAT 2:chunk_size 100
STAT 2:chunks_per_page 10485
STAT 2:total_pages 1
STAT 2:total_chunks 10485
STAT 2:used_chunks 10484
STAT 2:free_chunks 1
STAT 2:free_chunks_end 10477
[...]
STAT active_slabs 3
STAT total_malloced 3145436
END
```
Ikiwa hujui kama una kumbukumbu ya kutosha kwa mfano wako wa memcached, daima angalia "evictions" counters zinazotolewa na amri ya "stats". Ikiwa una kumbukumbu ya kutosha kwa mfano huo, "evictions" counter inapaswa kuwa 0 au angalau isiwe inakua.

#### Ni Funguo Zipi Zinazotumika? <a href="#which-keys-are-used" id="which-keys-are-used"></a>

Hakuna kazi iliyojengwa ili kubaini moja kwa moja seti ya sasa ya funguo. Hata hivyo, unaweza kutumia the
```
stats items
```
amri ya kubaini ni funguo ngapi zipo.
```
stats items
STAT items:1:number 220
STAT items:1:age 83095
STAT items:2:number 7
STAT items:2:age 1405
[...]
END
```
Hii angalau inasaidia kuona kama funguo zozote zinatumika. Ili kutoa majina ya funguo kutoka kwa script ya PHP ambayo tayari inafanya ufikiaji wa memcache unaweza kutumia msimbo wa PHP kutoka [100days.de](http://100days.de/serendipity/archives/55-Dumping-MemcacheD-Content-Keys-with-PHP.html).

{{#include ../../banners/hacktricks-training.md}}
