# rpcclient enumeration

{{#include ../../banners/hacktricks-training.md}}


### Relative Identifiers (RID) और Security Identifiers (SID) का अवलोकन

**Relative Identifiers (RID)** और **Security Identifiers (SID)** Windows ऑपरेटिंग सिस्टम में नेटवर्क डोमेन के भीतर उपयोगकर्ताओं और समूहों जैसे ऑब्जेक्ट्स की अद्वितीय पहचान और प्रबंधन के लिए प्रमुख घटक हैं।

- **SIDs** डोमेन के लिए अद्वितीय पहचानकर्ता के रूप में कार्य करते हैं, यह सुनिश्चित करते हुए कि प्रत्येक डोमेन को अलग किया जा सके।
- **RIDs** को SIDs के साथ जोड़ा जाता है ताकि उन डोमेनों के भीतर ऑब्जेक्ट्स के लिए अद्वितीय पहचानकर्ता बनाए जा सकें। यह संयोजन ऑब्जेक्ट अनुमतियों और पहुंच नियंत्रणों के सटीक ट्रैकिंग और प्रबंधन की अनुमति देता है।

उदाहरण के लिए, एक उपयोगकर्ता जिसका नाम `pepe` है, उसके पास डोमेन के SID के साथ उसके विशिष्ट RID को मिलाकर एक अद्वितीय पहचानकर्ता हो सकता है, जिसे हेक्साडेसिमल (`0x457`) और दशमलव (`1111`) प्रारूपों में दर्शाया गया है। यह pepe के लिए डोमेन के भीतर एक पूर्ण और अद्वितीय पहचानकर्ता बनाता है जैसे: `S-1-5-21-1074507654-1937615267-42093643874-1111`।

### **rpcclient के साथ Enumeration**

Samba का **`rpcclient`** उपयोगिता **RPC endpoints के साथ नामित पाइप के माध्यम से बातचीत करने** के लिए उपयोग की जाती है। नीचे दिए गए कमांड SAMR, LSARPC, और LSARPC-DS इंटरफेस पर जारी किए जा सकते हैं जब एक **SMB सत्र स्थापित किया गया है**, जो अक्सर क्रेडेंशियल्स की आवश्यकता होती है।

#### सर्वर जानकारी

- **सर्वर जानकारी प्राप्त करने के लिए**: `srvinfo` कमांड का उपयोग किया जाता है।

#### उपयोगकर्ताओं की Enumeration

- **उपयोगकर्ताओं को सूचीबद्ध किया जा सकता है**: `querydispinfo` और `enumdomusers` का उपयोग करके।
- **एक उपयोगकर्ता का विवरण**: `queryuser <0xrid>` द्वारा।
- **एक उपयोगकर्ता के समूह**: `queryusergroups <0xrid>` के साथ।
- **एक उपयोगकर्ता का SID प्राप्त किया जाता है**: `lookupnames <username>` के माध्यम से।
- **उपयोगकर्ताओं के उपनाम**: `queryuseraliases [builtin|domain] <sid>` द्वारा।
```bash
# Users' RIDs-forced
for i in $(seq 500 1100); do
rpcclient -N -U "" [IP_ADDRESS] -c "queryuser 0x$(printf '%x\n' $i)" | grep "User Name\|user_rid\|group_rid" && echo "";
done

# samrdump.py can also serve this purpose
```
#### समूहों की गणना

- **समूह** द्वारा: `enumdomgroups`.
- **एक समूह का विवरण** के साथ: `querygroup <0xrid>`.
- **एक समूह के सदस्य** के माध्यम से: `querygroupmem <0xrid>`.

#### उपनाम समूहों की गणना

- **उपनाम समूह** द्वारा: `enumalsgroups <builtin|domain>`.
- **एक उपनाम समूह के सदस्य** के साथ: `queryaliasmem builtin|domain <0xrid>`.

#### डोमेन की गणना

- **डोमेन** का उपयोग करके: `enumdomains`.
- **एक डोमेन का SID प्राप्त किया जाता है** के माध्यम से: `lsaquery`.
- **डोमेन की जानकारी प्राप्त की जाती है** द्वारा: `querydominfo`.

#### शेयरों की गणना

- **सभी उपलब्ध शेयर** द्वारा: `netshareenumall`.
- **एक विशिष्ट शेयर के बारे में जानकारी प्राप्त की जाती है** के साथ: `netsharegetinfo <share>`.

#### SIDs के साथ अतिरिक्त संचालन

- **नाम द्वारा SIDs** का उपयोग करके: `lookupnames <username>`.
- **अधिक SIDs** के माध्यम से: `lsaenumsid`.
- **अधिक SIDs की जांच के लिए RID साइक्लिंग** किया जाता है: `lookupsids <sid>`.

#### **अतिरिक्त कमांड**

| **कमांड**           | **इंटरफेस**                                                                                                                                     | **विवरण**                                                                                                                           |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| queryuser           | SAMR                                                                                                                                              | उपयोगकर्ता जानकारी प्राप्त करें                                                                                                                 |
| querygroup          | समूह की जानकारी प्राप्त करें                                                                                                                        |                                                                                                                                           |
| querydominfo        | डोमेन की जानकारी प्राप्त करें                                                                                                                       |                                                                                                                                           |
| enumdomusers        | डोमेन उपयोगकर्ताओं की गणना करें                                                                                                                            |                                                                                                                                           |
| enumdomgroups       | डोमेन समूहों की गणना करें                                                                                                                           |                                                                                                                                           |
| createdomuser       | एक डोमेन उपयोगकर्ता बनाएं                                                                                                                              |                                                                                                                                           |
| deletedomuser       | एक डोमेन उपयोगकर्ता हटाएं                                                                                                                              |                                                                                                                                           |
| lookupnames         | LSARPC                                                                                                                                            | उपयोगकर्ता नामों को SID[a](https://learning.oreilly.com/library/view/network-security-assessment/9781491911044/ch08.html#ch08fn8) मानों के लिए देखें |
| lookupsids          | उपयोगकर्ता नामों के लिए SIDs देखें (RID[b](https://learning.oreilly.com/library/view/network-security-assessment/9781491911044/ch08.html#ch08fn9) साइक्लिंग) |                                                                                                                                           |
| lsaaddacctrights    | एक उपयोगकर्ता खाते में अधिकार जोड़ें                                                                                                                      |                                                                                                                                           |
| lsaremoveacctrights | एक उपयोगकर्ता खाते से अधिकार हटाएं                                                                                                                 |                                                                                                                                           |
| dsroledominfo       | LSARPC-DS                                                                                                                                         | प्राथमिक डोमेन की जानकारी प्राप्त करें                                                                                                            |
| dsenumdomtrusts     | एक AD वन के भीतर विश्वसनीय डोमेनों की गणना करें                                                                                                     |                                                                                                                                           |

**समझने** के लिए कि उपकरण _**samrdump**_ **और** _**rpcdump**_ कैसे काम करते हैं, आपको [**Pentesting MSRPC**](../135-pentesting-msrpc.md) पढ़ना चाहिए।


{{#include ../../banners/hacktricks-training.md}}
