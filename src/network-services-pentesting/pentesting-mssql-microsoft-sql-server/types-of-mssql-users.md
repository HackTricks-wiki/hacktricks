# MSSQL 用户类型

{{#include ../../banners/hacktricks-training.md}}

表格摘自 [**docs**](https://learn.microsoft.com/en-us/sql/relational-databases/system-catalog-views/sys-database-principals-transact-sql?view=sql-server-ver16)。

| 列名                                   | 数据类型         | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| --------------------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **name**                                | **sysname**       | 主体名称，在数据库中唯一。                                                                                                                                                                                                                                                                                                                                                                                                         |
| **principal_id**                        | **int**           | 主体 ID，在数据库中唯一。                                                                                                                                                                                                                                                                                                                                                                                                           |
| **type**                                | **char(1)**       | <p>主体类型:<br><br>A = 应用程序角色<br><br>C = 映射到证书的用户<br><br>E = 来自 Azure Active Directory 的外部用户<br><br>G = Windows 组<br><br>K = 映射到非对称密钥的用户<br><br>R = 数据库角色<br><br>S = SQL 用户<br><br>U = Windows 用户<br><br>X = 来自 Azure Active Directory 组或应用程序的外部组</p>                                                                                  |
| **type_desc**                           | **nvarchar(60)**  | <p>主体类型的描述。<br><br>APPLICATION_ROLE<br><br>CERTIFICATE_MAPPED_USER<br><br>EXTERNAL_USER<br><br>WINDOWS_GROUP<br><br>ASYMMETRIC_KEY_MAPPED_USER<br><br>DATABASE_ROLE<br><br>SQL_USER<br><br>WINDOWS_USER<br><br>EXTERNAL_GROUPS</p>                                                                                                                                                                                               |
| **default_schema_name**                 | **sysname**       | 当 SQL 名称未指定架构时使用的名称。对于类型为 S、U 或 A 的主体为 Null。                                                                                                                                                                                                                                                                                                                                                   |
| **create_date**                         | **datetime**      | 创建主体的时间。                                                                                                                                                                                                                                                                                                                                                                                                               |
| **modify_date**                         | **datetime**      | 最后修改主体的时间。                                                                                                                                                                                                                                                                                                                                                                                                         |
| **owning_principal_id**                 | **int**           | 拥有此主体的主体 ID。所有固定数据库角色默认由 **dbo** 拥有。                                                                                                                                                                                                                                                                                                                                                |
| **sid**                                 | **varbinary(85)** | 主体的 SID（安全标识符）。SYS 和 INFORMATION SCHEMAS 的值为 NULL。                                                                                                                                                                                                                                                                                                                                                                      |
| **is_fixed_role**                       | **bit**           | 如果为 1，则此行表示一个固定数据库角色的条目：db_owner、db_accessadmin、db_datareader、db_datawriter、db_ddladmin、db_securityadmin、db_backupoperator、db_denydatareader、db_denydatawriter。                                                                                                                                                                                                                                |
| **authentication_type**                 | **int**           | <p><strong>适用于</strong>: SQL Server 2012 (11.x) 及更高版本。<br><br>表示身份验证类型。以下是可能的值及其描述。<br><br>0 : 无身份验证<br>1 : 实例身份验证<br>2 : 数据库身份验证<br>3 : Windows 身份验证<br>4 : Azure Active Directory 身份验证</p>                                                                                                        |
| **authentication_type_desc**            | **nvarchar(60)**  | <p><strong>适用于</strong>: SQL Server 2012 (11.x) 及更高版本。<br><br>身份验证类型的描述。以下是可能的值及其描述。<br><br><code>NONE</code> : 无身份验证<br><code>INSTANCE</code> : 实例身份验证<br><code>DATABASE</code> : 数据库身份验证<br><code>WINDOWS</code> : Windows 身份验证<br><code>EXTERNAL</code>: Azure Active Directory 身份验证</p> |
| **default_language_name**               | **sysname**       | <p><strong>适用于</strong>: SQL Server 2012 (11.x) 及更高版本。<br><br>表示此主体的默认语言。</p>                                                                                                                                                                                                                                                                                                                        |
| **default_language_lcid**               | **int**           | <p><strong>适用于</strong>: SQL Server 2012 (11.x) 及更高版本。<br><br>表示此主体的默认 LCID。</p>                                                                                                                                                                                                                                                                                                                            |
| **allow_encrypted_value_modifications** | **bit**           | <p><strong>适用于</strong>: SQL Server 2016 (13.x) 及更高版本，SQL 数据库。<br><br>在批量复制操作中抑制服务器上的加密元数据检查。这使用户能够在表或数据库之间批量复制使用 Always Encrypted 加密的数据，而无需解密数据。默认值为 OFF。</p>                                                                                                                     |

{{#include ../../banners/hacktricks-training.md}}
