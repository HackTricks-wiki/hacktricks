{{#include ../banners/hacktricks-training.md}}

# 기본 정보

From [Wikipedia](<https://en.wikipedia.org/wiki/Squid_(software)>):

> **Squid**는 캐싱 및 포워딩 HTTP 웹 프록시입니다. 반복 요청을 캐싱하여 웹 서버의 속도를 높이고, 네트워크 리소스를 공유하는 사람들 그룹을 위한 웹, DNS 및 기타 컴퓨터 네트워크 조회를 캐싱하며, 트래픽 필터링을 통해 보안을 지원하는 등 다양한 용도로 사용됩니다. 주로 HTTP와 FTP에 사용되지만, Squid는 Internet Gopher, SSL, TLS 및 HTTPS를 포함한 여러 다른 프로토콜에 대한 제한된 지원을 포함합니다. Squid는 Privoxy와 달리 SOCKS 프로토콜을 지원하지 않으며, SOCKS 지원을 제공하기 위해 Squid와 함께 사용할 수 있습니다.

**기본 포트:** 3128
```
PORT     STATE  SERVICE      VERSION
3128/tcp open   http-proxy   Squid http proxy 4.11
```
# 열거

## 웹 프록시

발견된 이 서비스를 브라우저에서 프록시로 설정해 볼 수 있습니다. 그러나 HTTP 인증으로 구성된 경우 사용자 이름과 비밀번호를 입력하라는 메시지가 표시됩니다.
```bash
# Try to proxify curl
curl --proxy http://10.10.11.131:3128 http://10.10.11.131
```
## Nmap proxified

프록시를 악용하여 **nmap으로 내부 포트를 스캔**할 수도 있습니다.\
proxychains를 구성하여 squid 프록시를 사용하도록 하려면 proxichains.conf 파일의 끝에 다음 줄을 추가하세요: `http 10.10.10.10 3128`  
인증이 필요한 프록시의 경우, 사용자 이름과 비밀번호를 끝에 포함시켜 자격 증명을 구성에 추가합니다: `http 10.10.10.10 3128 username passw0rd`.

그런 다음 proxychains로 nmap을 실행하여 **로컬에서 호스트를 스캔**합니다: `proxychains nmap -sT -n -p- localhost`

## SPOSE Scanner

대안으로, Squid Pivoting Open Port Scanner ([spose.py](https://github.com/aancw/spose))를 사용할 수 있습니다.
```bash
python spose.py --proxy http://10.10.11.131:3128 --target 10.10.11.131
```
{{#include ../banners/hacktricks-training.md}}
