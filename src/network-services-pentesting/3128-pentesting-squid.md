{{#include ../banners/hacktricks-training.md}}

# Informations de base

De [Wikipedia](<https://en.wikipedia.org/wiki/Squid_(software)>):

> **Squid** est un proxy web HTTP de mise en cache et de transfert. Il a une grande variété d'utilisations, y compris l'accélération d'un serveur web en mettant en cache des requêtes répétées, la mise en cache des recherches web, DNS et d'autres recherches de réseau informatique pour un groupe de personnes partageant des ressources réseau, et l'aide à la sécurité en filtrant le trafic. Bien qu'il soit principalement utilisé pour HTTP et FTP, Squid inclut un support limité pour plusieurs autres protocoles, y compris Internet Gopher, SSL, TLS et HTTPS. Squid ne prend pas en charge le protocole SOCKS, contrairement à Privoxy, avec lequel Squid peut être utilisé pour fournir un support SOCKS.

**Port par défaut :** 3128
```
PORT     STATE  SERVICE      VERSION
3128/tcp open   http-proxy   Squid http proxy 4.11
```
# Énumération

## Proxy Web

Vous pouvez essayer de définir ce service découvert comme proxy dans votre navigateur. Cependant, s'il est configuré avec une authentification HTTP, vous serez invité à entrer des noms d'utilisateur et un mot de passe.
```bash
# Try to proxify curl
curl --proxy http://10.10.11.131:3128 http://10.10.11.131
```
## Nmap proxifié

Vous pouvez également essayer d'abuser du proxy pour **scanner les ports internes en proxifiant nmap**.\
Configurez proxychains pour utiliser le proxy squid en ajoutant la ligne suivante à la fin du fichier proxichains.conf : `http 10.10.10.10 3128`  
Pour les proxies nécessitant une authentification, ajoutez les identifiants à la configuration en incluant le nom d'utilisateur et le mot de passe à la fin : `http 10.10.10.10 3128 username passw0rd`.

Ensuite, exécutez nmap avec proxychains pour **scanner l'hôte depuis local** : `proxychains nmap -sT -n -p- localhost`

## Scanner SPOSE

Alternativement, le Squid Pivoting Open Port Scanner ([spose.py](https://github.com/aancw/spose)) peut être utilisé.
```bash
python spose.py --proxy http://10.10.11.131:3128 --target 10.10.11.131
```
{{#include ../banners/hacktricks-training.md}}
