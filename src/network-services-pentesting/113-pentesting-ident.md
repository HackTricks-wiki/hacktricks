# 113 - Pentesting Ident

{{#include ../banners/hacktricks-training.md}}

## Основна інформація

Протокол **Ident** використовується через **Інтернет** для асоціації **TCP-з'єднання** з конкретним користувачем. Спочатку розроблений для допомоги в **управлінні мережею** та **безпеці**, він працює, дозволяючи серверу запитувати клієнта на порту 113 для отримання інформації про користувача конкретного TCP-з'єднання.

Однак, через сучасні проблеми конфіденційності та потенціал для зловживання, його використання зменшилося, оскільки він може ненавмисно розкрити інформацію про користувача несанкціонованим особам. Рекомендується впроваджувати посилені заходи безпеки, такі як зашифровані з'єднання та суворі контроль доступу, щоб зменшити ці ризики.

**Порт за замовчуванням:** 113
```
PORT    STATE SERVICE
113/tcp open  ident
```
## **Перерахунок**

### **Вручну - Отримати користувача/Визначити сервіс**

Якщо машина працює з сервісом ident і samba (445), і ви підключені до samba через порт 43218. Ви можете дізнатися, який користувач виконує сервіс samba, виконавши:

![](<../images/image (843).png>)

Якщо ви просто натиснете Enter, коли підключаєтеся до сервісу:

![](<../images/image (159).png>)

Інші помилки:

![](<../images/image (359).png>)

### Nmap

За замовчуванням (\`-sC\`\`) nmap ідентифікує кожного користувача кожного запущеного порту:
```
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 4.3p2 Debian 9 (protocol 2.0)
|_auth-owners: root
| ssh-hostkey:
|   1024 88:23:98:0d:9d:8a:20:59:35:b8:14:12:14:d5:d0:44 (DSA)
|_  2048 6b:5d:04:71:76:78:56:96:56:92:a8:02:30:73:ee:fa (RSA)
113/tcp open  ident
|_auth-owners: identd
139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: LOCAL)
|_auth-owners: root
445/tcp open  netbios-ssn Samba smbd 3.0.24 (workgroup: LOCAL)
|_auth-owners: root
```
### Ident-user-enum

[**Ident-user-enum**](https://github.com/pentestmonkey/ident-user-enum) - це простий скрипт PERL для запиту служби ident (113/TCP) з метою визначення власника процесу, що слухає на кожному TCP порту цільової системи. Список зібраних імен користувачів можна використовувати для атак на вгадування паролів на інших мережевих службах. Його можна встановити за допомогою `apt install ident-user-enum`.
```
root@kali:/opt/local/recon/192.168.1.100# ident-user-enum 192.168.1.100 22 113 139 445
ident-user-enum v1.0 ( http://pentestmonkey.net/tools/ident-user-enum )

192.168.1.100:22  root
192.168.1.100:113 identd
192.168.1.100:139 root
192.168.1.100:445 root
```
### Shodan

- `oident`

## Файли

identd.conf

## HackTricks Автоматичні Команди
```
Protocol_Name: Ident    #Protocol Abbreviation if there is one.
Port_Number:  113     #Comma separated if there is more than one.
Protocol_Description: Identification Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Ident
Note: |
The Ident Protocol is used over the Internet to associate a TCP connection with a specific user. Originally designed to aid in network management and security, it operates by allowing a server to query a client on port 113 to request information about the user of a particular TCP connection.

https://book.hacktricks.wiki/en/network-services-pentesting/113-pentesting-ident.html

Entry_2:
Name: Enum Users
Description: Enumerate Users
Note: apt install ident-user-enum    ident-user-enum {IP} 22 23 139 445 (try all open ports)
```
{{#include ../banners/hacktricks-training.md}}
