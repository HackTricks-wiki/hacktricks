# Misingi ya Protokali za VoIP

{{#include ../../../banners/hacktricks-training.md}}

## Protokali za Ishara

### SIP (Protokali ya Kuanzisha Kikao)

Hii ni kiwango cha tasnia, kwa maelezo zaidi angalia:

{{#ref}}
sip-session-initiation-protocol.md
{{#endref}}

### MGCP (Protokali ya Udhibiti wa Kituo cha Vyombo)

MGCP (Protokali ya Udhibiti wa Kituo cha Vyombo) ni **protokali ya ishara** na **udhibiti wa simu** iliyoainishwa katika RFC 3435. Inafanya kazi katika usanifu wa kati, ambao unajumuisha vipengele vitatu vikuu:

1. **Wakala wa Simu au Mdhibiti wa Kituo cha Vyombo (MGC)**: Kituo kikuu katika usanifu wa MGCP kinawajibika kwa **kusimamia na kudhibiti vituo vya vyombo**. Kinashughulikia mchakato wa kuanzisha simu, mabadiliko, na kumaliza. MGC inawasiliana na vituo vya vyombo kwa kutumia protokali ya MGCP.
2. **Vituo vya Vyombo (MGs) au Vituo vya Watumwa**: Vifaa hivi **vinabadilisha mtiririko wa vyombo vya kidijitali kati ya mitandao tofauti**, kama vile simu za jadi zinazotumia mzunguko na mitandao ya IP inayotumia pakiti. Vinadhibitiwa na MGC na kutekeleza amri zinazopokelewa kutoka kwake. Vituo vya vyombo vinaweza kujumuisha kazi kama vile kubadilisha muundo, pakiti, na kufuta echo.
3. **Vituo vya Ishara (SGs)**: Vituo hivi vinawajibika kwa **kubadilisha ujumbe wa ishara kati ya mitandao tofauti**, kuwezesha mawasiliano yasiyo na mshono kati ya mifumo ya simu za jadi (mfano, SS7) na mitandao ya IP (mfano, SIP au H.323). Vituo vya ishara ni muhimu kwa ufanisi wa kazi pamoja na kuhakikisha kuwa taarifa za udhibiti wa simu zinawasilishwa ipasavyo kati ya mitandao tofauti.

Kwa muhtasari, MGCP inakusanya mantiki ya udhibiti wa simu katika wakala wa simu, ambayo inarahisisha usimamizi wa vituo vya vyombo na ishara, ikitoa ufanisi bora, kuaminika, na ufanisi katika mitandao ya mawasiliano.

### SCCP (Protokali ya Udhibiti wa Mteja Mwepesi)

Protokali ya Udhibiti wa Mteja Mwepesi (SCCP) ni **protokali ya ishara na udhibiti wa simu** inayomilikiwa na Cisco Systems. Inatumika hasa kwa mawasiliano kati ya **Cisco Unified Communications Manager** (awali inajulikana kama CallManager) na simu za IP za Cisco au vifaa vingine vya sauti na video vya Cisco.

SCCP ni protokali nyepesi inayorahisisha mawasiliano kati ya seva ya udhibiti wa simu na vifaa vya mwisho. Inaitwa "Mwepesi" kwa sababu ya muundo wake wa chini na mahitaji madogo ya upana wa bendi ikilinganishwa na protokali nyingine za VoIP kama H.323 au SIP.

Vipengele vikuu vya mfumo unaotumia SCCP ni:

1. **Seva ya Udhibiti wa Simu**: Seva hii, kwa kawaida ni Cisco Unified Communications Manager, inasimamia mchakato wa kuanzisha simu, mabadiliko, na kumaliza, pamoja na huduma nyingine za simu kama vile kuhamasisha simu, uhamisho wa simu, na kushikilia simu.
2. **Vifaa vya SCCP**: Hivi ni vifaa kama simu za IP, vitengo vya video conferencing, au vifaa vingine vya sauti na video vya Cisco vinavyotumia SCCP kuwasiliana na seva ya udhibiti wa simu. Vinajiandikisha na seva, vinatuma na kupokea ujumbe wa ishara, na kufuata maelekezo yanayotolewa na seva ya udhibiti wa simu kwa ajili ya kushughulikia simu.
3. **Vituo**: Vifaa hivi, kama vituo vya sauti au vituo vya vyombo, vinawajibika kwa kubadilisha mtiririko wa vyombo kati ya mitandao tofauti, kama simu za jadi zinazotumia mzunguko na mitandao ya IP zinazotumia pakiti. Vinaweza pia kujumuisha kazi za ziada, kama vile kubadilisha muundo au kufuta echo.

SCCP inatoa njia rahisi na yenye ufanisi ya mawasiliano kati ya seva za udhibiti wa simu za Cisco na vifaa vya mwisho. Hata hivyo, inafaa kutambua kuwa **SCCP ni protokali ya miliki**, ambayo inaweza kupunguza ufanisi wa kazi pamoja na mifumo isiyo ya Cisco. Katika hali kama hizo, protokali nyingine za kawaida za VoIP kama SIP zinaweza kuwa bora zaidi.

### H.323

H.323 ni **seti ya protokali** za mawasiliano ya multimedia, ikiwa ni pamoja na sauti, video, na mikutano ya data juu ya mitandao inayotumia pakiti, kama mitandao ya IP. Ilitengenezwa na **Shirika la Kimataifa la Mawasiliano** (ITU-T) na inatoa mfumo mpana wa kusimamia vikao vya mawasiliano ya multimedia.

Baadhi ya vipengele muhimu vya seti ya H.323 ni:

1. **Vituo**: Hivi ni vifaa vya mwisho, kama simu za IP, mifumo ya video conferencing, au programu za kompyuta, ambazo zinasaidia H.323 na zinaweza kushiriki katika vikao vya mawasiliano ya multimedia.
2. **Vituo**: Vifaa hivi vinabadilisha mtiririko wa vyombo kati ya mitandao tofauti, kama simu za jadi zinazotumia mzunguko na mitandao ya IP zinazotumia pakiti, kuwezesha ufanisi wa kazi kati ya H.323 na mifumo mingine ya mawasiliano. Vinaweza pia kujumuisha kazi za ziada, kama vile kubadilisha muundo au kufuta echo.
3. **Wakaguzi**: Hivi ni vipengele vya hiari vinavyotoa huduma za udhibiti na usimamizi wa simu katika mtandao wa H.323. Vinatekeleza kazi kama vile tafsiri ya anwani, usimamizi wa upana wa bendi, na udhibiti wa kuingia, kusaidia kusimamia na kuboresha rasilimali za mtandao.
4. **Vitengo vya Udhibiti wa Muktadha (MCUs)**: Vifaa hivi vinasaidia mikutano ya muktadha kwa kusimamia na kuchanganya mtiririko wa vyombo kutoka kwa vituo vingi. MCUs zinawezesha vipengele kama vile udhibiti wa mpangilio wa video, kubadilisha sauti kulingana na sauti, na uwepo wa kudumu, na kufanya iwezekane kuandaa mikutano mikubwa yenye washiriki wengi.

H.323 inasaidia aina mbalimbali za codecs za sauti na video, pamoja na huduma nyingine za ziada kama vile kuhamasisha simu, uhamisho wa simu, kushikilia simu, na kusubiri simu. Licha ya kupokelewa kwake kwa wingi katika siku za awali za VoIP, H.323 imekuwa ikibadilishwa polepole na protokali za kisasa na zinazoweza kubadilika kama **Protokali ya Kuanzisha Kikao (SIP)**, ambayo inatoa ufanisi bora wa kazi pamoja na urahisi wa utekelezaji. Hata hivyo, H.323 bado inatumika katika mifumo mingi ya zamani na inaendelea kuungwa mkono na wauzaji mbalimbali wa vifaa.

### IAX (Inter Asterisk eXchange)

IAX (Inter-Asterisk eXchange) ni **protokali ya ishara na udhibiti wa simu** inayotumiwa hasa kwa mawasiliano kati ya seva za Asterisk PBX (Private Branch Exchange) na vifaa vingine vya VoIP. Ilitengenezwa na Mark Spencer, muundaji wa programu ya Asterisk ya PBX ya chanzo wazi, kama mbadala wa protokali nyingine za VoIP kama SIP na H.323.

IAX inajulikana kwa **urahisi, ufanisi, na urahisi wa utekelezaji**. Baadhi ya vipengele muhimu vya IAX ni:

1. **Bandari Moja ya UDP**: IAX inatumia bandari moja ya UDP (4569) kwa ajili ya ishara na trafiki ya vyombo, ambayo inarahisisha usalama wa moto na kupita NAT, na kufanya iwe rahisi kuanzisha katika mazingira mbalimbali ya mtandao.
2. **Protokali ya Kihesabu**: Tofauti na protokali zinazotumia maandiko kama SIP, IAX ni protokali ya kihesabu, ambayo inapunguza matumizi yake ya upana wa bendi na kufanya iwe yenye ufanisi zaidi kwa ajili ya kutuma ishara na data za vyombo.
3. **Trunking**: IAX inasaidia trunking, ambayo inaruhusu simu nyingi kuunganishwa katika muunganisho mmoja wa mtandao, kupunguza mzigo na kuboresha matumizi ya upana wa bendi.
4. **Ulinzi wa Asili**: IAX ina msaada wa ndani kwa ajili ya ulinzi, ikitumia mbinu kama RSA kwa ajili ya kubadilishana funguo na AES kwa ajili ya ulinzi wa vyombo, ikitoa mawasiliano salama kati ya vifaa vya mwisho.
5. **Mawasiliano ya Mtu kwa Mtu**: IAX inaweza kutumika kwa mawasiliano ya moja kwa moja kati ya vifaa vya mwisho bila haja ya seva kuu, kuwezesha njia rahisi na yenye ufanisi ya kuelekeza simu.

Licha ya faida zake, IAX ina baadhi ya mipaka, kama vile kuzingatia kwake hasa kwenye mfumo wa Asterisk na kupungua kwa kupitishwa ikilinganishwa na protokali zilizothibitishwa kama SIP. Kwa hivyo, IAX huenda isiwe chaguo bora kwa ufanisi wa kazi pamoja na mifumo au vifaa visivyo vya Asterisk. Hata hivyo, kwa wale wanaofanya kazi ndani ya mazingira ya Asterisk, IAX inatoa suluhisho thabiti na lenye ufanisi kwa mawasiliano ya VoIP.

## Protokali za Usafirishaji na Usafirishaji

### SDP (Protokali ya Maelezo ya Kikao)

SDP (Protokali ya Maelezo ya Kikao) ni **muundo wa maandiko** unaotumiwa kuelezea sifa za vikao vya multimedia, kama vile sauti, video, au mikutano ya data, juu ya mitandao ya IP. Ilitengenezwa na **Kikundi cha Kazi cha Uhandisi wa Mtandao (IETF)** na imeainishwa katika **RFC 4566**. SDP haisimamia usafirishaji halisi wa vyombo au kuanzishwa kwa kikao lakini inatumika pamoja na protokali nyingine za ishara, kama **SIP (Protokali ya Kuanzisha Kikao)**, ili kujadili na kubadilishana taarifa kuhusu mtiririko wa vyombo na sifa zao.

Baadhi ya vipengele muhimu vya SDP ni:

1. **Taarifa za Kikao**: SDP inaelezea maelezo ya kikao cha multimedia, ikiwa ni pamoja na jina la kikao, maelezo ya kikao, wakati wa kuanza, na wakati wa kumaliza.
2. **Mtiririko wa Vyombo**: SDP inaelezea sifa za mtiririko wa vyombo, kama vile aina ya vyombo (sauti, video, au maandiko), protokali ya usafirishaji (mfano, RTP au SRTP), na muundo wa vyombo (mfano, taarifa za codec).
3. **Taarifa za Muunganisho**: SDP inatoa taarifa kuhusu anwani ya mtandao (anwani ya IP) na nambari ya bandari ambapo vyombo vinapaswa kutumwa au kupokelewa.
4. **Sifa**: SDP inasaidia matumizi ya sifa kutoa taarifa za ziada, za hiari kuhusu kikao au mtiririko wa vyombo. Sifa zinaweza kutumika kwa ajili ya kubainisha vipengele mbalimbali kama funguo za ulinzi, mahitaji ya upana wa bendi, au mitambo ya kudhibiti vyombo.

SDP kwa kawaida inatumika katika mchakato ufuatao:

1. Sehemu inayozindua inaunda maelezo ya SDP ya kikao cha multimedia kinachopendekezwa, ikiwa ni pamoja na maelezo ya mtiririko wa vyombo na sifa zao.
2. Maelezo ya SDP yanatumwa kwa upande unaopokea, kwa kawaida yakiwa yamejumuishwa ndani ya ujumbe wa protokali ya ishara kama SIP au RTSP.
3. Upande unaopokea unachakata maelezo ya SDP, na kulingana na uwezo wake, unaweza kukubali, kukataa, au kubadilisha kikao kilichopendekezwa.
4. Maelezo ya mwisho ya SDP yanatumwa nyuma kwa upande unaozindua kama sehemu ya ujumbe wa protokali ya ishara, kukamilisha mchakato wa majadiliano.

Urahisi na kubadilika kwa SDP kunafanya iwe kiwango kinachopitishwa kwa wingi kwa ajili ya kuelezea vikao vya multimedia katika mifumo mbalimbali ya mawasiliano, ikicheza jukumu muhimu katika kuanzisha na kusimamia vikao vya multimedia vya wakati halisi juu ya mitandao ya IP.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Protokali ya Usafirishaji wa Wakati Halisi)**: RTP ni protokali ya mtandao iliyoundwa kwa ajili ya usafirishaji wa data za sauti na video, au vyombo vingine vya wakati halisi, juu ya mitandao ya IP. Ilitengenezwa na **IETF** na imeainishwa katika **RFC 3550**, RTP kwa kawaida inatumika pamoja na protokali za ishara kama SIP na H.323 kuwezesha mawasiliano ya multimedia. RTP inatoa mitambo ya **kuunganisha**, **kuweka mpangilio**, na **kuweka alama ya wakati** wa mtiririko wa vyombo, kusaidia kuhakikisha upigaji wa vyombo unakuwa laini na wa wakati.
2. **RTCP (Protokali ya Udhibiti wa Usafirishaji wa Wakati Halisi)**: RTCP ni protokali ya washirika kwa RTP, inayotumiwa kwa ajili ya kufuatilia ubora wa huduma (QoS) na kutoa mrejesho kuhusu usafirishaji wa mtiririko wa vyombo. Imeainishwa katika **RFC 3550** kama RTP, RTCP **hubadilishana pakiti za udhibiti kati ya washiriki katika kikao cha RTP**. Inashiriki taarifa kama vile kupotea kwa pakiti, jitter, na wakati wa kurudi, ambayo husaidia katika kugundua na kubadilisha hali za mtandao, kuboresha ubora wa vyombo kwa ujumla.
3. **SRTP (Protokali ya Usafirishaji wa Wakati Halisi Salama)**: SRTP ni nyongeza ya RTP inayotoa **ulinzi**, **uthibitishaji wa ujumbe**, na **ulinzi wa kurudi** kwa mtiririko wa vyombo, kuhakikisha usafirishaji salama wa data nyeti za sauti na video. Imeainishwa katika **RFC 3711**, SRTP inatumia algorithimu za kihesabu kama AES kwa ajili ya ulinzi na HMAC-SHA1 kwa ajili ya uthibitishaji wa ujumbe. SRTP mara nyingi inatumika pamoja na protokali za ishara salama kama SIP juu ya TLS ili kutoa usalama wa mwisho hadi mwisho katika mawasiliano ya multimedia.
4. **ZRTP (Protokali ya Usafirishaji wa Wakati Halisi ya Zimmermann)**: ZRTP ni protokali ya makubaliano ya funguo ya kihesabu inayotoa **ulinzi wa mwisho hadi mwisho** kwa mtiririko wa vyombo vya RTP. Ilitengenezwa na Phil Zimmermann, muundaji wa PGP, ZRTP inaelezwa katika **RFC 6189**. Tofauti na SRTP, ambayo inategemea protokali za ishara kwa ajili ya kubadilishana funguo, ZRTP imeundwa kufanya kazi bila kutegemea protokali ya ishara. Inatumia **kubadilishana funguo za Diffie-Hellman** kuanzisha siri ya pamoja kati ya pande zinazowasiliana, bila haja ya kuaminiana kabla au miundombinu ya funguo za umma (PKI). ZRTP pia inajumuisha vipengele kama **Mifumo ya Uthibitishaji Mfupi (SAS)** ili kulinda dhidi ya mashambulizi ya mtu katikati.

Protokali hizi zina jukumu muhimu katika **kusafirisha na kulinda mawasiliano ya multimedia ya wakati halisi juu ya mitandao ya IP**. Wakati RTP na RTCP zinashughulikia usafirishaji halisi wa vyombo na kufuatilia ubora, SRTP na ZRTP zinahakikisha kuwa vyombo vilivyotumwa vinapewa ulinzi dhidi ya kusikilizwa, kuharibiwa, na mashambulizi ya kurudi.

{{#include ../../../banners/hacktricks-training.md}}
