# 548 - Pentesting Apple Filing Protocol (AFP)

{{#include ../banners/hacktricks-training.md}}

## Informations de base

Le **Apple Filing Protocol** (**AFP**), autrefois connu sous le nom de AppleTalk Filing Protocol, est un protocole réseau spécialisé inclus dans le **Apple File Service** (**AFS**). Il est conçu pour fournir des services de fichiers pour macOS et l'ancien Mac OS. AFP se distingue par son support des noms de fichiers Unicode, des permissions POSIX et des listes de contrôle d'accès, des forks de ressources, des attributs étendus nommés et des mécanismes de verrouillage de fichiers sophistiqués. C'était le protocole principal pour les services de fichiers dans Mac OS 9 et les versions antérieures.

**Port par défaut :** 548
```bash
PORT    STATE SERVICE
548/tcp open  afp
```
### **Énumération**

Pour l'énumération des services AFP, les commandes et scripts suivants sont utiles :
```bash
msf> use auxiliary/scanner/afp/afp_server_info
nmap -sV --script "afp-* and not dos and not brute" -p <PORT> <IP>
```
**Scripts et leurs descriptions :**

- **afp-ls** : Ce script est utilisé pour lister les volumes et fichiers AFP disponibles.
- **afp-path-vuln** : Il liste tous les volumes et fichiers AFP, mettant en évidence les vulnérabilités potentielles.
- **afp-serverinfo** : Cela fournit des informations détaillées sur le serveur AFP.
- **afp-showmount** : Il liste les partages AFP disponibles ainsi que leurs ACL respectives.

### [**Brute Force**](../generic-hacking/brute-force.md#afp)

{{#include ../banners/hacktricks-training.md}}
