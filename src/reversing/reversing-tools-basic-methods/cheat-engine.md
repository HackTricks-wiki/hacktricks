# Cheat Engine

{{#include ../../banners/hacktricks-training.md}}

[**Cheat Engine**](https://www.cheatengine.org/downloads.php) は、実行中のゲームのメモリ内に重要な値が保存されている場所を見つけて変更するための便利なプログラムです。\
ダウンロードして実行すると、ツールの使い方の**チュートリアル**が**表示**されます。ツールの使い方を学びたい場合は、これを完了することを強くお勧めします。

## 何を検索していますか？

![](<../../images/image (762).png>)

このツールは、プログラムのメモリ内に**どこに値**（通常は数値）が**保存されているか**を見つけるのに非常に便利です。\
**通常、数値**は**4バイト**形式で保存されますが、**ダブル**や**フロート**形式で見つかることもありますし、**数値以外の何か**を探すこともあるかもしれません。そのため、**検索したいものを選択**することを確認する必要があります：

![](<../../images/image (324).png>)

また、**異なる**タイプの**検索**を指定することもできます：

![](<../../images/image (311).png>)

メモリをスキャンしている間に**ゲームを停止する**ためのチェックボックスをチェックすることもできます：

![](<../../images/image (1052).png>)

### ホットキー

_**Edit --> Settings --> Hotkeys**_ では、**ゲームを停止する**などの目的のために異なる**ホットキー**を設定できます（これは、メモリをスキャンしたいときに非常に便利です）。他のオプションも利用可能です：

![](<../../images/image (864).png>)

## 値の変更

探している**値**がどこにあるかを**見つけたら**（このことについては次のステップで詳しく説明します）、それを**ダブルクリック**して、次にその値をダブルクリックすることで**変更**できます：

![](<../../images/image (563).png>)

最後に、メモリ内で変更を行うために**チェックを入れる**：

![](<../../images/image (385).png>)

**メモリ**への**変更**はすぐに**適用**されます（ゲームがこの値を再度使用するまで、値は**ゲーム内で更新されません**）。

## 値の検索

では、重要な値（ユーザーのライフなど）を改善したいと仮定し、その値をメモリ内で探しているとします。

### 既知の変更による検索

値100を探していると仮定し、その値を検索するために**スキャンを実行**すると、多くの一致が見つかります：

![](<../../images/image (108).png>)

次に、**値が変更される**ようなことを行い、ゲームを**停止**して**次のスキャンを実行**します：

![](<../../images/image (684).png>)

Cheat Engineは、**100から新しい値に変わった**値を検索します。おめでとうございます、探していた**値のアドレス**を**見つけました**。これで、値を変更できます。\
_まだいくつかの値がある場合は、再度その値を変更するための操作を行い、もう一度「次のスキャン」を実行してアドレスをフィルタリングします。_

### 不明な値、既知の変更

値が**わからない**が、**どのように変更するか**（変更の値も含む）を知っている場合は、数値を探すことができます。

まず、**不明な初期値**のタイプのスキャンを実行します：

![](<../../images/image (890).png>)

次に、値を変更し、**どのように**その**値が変更されたか**を示し（私の場合は1減少しました）、**次のスキャンを実行**します：

![](<../../images/image (371).png>)

選択した方法で**変更されたすべての値**が表示されます：

![](<../../images/image (569).png>)

値を見つけたら、それを変更できます。

多くの**可能な変更**があり、結果をフィルタリングするためにこれらの**ステップを何度でも行うことができます**：

![](<../../images/image (574).png>)

### ランダムメモリアドレス - コードの発見

これまで、値を保存しているアドレスを見つける方法を学びましたが、**ゲームの異なる実行でそのアドレスがメモリの異なる場所にある可能性が高い**です。では、そのアドレスを常に見つける方法を見てみましょう。

前述のトリックのいくつかを使用して、現在のゲームが重要な値を保存しているアドレスを見つけます。次に（ゲームを停止しても構いません）、見つけた**アドレス**を右クリックし、**「このアドレスにアクセスするものを見つける」**または**「このアドレスに書き込むものを見つける」**を選択します：

![](<../../images/image (1067).png>)

**最初のオプション**は、どの**コードの部分**がこの**アドレスを使用しているか**を知るのに役立ちます（これは、ゲームの**コードを変更できる場所を知る**のに役立ちます）。\
**2番目のオプション**はより**具体的**で、**この値がどこから書き込まれているか**を知るのに役立ちます。

これらのオプションのいずれかを選択すると、**デバッガ**がプログラムに**接続**され、新しい**空のウィンドウ**が表示されます。今、**ゲームをプレイ**してその**値を変更**します（ゲームを再起動せずに）。**ウィンドウ**には、**値を変更しているアドレス**が**表示される**はずです：

![](<../../images/image (91).png>)

値を変更しているアドレスを見つけたら、**自由にコードを変更**できます（Cheat Engineでは、NOPにすぐに変更できます）：

![](<../../images/image (1057).png>)

これで、コードがあなたの数値に影響を与えないように変更することができますし、常にプラスの影響を与えるようにすることもできます。

### ランダムメモリアドレス - ポインタの発見

前のステップに従って、興味のある値がどこにあるかを見つけます。次に、**「このアドレスに書き込むものを見つける」**を使用して、この値を書き込むアドレスを見つけ、ダブルクリックしてディスアセンブリビューを取得します：

![](<../../images/image (1039).png>)

次に、**"\[]"の間の16進数値を検索**する新しいスキャンを実行します（この場合は$edxの値）：

![](<../../images/image (994).png>)

（複数の値が表示される場合は、通常、最小のアドレスのものが必要です）\
これで、**興味のある値を変更するポインタを見つけました**。

**「アドレスを手動で追加」**をクリックします：

![](<../../images/image (990).png>)

次に、「ポインタ」チェックボックスをクリックし、テキストボックスに見つけたアドレスを追加します（このシナリオでは、前の画像で見つけたアドレスは「Tutorial-i386.exe」+2426B0でした）：

![](<../../images/image (392).png>)

（最初の「アドレス」は、入力したポインタアドレスから自動的に入力されることに注意してください）

OKをクリックすると、新しいポインタが作成されます：

![](<../../images/image (308).png>)

これで、その値を変更するたびに、**値があるメモリアドレスが異なっていても重要な値を変更しています**。

### コードインジェクション

コードインジェクションは、ターゲットプロセスにコードの一部を注入し、その後、コードの実行を自分が書いたコードを通過させる技術です（たとえば、ポイントを減らすのではなく与えるなど）。

では、プレイヤーのライフから1を引いているアドレスを見つけたと想像してください：

![](<../../images/image (203).png>)

**ディスアセンブラを表示**して**ディスアセンブルコード**を取得します。\
次に、**CTRL+a**を押してオートアセンブルウィンドウを呼び出し、_**Template --> Code Injection**_を選択します。

![](<../../images/image (902).png>)

**変更したい命令のアドレス**を入力します（通常は自動的に入力されます）：

![](<../../images/image (744).png>)

テンプレートが生成されます：

![](<../../images/image (944).png>)

したがって、**newmem**セクションに新しいアセンブリコードを挿入し、**originalcode**から元のコードを削除します（実行したくない場合）。この例では、注入されたコードは1を引くのではなく2ポイントを追加します：

![](<../../images/image (521).png>)

**実行をクリックすると、あなたのコードがプログラムに注入され、機能の動作が変更されるはずです！**

## **参考文献**

- **Cheat Engineチュートリアル、Cheat Engineを始めるために完了してください**

{{#include ../../banners/hacktricks-training.md}}
