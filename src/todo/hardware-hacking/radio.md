# Radio

{{#include ../../banners/hacktricks-training.md}}

## SigDigger

[**SigDigger** ](https://github.com/BatchDrake/SigDigger)는 GNU/Linux 및 macOS용 무료 디지털 신호 분석기로, 알려지지 않은 라디오 신호의 정보를 추출하도록 설계되었습니다. SoapySDR를 통해 다양한 SDR 장치를 지원하며, FSK, PSK 및 ASK 신호의 조정 가능한 복조를 허용하고, 아날로그 비디오를 디코드하며, 버스트 신호를 분석하고 아날로그 음성 채널을 실시간으로 청취할 수 있습니다.

### Basic Config

설치 후 몇 가지 설정을 고려할 수 있습니다.\
설정(두 번째 탭 버튼)에서 **SDR 장치**를 선택하거나 **파일을 선택**하여 읽고 조정할 주파수와 샘플 속도(PC가 지원하는 경우 최대 2.56Msps 권장)를 설정할 수 있습니다.\\

![](<../../images/image (245).png>)

GUI 동작에서 PC가 지원하는 경우 몇 가지 기능을 활성화하는 것이 좋습니다:

![](<../../images/image (472).png>)

> [!NOTE]
> PC가 신호를 캡처하지 못하는 경우 OpenGL을 비활성화하고 샘플 속도를 낮추는 것을 고려해 보세요.

### Uses

- 신호의 일부를 **캡처하고 분석하기 위해** "Push to capture" 버튼을 필요한 만큼 유지합니다.

![](<../../images/image (960).png>)

- SigDigger의 **튜너**는 **더 나은 신호를 캡처하는 데 도움**을 줍니다(하지만 신호를 저하시킬 수도 있습니다). 이상적으로는 0에서 시작하여 **신호의 개선보다** **노이즈**가 **더 커질 때까지** **크기를 늘려갑니다**.

![](<../../images/image (1099).png>)

### Synchronize with radio channel

[**SigDigger** ](https://github.com/BatchDrake/SigDigger)로 듣고 싶은 채널과 동기화하고 "Baseband audio preview" 옵션을 설정하며, 전송되는 모든 정보를 얻기 위해 대역폭을 설정한 후, 노이즈가 실제로 증가하기 시작하기 전의 수준으로 튜너를 설정합니다:

![](<../../images/image (585).png>)

## Interesting tricks

- 장치가 정보의 버스트를 전송할 때, 일반적으로 **첫 번째 부분은 프리앰블**이므로 **정보를 찾지 못하더라도 걱정할 필요가 없습니다** **또는 그곳에 오류가 있는 경우**.
- 정보 프레임에서는 일반적으로 **서로 잘 정렬된 다양한 프레임을 찾아야 합니다**:

![](<../../images/image (1076).png>)

![](<../../images/image (597).png>)

- **비트를 복구한 후에는 어떤 방식으로든 처리해야 할 수 있습니다**. 예를 들어, 맨체스터 부호화에서 up+down은 1 또는 0이 되고, down+up은 다른 하나가 됩니다. 따라서 1과 0의 쌍(업과 다운)은 실제 1 또는 실제 0이 됩니다.
- 신호가 맨체스터 부호화를 사용하고 있다 하더라도(연속으로 0 또는 1이 2개 이상 발견되는 것은 불가능), **프리앰블에서 여러 개의 1 또는 0을 함께 찾을 수 있습니다**!

### Uncovering modulation type with IQ

신호에 정보를 저장하는 방법은 3가지가 있습니다: **진폭**, **주파수** 또는 **위상**을 변조합니다.\
신호를 확인할 때 정보를 저장하는 데 사용되는 방법을 파악하기 위한 다양한 방법이 있지만(아래에서 더 많은 방법을 찾을 수 있음), 좋은 방법 중 하나는 IQ 그래프를 확인하는 것입니다.

![](<../../images/image (788).png>)

- **AM 감지**: IQ 그래프에 예를 들어 **2개의 원**이 나타나면(아마도 하나는 0이고 다른 하나는 다른 진폭), 이는 AM 신호일 수 있습니다. 이는 IQ 그래프에서 0과 원 사이의 거리가 신호의 진폭이기 때문에 서로 다른 진폭이 사용되는 것을 쉽게 시각화할 수 있습니다.
- **PM 감지**: 이전 이미지와 같이 서로 관련이 없는 작은 원을 찾으면 이는 아마도 위상 변조가 사용되고 있음을 의미합니다. 이는 IQ 그래프에서 점과 0,0 사이의 각도가 신호의 위상이기 때문에 4개의 서로 다른 위상이 사용되고 있음을 의미합니다.
- 정보가 위상이 변경되는 사실에 숨겨져 있고 위상 자체에 숨겨져 있다면, 서로 다른 위상이 명확하게 구분되지 않을 것입니다.
- **FM 감지**: IQ에는 주파수를 식별하는 필드가 없습니다(중심까지의 거리는 진폭이고 각도는 위상입니다).\
따라서 FM을 식별하려면 이 그래프에서 **기본적으로 원만 보아야 합니다**.\
게다가, 다른 주파수는 IQ 그래프에서 **원 주위를 가로지르는 속도 가속**으로 "표현"됩니다(따라서 SysDigger에서 신호를 선택하면 IQ 그래프가 채워지며, 생성된 원에서 가속 또는 방향 변경을 찾으면 이는 FM일 수 있습니다):

## AM Example

{% file src="../../images/sigdigger_20220308_165547Z_2560000_433500000_float32_iq.raw" %}

### Uncovering AM

#### Checking the envelope

[**SigDigger** ](https://github.com/BatchDrake/SigDigger)로 AM 정보를 확인하고 **엔벨로프**를 살펴보면 서로 다른 명확한 진폭 수준을 볼 수 있습니다. 사용된 신호는 AM으로 정보를 전송하는 펄스를 보내고 있으며, 하나의 펄스는 다음과 같이 보입니다:

![](<../../images/image (590).png>)

그리고 이것은 파형과 함께 기호의 일부가 어떻게 보이는지입니다:

![](<../../images/image (734).png>)

#### Checking the Histogram

정보가 있는 전체 신호를 **선택**하고 **진폭** 모드와 **선택**을 선택한 후 **히스토그램**을 클릭합니다. 두 개의 명확한 수준만 발견할 수 있습니다.

![](<../../images/image (264).png>)

예를 들어, 이 AM 신호에서 진폭 대신 주파수를 선택하면 단 하나의 주파수만 발견됩니다(주파수로 변조된 정보가 단 하나의 주파수만 사용하는 것은 불가능합니다).

![](<../../images/image (732).png>)

많은 주파수를 발견하면 이는 FM이 아닐 가능성이 높으며, 아마도 신호 주파수가 채널 때문에 수정되었을 것입니다.

#### With IQ

이 예제에서는 **큰 원**이 있지만 **중앙에 많은 점**이 있는 것을 볼 수 있습니다.

![](<../../images/image (222).png>)

### Get Symbol Rate

#### With one symbol

가장 작은 기호를 선택하여(확실히 1개임을 확인) "Selection freq"를 확인합니다. 이 경우 1.013kHz(즉, 1kHz)가 됩니다.

![](<../../images/image (78).png>)

#### With a group of symbols

선택할 기호의 수를 지정할 수도 있으며, SigDigger는 1 기호의 주파수를 계산합니다(선택한 기호가 많을수록 더 좋습니다). 이 시나리오에서는 10개의 기호를 선택했으며 "Selection freq"는 1.004 Khz입니다:

![](<../../images/image (1008).png>)

### Get Bits

이것이 **AM 변조** 신호이고 **기호 속도**를 찾았으며(이 경우 어떤 것이 위로 가면 1이고 어떤 것이 아래로 가면 0임을 알고 있음), 신호에 인코딩된 **비트를 얻는 것이 매우 쉽습니다**. 따라서 정보를 포함한 신호를 선택하고 샘플링 및 결정을 구성한 후 샘플을 누릅니다( **진폭**이 선택되어 있고 발견된 **기호 속도**가 구성되어 있으며 **Gadner clock recovery**가 선택되어 있는지 확인):

![](<../../images/image (965).png>)

- **선택 간격에 동기화**는 이전에 기호 속도를 찾기 위해 선택한 간격이 사용된다는 것을 의미합니다.
- **수동**은 지정된 기호 속도가 사용된다는 것을 의미합니다.
- **고정 간격 선택**에서는 선택해야 할 간격의 수를 지정하고 그로부터 기호 속도를 계산합니다.
- **Gadner clock recovery**는 일반적으로 가장 좋은 옵션이지만, 여전히 대략적인 기호 속도를 지정해야 합니다.

샘플을 누르면 다음과 같은 결과가 나타납니다:

![](<../../images/image (644).png>)

이제 SigDigger가 **정보를 전달하는 수준의 범위**를 이해하도록 하려면 **하위 수준**을 클릭하고 가장 큰 수준까지 클릭을 유지해야 합니다:

![](<../../images/image (439).png>)

예를 들어 **4개의 서로 다른 진폭 수준**이 있었다면, **기호당 비트를 2로 설정**하고 가장 작은 것에서 가장 큰 것까지 선택해야 했을 것입니다.

마지막으로 **줌을 증가시키고** **행 크기를 변경하면** 비트를 볼 수 있습니다(모든 비트를 선택하고 복사하여 모든 비트를 얻을 수 있습니다):

![](<../../images/image (276).png>)

신호에 기호당 1비트 이상(예: 2비트)이 있는 경우, SigDigger는 **어떤 기호가** 00, 01, 10, 11인지 알 수 있는 방법이 없으므로 서로 다른 **회색 음영**을 사용하여 각 기호를 나타냅니다(비트를 복사하면 **0에서 3까지의 숫자**를 사용하므로 이를 처리해야 합니다).

또한 **맨체스터**와 같은 **부호화**를 사용하고, **up+down**은 **1 또는 0**이 될 수 있으며, **down+up**은 1 또는 0이 될 수 있습니다. 이러한 경우에는 **얻은 업(1)과 다운(0)**을 처리하여 01 또는 10 쌍을 0 또는 1로 대체해야 합니다.

## FM Example

{% file src="../../images/sigdigger_20220308_170858Z_2560000_433500000_float32_iq.raw" %}

### Uncovering FM

#### Checking the frequencies and waveform

FM으로 변조된 정보를 전송하는 신호 예제:

![](<../../images/image (725).png>)

이전 이미지에서 **2개의 주파수가 사용되고 있음을** 꽤 잘 관찰할 수 있지만, **파형**을 관찰하면 **2개의 서로 다른 주파수를 정확하게 식별하지 못할 수도 있습니다**:

![](<../../images/image (717).png>)

이는 내가 두 주파수에서 신호를 캡처했기 때문에 하나는 대략적으로 다른 주파수의 음수입니다:

![](<../../images/image (942).png>)

동기화된 주파수가 **한 주파수에 더 가까운 경우** 두 개의 서로 다른 주파수를 쉽게 볼 수 있습니다:

![](<../../images/image (422).png>)

![](<../../images/image (488).png>)

#### Checking the histogram

정보가 있는 신호의 주파수 히스토그램을 확인하면 두 개의 서로 다른 신호를 쉽게 볼 수 있습니다:

![](<../../images/image (871).png>)

이 경우 **진폭 히스토그램**을 확인하면 **단 하나의 진폭**만 발견되므로 **AM이 될 수 없습니다**(많은 진폭을 발견하면 신호가 채널을 따라 전력을 잃었기 때문일 수 있습니다):

![](<../../images/image (817).png>)

그리고 이것은 위상 히스토그램이 될 것이며(신호가 위상으로 변조되지 않았음을 명확히 보여줍니다):

![](<../../images/image (996).png>)

#### With IQ

IQ에는 주파수를 식별하는 필드가 없습니다(중심까지의 거리는 진폭이고 각도는 위상입니다).\
따라서 FM을 식별하려면 이 그래프에서 **기본적으로 원만 보아야 합니다**.\
게다가, 다른 주파수는 IQ 그래프에서 **원 주위를 가로지르는 속도 가속**으로 "표현"됩니다(따라서 SysDigger에서 신호를 선택하면 IQ 그래프가 채워지며, 생성된 원에서 가속 또는 방향 변경을 찾으면 이는 FM일 수 있습니다):

![](<../../images/image (81).png>)

### Get Symbol Rate

기호를 운반하는 주파수를 찾은 후, **AM 예제에서 사용된 것과 동일한 기술**을 사용하여 기호 속도를 얻을 수 있습니다.

### Get Bits

신호가 주파수로 변조되었고 **기호 속도**를 찾은 후, **AM 예제에서 사용된 것과 동일한 기술**을 사용하여 비트를 얻을 수 있습니다.

{{#include ../../banners/hacktricks-training.md}}
