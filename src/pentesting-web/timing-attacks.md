# Timing Attacks

{{#include ../banners/hacktricks-training.md}}

> [!WARNING]
> Ili kupata uelewa wa kina wa mbinu hii angalia ripoti ya asili kutoka [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

## Basic Information

Lengo la msingi la shambulio la wakati ni kimsingi kuwa na uwezo wa kujibu maswali magumu au kugundua kazi zilizofichwa kwa **kuangalia tofauti za muda katika majibu kutoka kwa maombi sawa**.

Kawaida hii imekuwa ngumu sana kwa sababu ya ucheleweshaji na jitter inayosababishwa na mtandao na seva. Hata hivyo, tangu kugunduliwa na kuboreshwa kwa [**Race Condition Single Packet attack**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), inawezekana kutumia mbinu hii kuondoa ucheleweshaji wote wa mtandao kutoka kwenye hesabu.\
Kuacha tu **ucheleweshaji wa seva** kunafanya shambulio la wakati kuwa rahisi kugundua na kutumia.

## Discoveries

### Hidden Attack Surface

Katika chapisho la blogu kuna maelezo jinsi kutumia mbinu hii ilivyowezesha kupata vigezo vilivyofichwa na hata vichwa vya habari kwa kuangalia kwamba kila wakati param au kichwa kilipokuwa katika ombi kulikuwa na **tofauti ya muda ya takriban 5ms**. Kwa kweli, mbinu hii ya kugundua imeongezwa kwenye **Param Miner** katika Burp Suite.

Tofauti hizi za muda zinaweza kuwa kwa sababu ya **ombio la DNS** lilifanywa, baadhi ya **kumbukumbu ilandikwa** kwa sababu ya pembejeo isiyo sahihi au kwa sababu baadhi ya **ukaguzi unafanywa** wakati parameter inapatikana katika ombi.

Kitu unahitaji kukumbuka unapofanya aina hii ya mashambulizi ni kwamba kwa sababu ya asili ya kufichwa ya uso, huenda usijue ni sababu gani halisi ya tofauti za muda.

### Reverse Proxy Misconfigurations

Katika utafiti huo huo, ilishirikiwa kwamba mbinu ya wakati ilikuwa nzuri kugundua "scoped SSRFs" (ambazo ni SSRFs ambazo zinaweza kufikia tu IP/domaine zilizoruhusiwa). Kwa **kuangalia tofauti ya muda wakati domaine iliyoruhusiwa imewekwa** dhidi ya wakati domaine isiyoruhusiwa imewekwa husaidia kugundua proxies wazi hata kama jibu ni sawa.

Mara proxy wazi iliyopangwa inapotambuliwa, ilikuwa inawezekana kupata malengo halali kwa kuchambua subdomains zinazojulikana za lengo na hii iliruhusu:

- **Kupita moto** kwa kufikia subdomains zilizozuiliwa kupitia **proxy wazi** badala ya kupitia mtandao
- Zaidi ya hayo, kutumia **proxy wazi** pia inawezekana **gundua subdomains mpya zinazopatikana tu ndani.**
- **Mashambulizi ya uigaji wa Front-End**: Seva za front-end kawaida huongeza vichwa vya habari kwa backend kama `X-Forwarded-For` au `X-Real-IP`. Proxies wazi zinazopokea vichwa hivi zitaongeza kwenye mwisho wa ombi, kwa hivyo, mshambuliaji anaweza kuwa na uwezo wa kufikia hata maeneo zaidi ya ndani kwa kuongeza vichwa hivi na thamani zilizoorodheshwa.

## References

- [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{{#include ../banners/hacktricks-training.md}}
