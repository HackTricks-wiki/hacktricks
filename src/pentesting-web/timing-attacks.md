# Zamanlama Saldırıları

{{#include ../banners/hacktricks-training.md}}

> [!WARNING]
> Bu tekniği derinlemesine anlamak için [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work) adresindeki orijinal rapora bakın.

## Temel Bilgiler

Zamanlama saldırısının temel amacı, **benzer isteklerden gelen yanıtların zaman farklarını kontrol ederek** karmaşık soruları yanıtlayabilmek veya gizli işlevleri tespit edebilmektir.

Geleneksel olarak bu, hem ağ hem de sunucu tarafından sağlanan gecikme ve dalgalanma nedeniyle oldukça karmaşık olmuştur. Ancak, [**Yarış Durumu Tek Paket saldırısı**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization) keşfedilip geliştirildikten sonra, bu tekniği kullanarak tüm ağ gecikmelerini denklemin dışına çıkarmak mümkündür.\
Sadece **sunucu gecikmelerinin** kalması, zamanlama saldırısını keşfetmeyi ve kötüye kullanmayı kolaylaştırır.

## Keşifler

### Gizli Saldırı Yüzeyi

Blog yazısında, bu tekniği kullanarak gizli parametrelerin ve hatta başlıkların bulunmasının mümkün olduğu, parametre veya başlık istekte bulunduğunda yaklaşık **5ms'lik bir zaman farkı** olduğu kontrol edilerek belirtildi. Aslında, bu keşif tekniği **Param Miner**'a Burp Suite'te eklenmiştir.

Bu zaman farkları, bir **DNS isteği** yapıldığında, geçersiz bir girdi nedeniyle bazı **logların yazılması** veya bir parametre istekte bulunduğunda bazı **kontrollerin yapılması** nedeniyle olabilir.

Bu tür saldırılar gerçekleştirirken hatırlamanız gereken bir şey, yüzeyin gizli doğası nedeniyle zaman farklarının gerçek nedenini bilmeyebileceğinizdir.

### Ters Proxy Yanlış Yapılandırmaları

Aynı araştırmada, zamanlama tekniğinin "kapsamlı SSRF'leri" keşfetmek için harika olduğu paylaşıldı (bu, yalnızca izin verilen IP/domain'lere erişebilen SSRF'lerdir). **İzin verilen bir alan adı ayarlandığında** ve izin verilmeyen bir alan adı ayarlandığında zaman farkını kontrol etmek, yanıt aynı olsa bile açık proxy'leri keşfetmeye yardımcı olur.

Bir kapsamlı açık proxy keşfedildiğinde, hedefin bilinen alt alan adlarını ayrıştırarak geçerli hedefler bulmak mümkündü ve bu, şunları sağlamıştır:

- **Ateş duvarlarını atlatmak** için kısıtlı alt alan adlarına **açık proxy** üzerinden erişim sağlamak
- Dahası, bir **açık proxy** kullanarak yalnızca dahili olarak erişilebilen **yeni alt alan adlarını keşfetmek** de mümkündür.
- **Ön Uç taklit saldırıları**: Ön uç sunucuları genellikle arka uç için `X-Forwarded-For` veya `X-Real-IP` gibi başlıklar ekler. Bu başlıkları alan açık proxy'ler, istenen uç noktaya ekleyecektir; bu nedenle, bir saldırgan bu başlıkları beyaz listeye alınmış değerlerle ekleyerek daha fazla dahili alan adına erişim sağlayabilir.

## Referanslar

- [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{{#include ../banners/hacktricks-training.md}}
