# Iframe Traps

{{#include ../banners/hacktricks-training.md}}

## Basiese Inligting

Hierdie vorm van die misbruik van XSS via iframes om inligting van die gebruiker wat oor die webblad beweeg te steel, is oorspronklik in hierdie 2 plasings van trustedsec.com gepubliseer: [**hier**](https://trustedsec.com/blog/persisting-xss-with-iframe-traps) **en** [**hier**](https://trustedsec.com/blog/js-tap-weaponizing-javascript-for-red-teams).

Die aanval begin op 'n bladsy wat kwesbaar is vir 'n XSS waar dit moontlik is om te maak dat die **slagoffers nie die XSS verlaat nie** deur hulle te **laat navigeer binne 'n iframe** wat die hele webtoepassing beset.

Die XSS-aanval sal basies die webblad in 'n iframe in 100% van die skerm laai. Daarom, die slagoffer **sal nie agterkom dat hy binne 'n iframe is nie**. Dan, as die slagoffer in die bladsy navigeer deur op skakels binne die iframe (binne die web) te klik, sal hy **binne die iframe navigeer** met die arbitrÃªre JS wat inligting van hierdie navigasie steel.

Boonop, om dit meer realisties te maak, is dit moontlik om 'n paar **luisteraars** te gebruik om te kyk wanneer 'n iframe die ligging van die bladsy verander, en die URL van die blaaier met daardie plekke op te dateer wat die gebruiker dink hy beweeg tussen bladsye met die blaaier.

<figure><img src="../images/image (1248).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png">https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png</a></p></figcaption></figure>

<figure><img src="../images/image (1249).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png">https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png</a></p></figcaption></figure>

Boonop, dit is moontlik om luisteraars te gebruik om sensitiewe inligting te steel, nie net die ander bladsye wat die slagoffer besoek nie, maar ook die data wat gebruik word om **vorms in te vul** en dit te stuur (akkrediteer?) of om **die plaaslike berging te steel**...

Natuurlik, die hoofbeperkings is dat 'n **slagoffer wat die oortjie sluit of 'n ander URL in die blaaiers plaas, die iframe sal ontsnap**. 'n Ander manier om dit te doen, sou wees om die **bladsy te ververs**, egter, dit kan gedeeltelik **voorkom** word deur die regsklik-konteksmenu te deaktiveer elke keer as 'n nuwe bladsy binne die iframe gelaai word of om op te let wanneer die muis van die gebruiker die iframe verlaat, moontlik om die herlaai-knoppie van die blaaiers te klik en in hierdie geval word die URL van die blaaiers opgedateer met die oorspronklike URL wat kwesbaar is vir XSS, so as die gebruiker dit herlaai, sal dit weer vergiftig word (let daarop dat dit nie baie stil is nie).

{{#include ../banners/hacktricks-training.md}}
