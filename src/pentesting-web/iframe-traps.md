# Iframe Tuzakları

{{#include ../banners/hacktricks-training.md}}

## Temel Bilgiler

Kullanıcının web sayfasında gezinirken bilgilerini çalmak için iframe'ler aracılığıyla XSS'in kötüye kullanılması, başlangıçta trustedsec.com'daki bu 2 gönderide yayımlandı: [**burada**](https://trustedsec.com/blog/persisting-xss-with-iframe-traps) **ve** [**burada**](https://trustedsec.com/blog/js-tap-weaponizing-javascript-for-red-teams).

Saldırı, **kurbanların XSS'ten çıkmamalarını sağlamak** için bir iframe içinde **gezinebilecekleri** bir XSS'e karşı savunmasız bir sayfada başlar.

XSS saldırısı, temel olarak web sayfasını ekranın %100'ünde bir iframe içinde yükleyecektir. Bu nedenle, kurban **iframe içinde olduğunu fark etmeyecek**. Ardından, kurban iframe içindeki bağlantılara tıklayarak sayfada gezinirse, **iframe içinde gezinmiş** olacak ve bu gezinmeden bilgi çalan keyfi JS yüklenmiş olacaktır.

Ayrıca, daha gerçekçi hale getirmek için, bir iframe'in sayfanın konumunu değiştirdiğinde kontrol etmek için bazı **dinleyiciler** kullanmak ve kullanıcının tarayıcıda sayfalar arasında hareket ettiğini düşündüğü konumlarla tarayıcının URL'sini güncellemek mümkündür.

<figure><img src="../images/image (1248).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png">https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png</a></p></figcaption></figure>

<figure><img src="../images/image (1249).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png">https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png</a></p></figcaption></figure>

Ayrıca, kurbanın ziyaret ettiği diğer sayfaların yanı sıra, **doldurulmuş formlar** için kullanılan verileri çalmak veya **yerel depolamayı çalmak** için dinleyiciler kullanmak mümkündür...

Elbette, ana sınırlamalar, **bir kurbanın sekmeyi kapatması veya tarayıcıda başka bir URL girmesi durumunda iframe'den kaçacağıdır**. Bunu yapmanın bir diğer yolu, **sayfayı yenilemek** olacaktır; ancak, bu, iframe içinde yeni bir sayfa yüklendiğinde sağ tıklama bağlam menüsünü devre dışı bırakarak veya kullanıcının fare hareketinin iframe'den çıkıp çıkmadığını kontrol ederek kısmen **önlenebilir**. Bu durumda, tarayıcının URL'si XSS'e karşı savunmasız olan orijinal URL ile güncellenir, bu nedenle kullanıcı bunu yenilerse, tekrar zehirlenir (bu durumun çok gizli olmadığını unutmayın).

{{#include ../banners/hacktricks-training.md}}
