# Iframe Traps

{{#include ../banners/hacktricks-training.md}}

## Basic Information

Ova forma zloupotrebe XSS-a putem iframes-a za krađu informacija od korisnika koji se kreće po veb stranici prvobitno je objavljena u ova 2 posta sa trustedsec.com: [**ovde**](https://trustedsec.com/blog/persisting-xss-with-iframe-traps) **i** [**ovde**](https://trustedsec.com/blog/js-tap-weaponizing-javascript-for-red-teams).

Napad počinje na stranici koja je ranjiva na XSS gde je moguće učiniti da **žrtve ne napuste XSS** tako što će ih **navigirati unutar iframes-a** koji zauzima celu veb aplikaciju.

XSS napad će u osnovi učitati veb stranicu u iframes-u na 100% ekrana. Stoga, žrtva **neće primetiti da je unutar iframes-a**. Zatim, ako žrtva navigira na stranici klikom na linkove unutar iframes-a (unutar veba), ona će **navigirati unutar iframes-a** sa proizvoljnim JS-om koji krade informacije iz ove navigacije.

Štaviše, da bi to bilo realističnije, moguće je koristiti neke **slušače** da provere kada iframes menja lokaciju stranice, i ažurirati URL pretraživača sa tim lokacijama za koje korisnik misli da se kreće po stranicama koristeći pretraživač.

<figure><img src="../images/image (1248).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png">https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png</a></p></figcaption></figure>

<figure><img src="../images/image (1249).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png">https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png</a></p></figcaption></figure>

Pored toga, moguće je koristiti slušače za krađu osetljivih informacija, ne samo drugih stranica koje žrtva posećuje, već i podataka koji se koriste za **popunjavanje obrazaca** i slanje (akreditivi?) ili za **krađu lokalne memorije**...

Naravno, glavna ograničenja su da **žrtva zatvaranjem taba ili unosom druge URL adrese u pretraživač izlazi iz iframes-a**. Drugi način da se to uradi bio bi da se **osveži stranica**, međutim, to bi moglo biti delimično **sprečeno** onemogućavanjem kontekstnog menija desnog klika svaki put kada se nova stranica učita unutar iframes-a ili primetanjem kada miš korisnika napusti iframes, potencijalno da klikne na dugme za osvežavanje pretraživača i u tom slučaju URL pretraživača se ažurira sa originalnim URL-om ranjivim na XSS, tako da ako korisnik osveži, ponovo će biti zaražen (napomena da ovo nije baš diskretno).

{{#include ../banners/hacktricks-training.md}}
