# HTTP Verbinding Versoek Smuggling

{{#include ../banners/hacktricks-training.md}}

**Dit is 'n opsomming van die pos** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks)

## Verbindingstoestand Aanvalle <a href="#state" id="state"></a>

### Eerste-versoek Validasie

Wanneer versoeke gerouteer word, mag omgekeerde proxies afhanklik wees van die **Host header** om die bestemming agtergrond bediener te bepaal, dikwels staatmakend op 'n witlys van gashere wat toegang toegelaat word. Daar bestaan egter 'n kwesbaarheid in sommige proxies waar die witlys slegs op die aanvanklike versoek in 'n verbinding afgedwing word. Gevolglik kan aanvallers dit benut deur eers 'n versoek na 'n toegelate gasheer te maak en dan 'n interne webwerf deur dieselfde verbinding aan te vra:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### Eerste-aanvraag Routering

In sommige konfigurasies kan 'n voorste bediener die **Host-kop van die eerste aanvraag** gebruik om die agterkant routering vir daardie aanvraag te bepaal, en dan alle daaropvolgende aanwysings van dieselfde kliÃ«ntverbinding persistent na dieselfde agterkantverbinding te stuur. Dit kan soos volg gedemonstreer word:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Hierdie probleem kan potensieel gekombineer word met [Host header attacks](https://portswigger.net/web-security/host-header), soos wagwoordherstel vergiftiging of [web cache poisoning](https://portswigger.net/web-security/web-cache-poisoning), om ander kwesbaarhede te benut of ongeoorloofde toegang tot bykomende virtuele gasheer te verkry.

> [!NOTE]
> Om hierdie kwesbaarhede te identifiseer, kan die 'connection-state probe' funksie in HTTP Request Smuggler gebruik word.

{{#include ../banners/hacktricks-training.md}}
