# HTTP कनेक्शन अनुरोध स्मगलिंग

{{#include ../banners/hacktricks-training.md}}

**यह पोस्ट का सारांश है** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks)

## कनेक्शन स्थिति हमले <a href="#state" id="state"></a>

### पहले-अनुरोध सत्यापन

जब अनुरोधों को रूट किया जाता है, तो रिवर्स प्रॉक्सी **होस्ट हेडर** पर निर्भर हो सकते हैं ताकि गंतव्य बैक-एंड सर्वर का निर्धारण किया जा सके, अक्सर उन होस्टों की एक व्हाइटलिस्ट पर निर्भर करते हैं जिन्हें पहुंच की अनुमति है। हालांकि, कुछ प्रॉक्सियों में एक कमजोर बिंदु है जहां व्हाइटलिस्ट केवल कनेक्शन में प्रारंभिक अनुरोध पर लागू होती है। परिणामस्वरूप, हमलावर इसका लाभ उठाकर पहले एक अनुमत होस्ट पर अनुरोध कर सकते हैं और फिर उसी कनेक्शन के माध्यम से एक आंतरिक साइट का अनुरोध कर सकते हैं:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### First-request Routing

कुछ कॉन्फ़िगरेशन में, एक फ्रंट-एंड सर्वर **पहले अनुरोध के होस्ट हेडर** का उपयोग उस अनुरोध के लिए बैक-एंड रूटिंग निर्धारित करने के लिए कर सकता है, और फिर उसी क्लाइंट कनेक्शन से सभी बाद के अनुरोधों को उसी बैक-एंड कनेक्शन पर स्थायी रूप से रूट कर सकता है। इसे इस प्रकार प्रदर्शित किया जा सकता है:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
यह समस्या [Host header attacks](https://portswigger.net/web-security/host-header) के साथ मिलाई जा सकती है, जैसे कि पासवर्ड रीसेट पॉइज़निंग या [web cache poisoning](https://portswigger.net/web-security/web-cache-poisoning), अन्य कमजोरियों का शोषण करने या अतिरिक्त वर्चुअल होस्टों तक अनधिकृत पहुंच प्राप्त करने के लिए।

> [!NOTE]
> इन कमजोरियों की पहचान करने के लिए, HTTP Request Smuggler में 'connection-state probe' फीचर का उपयोग किया जा सकता है।

{{#include ../banners/hacktricks-training.md}}
