# HTTP Bağlantı İsteği Smuggling

{{#include ../banners/hacktricks-training.md}}

**Bu, gönderinin bir özetidir** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks)

## Bağlantı Durumu Saldırıları <a href="#state" id="state"></a>

### İlk İstek Doğrulaması

İstekleri yönlendirirken, ters proxy'ler genellikle hedef arka uç sunucusunu belirlemek için **Host başlığına** dayanabilir ve genellikle erişime izin verilen hostların bir beyaz listesini kullanır. Ancak, bazı proxy'lerde beyaz listenin yalnızca bir bağlantıdaki ilk istekte uygulanmasına neden olan bir zafiyet bulunmaktadır. Sonuç olarak, saldırganlar önce izin verilen bir hosta istek yaparak ve ardından aynı bağlantı üzerinden bir iç site talep ederek bunu istismar edebilirler:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### İlk İstek Yönlendirmesi

Bazı yapılandırmalarda, bir ön uç sunucusu **ilk isteğin Host başlığını** kullanarak o isteğin arka uç yönlendirmesini belirleyebilir ve ardından aynı istemci bağlantısından gelen tüm sonraki istekleri aynı arka uç bağlantısına sürekli olarak yönlendirebilir. Bu şu şekilde gösterilebilir:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Bu sorun, diğer zafiyetleri istismar etmek veya ek sanal hostlara yetkisiz erişim sağlamak için şifre sıfırlama zehirlenmesi veya [web cache poisoning](https://portswigger.net/web-security/web-cache-poisoning) gibi [Host header attacks](https://portswigger.net/web-security/host-header) ile birleştirilebilir.

> [!NOTE]
> Bu zafiyetleri tanımlamak için HTTP Request Smuggler'daki 'connection-state probe' özelliği kullanılabilir.

{{#include ../banners/hacktricks-training.md}}
