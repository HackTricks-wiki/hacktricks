# HTTP Connection Contamination

{{#include ../banners/hacktricks-training.md}}

**Ovo je sažetak posta: [https://portswigger.net/research/http-3-connection-contamination](https://portswigger.net/research/http-3-connection-contamination)**. Proverite za više detalja!

Web pretraživači mogu ponovo koristiti jednu HTTP/2+ vezu za različite veb sajtove putem [HTTP connection coalescing](https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing), uz zajedničke IP adrese i zajednički TLS sertifikat. Međutim, ovo može doći u sukob sa **first-request routing** u reverznim proxy-ima, gde se naredni zahtevi usmeravaju na pozadinu određenu prvim zahtevom. Ova pogrešna usmeravanja mogu dovesti do sigurnosnih ranjivosti, posebno kada se kombinuju sa wildcard TLS sertifikatima i domenima kao što je `*.example.com`.

Na primer, ako `wordpress.example.com` i `secure.example.com` oboje koriste isti reverzni proxy i imaju zajednički wildcard sertifikat, koalescing veze u pretraživaču može dovesti do toga da se zahtevi za `secure.example.com` pogrešno obrade od strane WordPress pozadine, iskorišćavajući ranjivosti kao što je XSS.

Da biste posmatrali koalescing veze, možete koristiti Chrome-ovu Network karticu ili alate poput Wiresharka. Evo isječka za testiranje:
```javascript
fetch("//sub1.hackxor.net/", { mode: "no-cors", credentials: "include" }).then(
() => {
fetch("//sub2.hackxor.net/", { mode: "no-cors", credentials: "include" })
}
)
```
Pretnja je trenutno ograničena zbog retkosti usmeravanja prvog zahteva i složenosti HTTP/2. Međutim, predložene promene u HTTP/3, koje olakšavaju zahtev za podudaranje IP adrese, mogle bi proširiti površinu napada, čineći servere sa wildcard sertifikatom ranjivijim bez potrebe za MITM napadom.

Najbolje prakse uključuju izbegavanje usmeravanja prvog zahteva u obrnutim proxy-ima i opreznost sa wildcard TLS sertifikatima, posebno sa pojavom HTTP/3. Redovno testiranje i svest o ovim složenim, međusobno povezanim ranjivostima su ključni za održavanje bezbednosti veba.

{{#include ../banners/hacktricks-training.md}}
