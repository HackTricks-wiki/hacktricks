# 重写已释放的块

{{#include ../../banners/hacktricks-training.md}}

一些提议的堆利用技术需要能够重写已释放块中的指针。本页的目标是总结可能授予此访问权限的潜在漏洞：

### 简单的使用后释放

如果攻击者能够**在一个已释放的块中写入信息**，他们可以利用这一点来重写所需的指针。

### 双重释放

如果攻击者能够**对同一个块进行两次`free`**（可能在之间释放其他块）并使其**在同一个桶中出现两次**，用户将能够**稍后分配该块**，**写入所需的指针**，然后**再次分配它**，触发该块被分配的操作（例如，快速桶攻击，tcache攻击...）

### 堆溢出

可能会**溢出一个分配的块，后面有一个已释放的块**，并修改其一些头部/指针。

### 一偏移溢出

在这种情况下，可以**修改内存中下一个块的大小**。攻击者可以利用这一点**使一个分配的块具有更大的大小**，然后**`free`**它，使该块被**添加到不同大小的桶中**（更大），然后分配**伪大小**，攻击将能够访问一个**实际大小更大的块**，**因此授予重叠块的情况**，这可以以与**堆溢出**相同的方式利用（查看前一节）。

{{#include ../../banners/hacktricks-training.md}}
