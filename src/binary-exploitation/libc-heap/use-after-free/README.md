# Use After Free

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

이 취약점은 프로그램이 객체를 위해 힙에 **공간을 저장**하고, 그곳에 **정보를 기록**한 후, 더 이상 필요하지 않다고 판단하여 **해제**한 다음 **다시 접근**할 때 발생합니다.

여기서 문제는 **해제된 메모리에 접근**할 때 불법이 아니기 때문에 (에러가 발생하지 않음) 발생합니다. 따라서 프로그램(또는 공격자)이 **해제된 메모리를 할당하고 임의의 데이터를 저장**할 수 있다면, 해제된 메모리에 초기 포인터에서 접근할 때 **데이터가 덮어쓰여질 수** 있으며, 이는 원래 저장된 데이터의 민감도에 따라 **취약점을 초래할 수** 있습니다(예를 들어, 호출될 함수의 포인터였다면 공격자가 이를 제어할 수 있습니다).

### First Fit attack

First fit 공격은 glibc와 같은 일부 메모리 할당기가 해제된 메모리를 관리하는 방식을 목표로 합니다. 메모리 블록을 해제하면 해당 블록이 목록에 추가되고, 새로운 메모리 요청은 그 목록의 끝에서 가져옵니다. 공격자는 이 동작을 이용하여 **어떤 메모리 블록이 재사용되는지를 조작하여 이를 제어할 수 있습니다**. 이는 공격자가 **재할당되는 메모리의 내용을 변경**할 수 있는 "use-after-free" 문제로 이어져 보안 위험을 초래할 수 있습니다.\
자세한 정보는 다음을 확인하세요:

{{#ref}}
first-fit.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
