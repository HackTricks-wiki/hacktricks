# Use After Free

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

Όπως υποδηλώνει το όνομα, αυτή η ευπάθεια συμβαίνει όταν ένα πρόγραμμα **αποθηκεύει κάποιο χώρο** στη heap για ένα αντικείμενο, **γράφει** κάποιες πληροφορίες εκεί, **απελευθερώνει** το προφανώς επειδή δεν χρειάζεται πια και στη συνέχεια **το προσπελάζει ξανά**.

Το πρόβλημα εδώ είναι ότι δεν είναι παράνομο (δεν **θα υπάρχουν σφάλματα**) όταν **προσπελαστεί μνήμη που έχει απελευθερωθεί**. Έτσι, αν το πρόγραμμα (ή ο επιτιθέμενος) καταφέρει να **κατανεμηθεί η απελευθερωμένη μνήμη και να αποθηκευτούν αυθαίρετα δεδομένα**, όταν η απελευθερωμένη μνήμη προσπελαστεί από τον αρχικό δείκτη, **τα δεδομένα θα έχουν αντικατασταθεί** προκαλώντας μια **ευπάθεια που θα εξαρτάται από την ευαισθησία των δεδομένων** που είχαν αποθηκευτεί αρχικά (αν ήταν ένας δείκτης μιας συνάρτησης που επρόκειτο να κληθεί, ένας επιτιθέμενος θα μπορούσε να γνωρίζει πώς να τον ελέγξει).

### First Fit attack

Μια επίθεση first fit στοχεύει τον τρόπο που ορισμένοι διαχειριστές μνήμης, όπως στη glibc, διαχειρίζονται την απελευθερωμένη μνήμη. Όταν απελευθερώνετε ένα μπλοκ μνήμης, προστίθεται σε μια λίστα, και οι νέες αιτήσεις μνήμης αντλούν από αυτή τη λίστα από το τέλος. Οι επιτιθέμενοι μπορούν να χρησιμοποιήσουν αυτή τη συμπεριφορά για να χει manip ulate **ποια μπλοκ μνήμης επαναχρησιμοποιούνται, αποκτώντας δυνητικά έλεγχο πάνω τους**. Αυτό μπορεί να οδηγήσει σε ζητήματα "use-after-free", όπου ένας επιτιθέμενος θα μπορούσε να **αλλάξει το περιεχόμενο της μνήμης που επανακατανέμεται**, δημιουργώντας έναν κίνδυνο ασφαλείας.\
Δείτε περισσότερες πληροφορίες στο:

{{#ref}}
first-fit.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
