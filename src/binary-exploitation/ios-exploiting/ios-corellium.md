# iOS Як підключитися до Corellium

{{#include ../../banners/hacktricks-training.md}}

## **Вимоги**
- A Corellium iOS VM (jailbroken or not). У цьому керівництві передбачається, що у вас є доступ до Corellium.
- Локальні інструменти: **ssh/scp**.
- (Необов'язково) **SSH keys** додані до вашого проєкту Corellium для безпарольного входу.


## **Підключення до iPhone VM з localhost**

### A) **Quick Connect (без VPN)**
0) Додайте ваш ssh key у **`/admin/projects`** (рекомендовано).
1) Відкрийте сторінку пристрою → **Connect**
2) Скопіюйте команду Quick Connect SSH, яку показує Corellium, і вставте її в термінал.
3) Введіть пароль або використайте ваш ключ (рекомендовано).

### B) **VPN → direct SSH**
0) Додайте ваш ssh key у **`/admin/projects`** (рекомендовано).
1) Сторінка пристрою → **CONNECT** → **VPN** → завантажте `.ovpn` та підключіться через будь-який VPN client, що підтримує TAP mode. (Перевірте [https://support.corellium.com/features/connect/vpn](https://support.corellium.com/features/connect/vpn) якщо виникають проблеми.)
2) Підключіться по SSH до адреси VM **10.11.x.x**:
```bash
ssh root@10.11.1.1
```
## **Завантажити нативний бінарний файл та виконати його**

### 2.1 **Завантаження**
- Якщо Quick Connect дав вам host/port:
```bash
scp -J <domain> ./mytool root@10.11.1.1:/var/root/mytool
```
- Якщо використовуєте VPN (10.11.x.x):
```bash
scp ./mytool -J <domain> root@10.11.1.1:/var/root/mytool
```
## **Завантажити та встановити iOS-додаток (.ipa)**

### Шлях A — **Web UI (найшвидший)**
1) Сторінка пристрою → вкладка **Apps** → **Install App** → оберіть свій `.ipa`.
2) З тієї ж вкладки ви можете **launch/kill/uninstall**.

### Шлях B — **Scripted via Corellium Agent**
1) Використайте API Agent для **upload**, а потім **install**:
```js
// Node.js (pseudo) using Corellium Agent
await agent.upload("./app.ipa", "/var/tmp/app.ipa");
await agent.install("/var/tmp/app.ipa", (progress, status) => {
console.log(progress, status);
});
```
### Path C — **Не з джейлбрейком (коректне підписування / Sideloadly)**
- Якщо у вас немає provisioning profile, використовуйте **Sideloadly** для повторного підпису за допомогою вашого Apple ID, або підпишіть у **Xcode**.
- Також ви можете відкрити доступ VM до **Xcode** за допомогою **USBFlux** (див. §5).

- Для швидкого перегляду логів/виконання команд без SSH використовуйте пристрій **Console** в інтерфейсі.

## **Додатково**

- **Port-forwarding** (щоб інші інструменти сприймали VM як локальний):
```bash
# Forward local 2222 -> device 22
ssh -N -L 2222:127.0.0.1:22 root@10.11.1.1
# Now you can: scp -P 2222 file root@10.11.1.1:/var/root/
```
- **LLDB remote debugging**: використовуйте адресу **LLDB/GDB stub**, показану внизу сторінки пристрою (CONNECT → LLDB).

- **USBFlux (macOS/Linux)**: подайте VM до **Xcode/Sideloadly** як пристрій, підключений кабелем.


## **Поширені підводні камені**
- **Proper signing** потрібен на **non-jailbroken** пристроях; **unsigned IPAs** не запустяться.
- **Quick Connect vs VPN**: Quick Connect — найпростіший варіант; використовуйте **VPN**, коли потрібен доступ до пристрою у вашій локальній мережі (наприклад, локальні проксі/інструменти).
- **No App Store** на пристроях Corellium; приносіть свої (re)signed IPAs.



{{#include ../../banners/hacktricks-training.md}}
