# iOS Jak połączyć się z Corellium

{{#include ../../banners/hacktricks-training.md}}

## **Wymagania wstępne**
- VM iOS na Corellium (jailbroken lub nie). W tym przewodniku zakładamy, że masz dostęp do Corellium.
- Narzędzia lokalne: **ssh/scp**.
- (Opcjonalnie) **SSH keys** dodane do projektu Corellium, aby umożliwić logowanie bez hasła.


## **Połączenie z iPhone VM z localhost**

### A) **Quick Connect (no VPN)**
0) Dodaj swój SSH key w **`/admin/projects`** (zalecane).
1) Otwórz stronę urządzenia → **Connect**
2) **Skopiuj Quick Connect SSH command** wyświetlany przez Corellium i wklej go w terminalu.
3) Wprowadź hasło lub użyj swojego klucza (zalecane).

### B) **VPN → direct SSH**
0) Dodaj swój SSH key w **`/admin/projects`** (zalecane).
1) Strona urządzenia → **CONNECT** → **VPN** → pobierz `.ovpn` i połącz się za pomocą dowolnego klienta VPN obsługującego tryb TAP. (Sprawdź [https://support.corellium.com/features/connect/vpn](https://support.corellium.com/features/connect/vpn) jeśli masz problemy.)
2) Zaloguj się przez SSH na adres VM **10.11.x.x**:
```bash
ssh root@10.11.1.1
```
## **Prześlij native binary & uruchom go**

### 2.1 **Przesyłanie**
- Jeśli Quick Connect podał ci host/port:
```bash
scp -J <domain> ./mytool root@10.11.1.1:/var/root/mytool
```
- Jeśli używasz VPN (10.11.x.x):
```bash
scp ./mytool -J <domain> root@10.11.1.1:/var/root/mytool
```
## **Prześlij i zainstaluj aplikację iOS (.ipa)**

### Ścieżka A — **Web UI (najszybsza)**
1) Strona urządzenia → zakładka **Apps** → **Install App** → wybierz plik `.ipa`.
2) Z tej samej zakładki możesz **launch/kill/uninstall**.

### Ścieżka B — **Skryptowo przez Corellium Agent**
1) Użyj API Agent, aby **upload** a następnie **install**:
```js
// Node.js (pseudo) using Corellium Agent
await agent.upload("./app.ipa", "/var/tmp/app.ipa");
await agent.install("/var/tmp/app.ipa", (progress, status) => {
console.log(progress, status);
});
```
### Ścieżka C — **Non-jailbroken (proper signing / Sideloadly)**
- Jeśli nie masz provisioning profile, użyj **Sideloadly** do ponownego podpisania przy użyciu Apple ID, lub zaloguj się w Xcode.
- Możesz również udostępnić VM Xcode używając **USBFlux** (zob. §5).


- Dla szybkiego podglądu logów/wykonywania komend bez SSH, użyj urządzenia **Console** w UI.

## **Dodatki**

- **Port-forwarding** (spraw, aby VM wyglądała jak lokalna dla innych narzędzi):
```bash
# Forward local 2222 -> device 22
ssh -N -L 2222:127.0.0.1:22 root@10.11.1.1
# Now you can: scp -P 2222 file root@10.11.1.1:/var/root/
```
- **LLDB remote debugging**: użyj adresu **LLDB/GDB stub** wyświetlanego na dole strony urządzenia (CONNECT → LLDB).

- **USBFlux (macOS/Linux)**: udostępnij VM dla **Xcode/Sideloadly** jako urządzenie podłączone kablem.


## **Common pitfalls**
- **Proper signing** jest wymagane na **non-jailbroken** urządzeniach; unsigned IPAs nie uruchomią się.
- **Quick Connect vs VPN**: Quick Connect jest najprostszy; użyj **VPN**, gdy potrzebujesz, aby urządzenie znajdowało się w Twojej lokalnej sieci (np. lokalne proxy/narzędzia).
- **No App Store** na urządzeniach Corellium; dostarcz własne (re)signed IPAs.



{{#include ../../banners/hacktricks-training.md}}
