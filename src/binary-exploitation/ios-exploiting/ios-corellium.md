# iOS Cómo conectarse a Corellium

{{#include ../../banners/hacktricks-training.md}}

## **Requisitos**
- Una Corellium iOS VM (jailbroken o no). En esta guía asumimos que tienes acceso a Corellium.
- Herramientas locales: **ssh/scp**.
- (Opcional) **SSH keys** añadidas a tu proyecto de Corellium para inicios de sesión sin contraseña.


## **Conectarse a la VM del iPhone desde localhost**

### A) **Quick Connect (sin VPN)**
0) Añade tu ssh key en **`/admin/projects`** (recomendado).
1) Abre la página del dispositivo → **Connect**
2) **Copy the Quick Connect SSH command** mostrado por Corellium y pégalo en tu terminal.
3) Introduce la contraseña o usa tu key (recomendado).

### B) **VPN → SSH directa**
0) Añade tu ssh key en **`/admin/projects`** (recomendado).
1) Página del dispositivo → **CONNECT** → **VPN** → descarga el `.ovpn` y conéctate con cualquier cliente VPN que soporte TAP mode. (Consulta [https://support.corellium.com/features/connect/vpn](https://support.corellium.com/features/connect/vpn) si tienes problemas.)
2) Haz SSH a la dirección **10.11.x.x** de la VM:
```bash
ssh root@10.11.1.1
```
## **Subir un binario nativo & ejecutarlo**

### 2.1 **Subir**
- Si Quick Connect te dio un host/port:
```bash
scp -J <domain> ./mytool root@10.11.1.1:/var/root/mytool
```
- Si usa VPN (10.11.x.x):
```bash
scp ./mytool -J <domain> root@10.11.1.1:/var/root/mytool
```
## **Subir e instalar una app iOS (.ipa)**

### Ruta A — **Web UI (la más rápida)**
1) Página del dispositivo → pestaña **Apps** → **Install App** → selecciona tu `.ipa`.
2) Desde la misma pestaña puedes **launch/kill/uninstall**.

### Ruta B — **Scripted via Corellium Agent**
1) Usa el API Agent para **upload** y luego **install**:
```js
// Node.js (pseudo) using Corellium Agent
await agent.upload("./app.ipa", "/var/tmp/app.ipa");
await agent.install("/var/tmp/app.ipa", (progress, status) => {
console.log(progress, status);
});
```
### Ruta C — **Sin jailbreak (firma adecuada / Sideloadly)**
- Si no tienes un provisioning profile, usa **Sideloadly** para volver a firmar con tu Apple ID, o firma desde Xcode.
- También puedes exponer la VM a Xcode usando **USBFlux** (ver §5).


- Para registros/comandos rápidos sin SSH, usa la **Console** del dispositivo en la UI.

## **Extras**

- **Port-forwarding** (hacer que la VM parezca local para otras herramientas):
```bash
# Forward local 2222 -> device 22
ssh -N -L 2222:127.0.0.1:22 root@10.11.1.1
# Now you can: scp -P 2222 file root@10.11.1.1:/var/root/
```
- **LLDB remote debugging**: usa la dirección del **LLDB/GDB stub** que aparece en la parte inferior de la página del dispositivo (CONNECT → LLDB).

- **USBFlux (macOS/Linux)**: presenta la VM a **Xcode/Sideloadly** como un dispositivo conectado por cable.


## **Errores comunes**
- **Proper signing** es necesario en dispositivos **non-jailbroken**; las IPAs no firmadas no se iniciarán.
- **Quick Connect vs VPN**: Quick Connect es el más sencillo; usa **VPN** cuando necesites que el dispositivo esté en tu red local (p. ej., proxies/herramientas locales).
- **No App Store** en dispositivos Corellium; trae tus propias IPAs (re)signed.



{{#include ../../banners/hacktricks-training.md}}
