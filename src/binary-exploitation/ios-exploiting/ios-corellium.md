# iOS How to Connect to Corellium

{{#include ../../banners/hacktricks-training.md}}

## **Pré-requisitos**
- Uma Corellium iOS VM (jailbroken ou não). Neste guia assumimos que você tem acesso ao Corellium.
- Ferramentas locais: **ssh/scp**.
- (Opcional) **SSH keys** adicionadas ao seu projeto Corellium para logins sem senha.


## **Conectar ao iPhone VM a partir do localhost**

### A) **Quick Connect (sem VPN)**
0) Adicione sua ssh key em **`/admin/projects`** (recomendado).
1) Abra a página do dispositivo → **Connect**
2) **Copy the Quick Connect SSH command** mostrado pelo Corellium e cole no seu terminal.
3) Digite a senha ou use sua chave (recomendado).

### B) **VPN → SSH direto**
0) Adicione sua ssh key em **`/admin/projects`** (recomendado).
1) Página do dispositivo → **CONNECT** → **VPN** → baixe `.ovpn` e conecte com qualquer cliente VPN que suporte TAP mode. (Check [https://support.corellium.com/features/connect/vpn](https://support.corellium.com/features/connect/vpn) if you have issues.)
2) Conecte via SSH ao endereço **10.11.x.x** da VM:
```bash
ssh root@10.11.1.1
```
## **Upload a native binary & execute it**

### 2.1 **Upload**
- Se o Quick Connect lhe forneceu um host/port:
```bash
scp -J <domain> ./mytool root@10.11.1.1:/var/root/mytool
```
- Se estiver usando VPN (10.11.x.x):
```bash
scp ./mytool -J <domain> root@10.11.1.1:/var/root/mytool
```
## **Enviar e instalar um app iOS (.ipa)**

### Caminho A — **Web UI (mais rápido)**
1) Página do dispositivo → aba **Apps** → **Install App** → selecione seu `.ipa`.
2) Na mesma aba você pode **iniciar/encerrar/desinstalar**.

### Caminho B — **Scripted via Corellium Agent**
1) Use o API Agent para **enviar** e depois **instalar**:
```js
// Node.js (pseudo) using Corellium Agent
await agent.upload("./app.ipa", "/var/tmp/app.ipa");
await agent.install("/var/tmp/app.ipa", (progress, status) => {
console.log(progress, status);
});
```
### Path C — **Non-jailbroken (proper signing / Sideloadly)**
- Se você não tem um provisioning profile, use **Sideloadly** para re-assinar com seu Apple ID, ou faça login no Xcode.
- Você também pode expor a VM para o Xcode usando **USBFlux** (veja §5).


- Para logs/comandos rápidos sem SSH, use o dispositivo **Console** na UI.

## **Extras**

- **Port-forwarding** (faça a VM parecer local para outras ferramentas):
```bash
# Forward local 2222 -> device 22
ssh -N -L 2222:127.0.0.1:22 root@10.11.1.1
# Now you can: scp -P 2222 file root@10.11.1.1:/var/root/
```
- **LLDB remote debugging**: use o endereço **LLDB/GDB stub** mostrado na parte inferior da página do dispositivo (CONNECT → LLDB).

- **USBFlux (macOS/Linux)**: apresente a VM ao **Xcode/Sideloadly** como um dispositivo conectado por cabo.


## **Problemas comuns**
- **Assinatura adequada** é necessária em dispositivos **non-jailbroken**; IPAs não assinadas não irão iniciar.
- **Quick Connect vs VPN**: Quick Connect é o mais simples; use **VPN** quando precisar que o dispositivo esteja na sua rede local (por exemplo, proxies/ferramentas locais).
- **No App Store** em dispositivos Corellium; traga suas próprias IPAs (re)signed.



{{#include ../../banners/hacktricks-training.md}}
