# iOS Comment se connecter à Corellium

{{#include ../../banners/hacktricks-training.md}}

## **Prérequis**
- A Corellium iOS VM (jailbroken or not). Dans ce guide, nous supposons que vous avez accès à Corellium.
- Local tools: **ssh/scp**.
- (Optionnel) **SSH keys** ajoutées à votre projet Corellium pour des connexions sans mot de passe.


## **Se connecter à la VM iPhone depuis localhost**

### A) **Quick Connect (no VPN)**
0) Ajoutez votre SSH key dans **`/admin/projects`** (recommandé).
1) Ouvrez la page de l'appareil → **Connect**
2) **Copy the Quick Connect SSH command** shown by Corellium and paste it in your terminal.
3) Entrez le mot de passe ou utilisez votre SSH key (recommandé).

### B) **VPN → direct SSH**
0) Ajoutez votre SSH key dans **`/admin/projects`** (recommandé).
1) Page de l'appareil → **CONNECT** → **VPN** → download `.ovpn` and connect with any VPN client that supports TAP mode. (Check [https://support.corellium.com/features/connect/vpn](https://support.corellium.com/features/connect/vpn) if you have issues.)
2) SSH vers l'adresse **10.11.x.x** de la VM:
```bash
ssh root@10.11.1.1
```
## **Téléverser un binaire natif et l'exécuter**

### 2.1 **Téléversement**
- Si Quick Connect vous a donné un host/port:
```bash
scp -J <domain> ./mytool root@10.11.1.1:/var/root/mytool
```
- Si vous utilisez un VPN (10.11.x.x) :
```bash
scp ./mytool -J <domain> root@10.11.1.1:/var/root/mytool
```
## **Téléverser et installer une app iOS (.ipa)**

### Chemin A — **Web UI (le plus rapide)**
1) Page Device → onglet Apps → Install App → sélectionnez votre `.ipa`.
2) Depuis le même onglet vous pouvez **lancer/terminer/désinstaller**.

### Chemin B — **Scripté via Corellium Agent**
1) Utilisez l'API Agent pour **téléverser** puis **installer**:
```js
// Node.js (pseudo) using Corellium Agent
await agent.upload("./app.ipa", "/var/tmp/app.ipa");
await agent.install("/var/tmp/app.ipa", (progress, status) => {
console.log(progress, status);
});
```
### Path C — **Non-jailbroken (proper signing / Sideloadly)**
- Si vous n'avez pas de provisioning profile, utilisez **Sideloadly** pour re-signer avec votre Apple ID, ou connectez-vous dans Xcode.
- Vous pouvez aussi exposer la VM à Xcode en utilisant **USBFlux** (voir §5).


- Pour obtenir rapidement des logs/commandes sans SSH, utilisez la **Console** de l'appareil dans l'UI.

## **Extras**

- **Port-forwarding** (faire en sorte que la VM semble locale pour d'autres outils):
```bash
# Forward local 2222 -> device 22
ssh -N -L 2222:127.0.0.1:22 root@10.11.1.1
# Now you can: scp -P 2222 file root@10.11.1.1:/var/root/
```
- **LLDB remote debugging**: utilisez l'adresse **LLDB/GDB stub** affichée en bas de la page de l'appareil (CONNECT → LLDB).

- **USBFlux (macOS/Linux)**: présentez la VM à **Xcode/Sideloadly** comme un appareil connecté par câble.


## **Pièges courants**
- **Proper signing** est requis sur les appareils **non-jailbroken** ; les IPAs non signés ne se lanceront pas.
- **Quick Connect vs VPN** : Quick Connect est le plus simple ; utilisez **VPN** lorsque vous avez besoin que l'appareil soit sur votre réseau local (p.ex., proxies/outils locaux).
- **No App Store** sur les appareils Corellium ; apportez vos propres IPAs (re)signés.



{{#include ../../banners/hacktricks-training.md}}
