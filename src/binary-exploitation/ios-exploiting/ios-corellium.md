# iOS Come connettersi a Corellium

{{#include ../../banners/hacktricks-training.md}}

## **Prerequisiti**
- Una Corellium iOS VM (jailbroken o no). In questa guida presumiamo che tu abbia accesso a Corellium.
- Strumenti locali: **ssh/scp**.
- (Opzionale) **SSH keys** aggiunte al tuo progetto Corellium per accessi senza password.


## **Connettersi alla VM iPhone da localhost**

### A) **Quick Connect (senza VPN)**
0) Aggiungi la tua ssh key in **`/admin/projects`** (consigliato).
1) Apri la pagina del dispositivo → **Connect**
2) **Copia il Quick Connect SSH command** mostrato da Corellium e incollalo nel tuo terminale.
3) Inserisci la password o usa la tua key (consigliato).

### B) **VPN → SSH diretto**
0) Aggiungi la tua ssh key in **`/admin/projects`** (consigliato).
1) Pagina del dispositivo → **CONNECT** → **VPN** → scarica `.ovpn` e connettiti con qualsiasi VPN client che supporti la modalità TAP. (Controlla [https://support.corellium.com/features/connect/vpn](https://support.corellium.com/features/connect/vpn) se hai problemi.)
2) Effettua SSH all'indirizzo **10.11.x.x** della VM:
```bash
ssh root@10.11.1.1
```
## **Caricare un native binary & eseguirlo**

### 2.1 **Caricamento**
- Se Quick Connect ti ha fornito un host/port:
```bash
scp -J <domain> ./mytool root@10.11.1.1:/var/root/mytool
```
- Se usi VPN (10.11.x.x):
```bash
scp ./mytool -J <domain> root@10.11.1.1:/var/root/mytool
```
## **Caricare e installare un'app iOS (.ipa)**

### Percorso A — **Web UI (più veloce)**
1) Pagina Device → scheda **Apps** → **Install App** → seleziona il tuo `.ipa`.
2) Dalla stessa scheda puoi **avviare/terminare/disinstallare**.

### Percorso B — **Automatizzato tramite Corellium Agent**
1) Usa l'API Agent per **upload** e poi **install**:
```js
// Node.js (pseudo) using Corellium Agent
await agent.upload("./app.ipa", "/var/tmp/app.ipa");
await agent.install("/var/tmp/app.ipa", (progress, status) => {
console.log(progress, status);
});
```
### Percorso C — **Non-jailbroken (proper signing / Sideloadly)**
- Se non hai un profilo di provisioning, usa **Sideloadly** per rifirmare con il tuo Apple ID, oppure effettua l'accesso in Xcode.
- Puoi anche esporre la VM a Xcode usando **USBFlux** (vedi §5).

- Per log/comandi rapidi senza SSH, usa la **Console** del dispositivo nell'UI.

## **Extra**

- **Port-forwarding** (fa sì che la VM sembri locale per altri strumenti):
```bash
# Forward local 2222 -> device 22
ssh -N -L 2222:127.0.0.1:22 root@10.11.1.1
# Now you can: scp -P 2222 file root@10.11.1.1:/var/root/
```
- **LLDB remote debugging**: usa l'**LLDB/GDB stub** address mostrato in fondo alla pagina del dispositivo (CONNECT → LLDB).

- **USBFlux (macOS/Linux)**: presenta la VM a **Xcode/Sideloadly** come un dispositivo cablato.


## **Problemi comuni**
- **Proper signing** è richiesto sui dispositivi **non-jailbroken**; unsigned IPAs non si avvieranno.
- **Quick Connect vs VPN**: Quick Connect è il più semplice; usa **VPN** quando hai bisogno che il dispositivo sia nella tua rete locale (es., local proxies/tools).
- **No App Store** on Corellium devices; porta i tuoi (re)signed IPAs.



{{#include ../../banners/hacktricks-training.md}}
