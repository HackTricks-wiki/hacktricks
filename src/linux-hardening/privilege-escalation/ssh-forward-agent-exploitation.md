{{#include ../../banners/hacktricks-training.md}}

# Özet

Eğer `/etc/ssh_config` veya `$HOME/.ssh/config` içinde bu yapılandırmayı keşfettiyseniz ne yapabilirsiniz:
```
ForwardAgent yes
```
Eğer makinenin kök kullanıcıysanız, muhtemelen _/tmp_ dizininde bulabileceğiniz herhangi bir ajanın yaptığı **herhangi bir ssh bağlantısına erişebilirsiniz**.

Bob'un ssh-agent'ını kullanarak Bob'u taklit et:
```bash
SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816 ssh bob@boston
```
## Neden bu işe yarıyor?

`SSH_AUTH_SOCK` değişkenini ayarladığınızda, Bob'un ssh bağlantısında kullanılan anahtarlarına erişiyorsunuz. Ardından, eğer özel anahtarı hala oradaysa (normalde orada olacaktır), onu kullanarak herhangi bir hosta erişebilirsiniz.

Özel anahtar, ajanın belleğinde şifrelenmemiş olarak saklandığı için, eğer siz Bob iseniz ama özel anahtarın şifresini bilmiyorsanız, yine de ajana erişip onu kullanabilirsiniz.

Başka bir seçenek, ajanın sahibi olan kullanıcının ve root'un ajanın belleğine erişip özel anahtarı çıkartabilmesidir.

# Uzun açıklama ve istismar

**[orijinal araştırmayı buradan kontrol edin](https://www.clockwork.com/insights/ssh-agent-hijacking/)**
{{#include ../../banners/hacktricks-training.md}}
