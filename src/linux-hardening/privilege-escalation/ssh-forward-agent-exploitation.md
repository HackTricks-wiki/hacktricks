{{#include ../../banners/hacktricks-training.md}}

# Sažetak

Šta možete učiniti ako otkrijete unutar `/etc/ssh_config` ili unutar `$HOME/.ssh/config` konfiguraciju ovako:
```
ForwardAgent yes
```
Ako ste root unutar mašine, verovatno možete **pristupiti bilo kojoj ssh vezi koju je napravio bilo koji agent** koji možete pronaći u _/tmp_ direktorijumu.

Imitirati Boba koristeći jedan od Bobovih ssh-agenta:
```bash
SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816 ssh bob@boston
```
## Zašto ovo funkcioniše?

Kada postavite promenljivu `SSH_AUTH_SOCK`, pristupate ključevima Boba koji su korišćeni u Bobovoj ssh vezi. Tada, ako je njegov privatni ključ još uvek tu (normalno će biti), moći ćete da pristupite bilo kojem hostu koristeći ga.

Pošto je privatni ključ sačuvan u memoriji agenta nekriptovan, pretpostavljam da ako ste Bob, ali ne znate lozinku privatnog ključa, i dalje možete pristupiti agentu i koristiti ga.

Druga opcija je da korisnik koji je vlasnik agenta i root mogu imati pristup memoriji agenta i izvući privatni ključ.

# Dugo objašnjenje i eksploatacija

**Proverite [originalno istraživanje ovde](https://www.clockwork.com/insights/ssh-agent-hijacking/)**
{{#include ../../banners/hacktricks-training.md}}
